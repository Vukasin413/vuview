import{createComponent as g,isServer as ie,Dynamic as tn,mergeProps as F,Portal as kt,ssr as B,ssrHydrationKey as H,escape as O,ssrAttribute as Ke,ssrElement as Qr,Switch as Mi,Match as nn,Show as rn}from"solid-js/web";import{createContext as re,useContext as oe,createSignal as I,$PROXY as Me,batch as yn,getOwner as Fi,onCleanup as k,DEV as _i,createEffect as A,createRenderEffect as Ri,createMemo as j,$TRACK as Ni,untrack as eo,createRoot as ar,mergeProps as Kt,on as me,createUniqueId as we,splitProps as K,children as to,For as Bi,Show as W,onMount as pt,createComputed as Hi,createComponent as ki,Switch as Nn,Match as Ze}from"solid-js";import{WebrtcProvider as Ki}from"y-webrtc";import*as Y from"yjs";import{createStore as bt,reconcile as lr,produce as Ui}from"solid-js/store";import{u as no,L as Ft}from"./Link-ClDVT-6o.js";import{ObservableV2 as $i}from"lib0/observable";import{d as ro,F as Vi,e as Gi,x as ji,y as Wi,z as zi,m as Xi,u as Yi,v as qi,s as Zi,o as Ji,A as Qi,B as es,C as ts}from"./index-BPtxG8PX.js";import xn from"numeral";import{createTimeAgo as cr}from"@solid-primitives/date";import{h as ns,i as rs}from"./index-Bhsy5eyg.js";import{u as os,f as is}from"./routing-CB9zsxEG.js";const oo=re(null);function uf(e){const t=I();return g(oo.Provider,{value:t,get children(){return e.children}})}const df=()=>{const e=oe(oo);if(!e)throw new Error("usePlaylist must be used within a PlaylistProvider");return e};function ss(e,t,n){const r={added:[],moved:[],deleted:[],dirty:[]};if(e.length===0)r.added=t.map((o,i)=>({index:i,value:o}));else if(t.length===0)r.deleted=e.map((o,i)=>i);else{let o,i,s,l,a,c,u=e.length,f=t.length;for(o=0,i=Math.min(u,f);o<i&&e[o]===t[o];o++);for(i=u-1,s=f-1;i>=o&&s>=o&&e[i]===t[s];i--,s--);let h=new Map,p=new Array(s+1);for(c=s;c>=o;c--)l=t[c],a=h.get(l),p[c]=a===void 0?-1:a,h.set(l,c);for(a=o;a<=i;a++)l=e[a],c=h.get(l),c!==void 0&&c!==-1?(r.moved[c]={oldIndex:a,newIndex:c,value:l},c=p[c],h.set(l,c)):n?.has(a)||r.deleted.push(a);for(c=o;c<=s;c++)c in r.moved||n?.has(c)||r.added.push({index:c,value:t[c]})}return{...r,moved:r.moved.filter(({oldIndex:o,newIndex:i})=>o!==i)}}const He=(e,...t)=>{const n=e.map((o,i)=>"%c"+new Array(i).fill(" ").join("")+"• %c"+o).join(`
`),r=e.map((o,i)=>["","background: lightgrey; color: black;"]).flat();console.log(n,...r,...t)},as=(e,...t)=>{const n=e.map((o,i)=>"%c"+new Array(i).fill(" ").join("")+"• %c"+o).join(`
`),r=e.map((o,i)=>["","background: lightgrey; color: black;"]).flat();console.error(n,...r,...t)},de=(...e)=>console.error("UNEXPECTED CODE REACHED!!!",...e),Ee=[];let on=null;const _t=e=>{Ee.length!==0&&(console.log("executeYjsOperations",Ee.length),e&&(on&&clearTimeout(on),on=setTimeout(()=>{e.transact(()=>{console.log("ydoc.transact",Ee.length),Ee.forEach(t=>{switch(t.type){case"set":t.ymap.set(t.key,t.value);break;case"delete":t.yparent instanceof Y.Map&&t.key?t.yparent.delete(t.key):t.yparent instanceof Y.Array&&t.index&&t.yparent.delete(t.index);break;case"insert":t.yarray.insert(t.index,t.content);break;default:throw de()}})}),Ee.length=0},0)))},ls=(e,t,n,r)=>{if(n[Me]){as(["setYMap"],"trying to set a solid-proxy inside a yjs-object");return}Ee.push({type:"set",ymap:e,key:t,value:n}),_t(r)},cs=(e,t,n,r)=>{e.length>t&&(Ee.push({type:"delete",yparent:e,index:t}),Ee.push({type:"insert",yarray:e,index:t,content:[n]}),_t(r))},us=(e,t,n)=>{e instanceof Y.Array&&typeof t=="number"?(Ee.push({type:"delete",yparent:e,index:t}),_t(n)):e instanceof Y.Map&&typeof t=="string"?(Ee.push({type:"delete",yparent:e,key:t}),_t(n)):de(e,t)},Ct=(e,t,n,r)=>{e instanceof Y.Array&&typeof t=="number"?cs(e,t,n,r):(e instanceof Y.Map||e instanceof Y.Doc)&&typeof t=="string"?ls(e,t,n,r):de(e,t,n)},sn=(e,t)=>{if(t===void 0)return e;if(e instanceof Y.Array&&typeof t=="number")return e.get(t);if((e instanceof Y.Map||e instanceof Y.Doc)&&typeof t=="string")return e.get(t);de(e,t,e[Me])};function ur(e,...t){return e.concat(...t)}class ds{queue=[];start=performance.now();add(t){this.queue.length===0&&(this.start=performance.now(),setTimeout(()=>this.execute(),50)),this.queue.push(t)}execute(){yn(()=>this.queue.forEach(t=>t())),this.queue=[]}}const he=e=>bt(e)[1],an=e=>typeof e=="string"||typeof e=="number"||typeof e=="boolean";function fs(e,t,n=!1){const[r,o]=bt(t),i=new ds,s=new Map,l=(m,v)=>{const T=ur(m.moved.map(({oldIndex:C})=>C),m.deleted).sort((C,D)=>D-C);n&&He(["optimizeMutationOperations","deleted is"],T);const w=[];T.forEach((C,D)=>{D!==0&&C-T[D-1]===1?w[w.length-1].length++:w.push({index:C,length:1})});const y=ur(m.moved.map(({newIndex:C,oldIndex:D})=>({index:C,value:v.get(D)})),m.added.map(({index:C,value:D})=>({index:C,value:a(D)}))).sort((C,D)=>C.index-D.index);n&&He(["optimizeMutationOperations","added is"],y,m.added);const P=[];return y.forEach(({value:C,index:D},L)=>{L!==0&&C.index-y[L-1].index===1?P[P.length-1].values.push(C):P.push({index:D,values:[C]})}),{deleted:w,added:P}},a=m=>{if(n&&He(["createYjsBranch"],m),an(m))return m;if(Array.isArray(m)){const v=m.map(w=>a(w)),T=new Y.Array;return h(T,m),T.insert(0,v),T}else if(typeof m=="object"){const v=Object.entries(m).map(([w,y])=>{const P=a(y);return[w,P]}),T=new Y.Map(v);return h(T,m),T}else de(m,"svalue is not primitive, array or object")},c=(m,v,T,w)=>{if(n&&He(["solidToYjs"],m,v,T,w),!v)return de("sparent is undefined"),!1;if(!m)return de("yparent is undefined",v),!1;an(w)?Ct(m,T,w,e):w===void 0&&m instanceof Y.Map?us(m,T,e):Array.isArray(w)?u(m,v,T,w):typeof w=="object"&&f(m,v,T,w)},u=(m,v,T,w)=>{T&&!(T in v)&&he(v)(T,[]);const y=v[T];let P=sn(m,T);if(P||(P=new Y.Array,Ct(m,T,P,e)),!(P instanceof Y.Array)){de(P);return}const C=ss(y,w,x.get(y));n&&He(["minimumMutationOperations"],C);const{deleted:D,added:L}=l(C,P);n&&He(["solidArrayToYjs"],C),P.doc?.transact(()=>{D.forEach(({index:_,length:M})=>P.delete(_,M)),L.forEach(({index:_,values:M})=>P.insert(_,M))}),w.length<P.length&&P.delete(w.length,P.length-w.length)},f=(m,v,T,w)=>{T&&!(T in v)&&he(v)(T,{});const y=T?v[T]:v;let P=sn(m,T);if(!P){P=new Y.Map,Ct(m,T,P,e),Object.entries(w).forEach(([C,D])=>{t===void 0?de():an(D)?Ct(P,C,D,e):(C in y||he(y)(C,Array.isArray(D)?[]:{}),c(P,y[C],C,D))});return}if(P instanceof Y.Map){n&&console.info(`be careful: when setting an object in a store, the object gets shallowly merged
(see https://www.solidjs.com/docs/latest/api#createstore).
This can possibly create multiple entry-points of the same reactive value in a store:

const [store, setStore] = createStore({firstEntryPoint: "ok"});
setStore({secondEntryPoint: store.firstEntryPoint});

=> store.secondEntryPoint points at store.firstEntryPoint.

Multiple entry-points are currently not supported in yjsStore.`),y||he(v)(T,{}),Object.entries(w).forEach(([C,D])=>c(P,y,C,D));return}de(P)},h=(m,v)=>{m instanceof Y.Array?m.observe(T=>yn(()=>{if(T.transaction.local)return;let w=0;T.changes.delta.forEach(y=>{if(y.retain)w+=y.retain;else if(y.insert){const P=Array.isArray(y.insert)?y.insert.map(C=>typeof C=="object"?C.toJSON():C):[y.insert];i.add(()=>{he(v)(C=>[...C.slice(0,w),...P,...C.slice(w,C.length)]),w+=P.length,p(m,v)})}else y.delete&&i.add(()=>{he(v)(P=>[...P.slice(0,w),...P.slice(w+y.delete,P.length)])})})})):m.observe(T=>yn(()=>{T.keysChanged.forEach(w=>{const y=sn(m,w);if(!w){de("keyToUpdate is null",w);return}!y&&w in v?i.add(()=>he(v)(w,void 0)):y instanceof Y.Array||y instanceof Y.Map?i.add(()=>{he(v)(w,lr(y.toJSON())),h(y,v[w]),p(y,v[w])}):i.add(()=>he(v)(w,y))})})),s.set(v,m),s.set(m,v)},p=(m,v)=>{if(!(m instanceof Y.Map||m instanceof Y.Array)){de(m,v);return}m.forEach((T,w)=>{(T instanceof Y.Map||T instanceof Y.Array)&&(v[w]||he(v)(w,Array.isArray(t)?[]:{}),h(T,v[w]),p(T,v[w]))})},d=new WeakMap,x=new Map,E={get(m,v){if(n&&console.log("property",v),v===Me)return m;const T=m[v];if(v==="unshift")return m[Me].unshift;let w;return T?.[Me]?d.get(T)||(d.set(T,w=new Proxy(T,E)),w):T},set(m,v,T){return typeof v=="string"&&!isNaN(+v)&&(x.get(m)||x.set(m,new Set),x.get(m).add(Array.isArray(m)?+v:v)),!0},deleteProperty(m,v){return!0}},b=function(...m){[...m];let v=m.pop(),T=m.pop(),w=[[{sparent:r,yparent:e,key:""}]];for(;m.length>0;){const y=m.shift(),P=w[w.length-1];He(["_setStore","currentLayer"],P);const C=[];typeof y=="function"?P.forEach(({sparent:D,yparent:L})=>{if(Array.isArray(D)&&L instanceof Y.Array){const _=D.map((M,R)=>[M,R]).filter(([M])=>y(M)).map(([M,R])=>({sparent:M,yparent:L.get(R),key:y.toString()}));C.push(..._)}else console.warn(L,D,y),de(D,L)}):P.forEach(({sparent:D,yparent:L})=>{const _=D[y];let M="get"in L?L.get(y):void 0;M||(console.log("nextYparent is undefined",L,y),L=a(D),M=L.get(y),console.log("nextYparent is now",M,L)),console.log("nextSparent",_,M),_!==void 0&&M?C.push({sparent:_,yparent:M,key:y.toString()}):(console.warn("Failed to access sparent or yparent with key:",y,typeof _),de())}),w.push(C)}n&&console.log("THIS IS HAPPENING"),w[w.length-1].forEach(({sparent:y,yparent:P})=>{let C=v;if(console.log("nextValue",C,P,y),typeof C=="function"){const D=Ui(()=>{}).toString().replace(/\s/g,"");if(C.toString().replace(/\s/g,"")===D){x.clear();let _;d.set(y,_=new Proxy(y[T],E)),C(_),n&&console.log("PROXY is ",_,_[Me]),Array.from(x.entries()).forEach(([M,R])=>{const J=s.get(M);R.forEach(Z=>{n&&console.log(P,M,Z,M[Z]),c(J,M,Z,M[Z])})}),he(y)(T,lr(_[Me]))}else C=C(y[T]),c(P,y,T,C),he(y)(T,C),P instanceof Y.Doc||p(P,y)}else c(P,y,T,C),he(y)(T,C)})};return Object.entries(t).forEach(([m,v])=>{if(typeof v=="object"){const T=Array.isArray(v)?e.getArray(m):e.getMap(m);h(T,r[m]),p(T,r[m])}else console.error("currently only arrays and objects are allowed")}),[r,b]}async function ff(e,t,n){if(t){const o=new URL(e);for(const i in t)t.hasOwnProperty(i)&&o.searchParams.set(i,t[i]);e=o.toString()}return(await fetch(e,n)).json()}function hf(e,t,n){if(e[t]===n)return e}function hs(){return new Promise(e=>{setTimeout(e,0)})}function Ie(e){const t=n=>{let r;return n?.includes("/watch?v=")?r=n.split("/watch?v=")[1]:r=n?.match("vi(?:_webp)?/([a-zA-Z0-9_-]{11})")?.[1],r};if(e){if(e.videoId)return e.videoId;if(e.id)return e.id;if(e.url)return t(e.url);if(e.thumbnailUrl)return t(e.thumbnailUrl);if(e.thumbnail)return t(e.thumbnail)}}async function gs(e,t=5,n=1e3,r=6e4){let o=0;if(n>=r)throw new Error("minDelay should be less than maxDelay.");if(t<0)throw new Error("Number of retries should be non-negative.");for(;;)try{return await e()}catch{if(o++,o>t)throw new Error("Maximum retries reached.");const s=Math.min(n*Math.pow(2,o),r);await new Promise(l=>setTimeout(l,s))}}function gf(){return ie?!1:navigator.maxTouchPoints>1&&typeof screen.orientation!==void 0}function ms(e,t){const n=Math.floor((e.getTime()-t.getTime())/1e3),r=60,o=r*60,i=o*24,s=i*30,l=i*365;return n>=l?`${Math.floor(n/l)}y`:n>=s?`${Math.floor(n/s)}mo`:n>=i?`${Math.floor(n/i)}d`:n>=o?`${Math.floor(n/o)}h`:n>=r?`${Math.floor(n/r)}m`:"now"}function mf(e,t){let n=null;return function(...r){const o=this,i=()=>{n=null,e.apply(o,r)};n!==null&&clearTimeout(n),n=setTimeout(i,t)}}const vs=1e3;class Bn extends EventTarget{#t;#n;#s;#a=new BroadcastChannel("SharedService");#e=null;#l=new AbortController;#r;providerCallbacks=new Map;#o=0;#i=[];proxy;constructor(t,n){super(),console.log("SharedService constructor",n),this.#t=t,this.#s=n,this.#n=this.#d(),console.log("SharedService clientId",this.#n),this.#r=this.#c(),this.#a.addEventListener("message",({data:r})=>{r?.type==="provider"&&r?.sharedService===this.#t&&(console.log("SharedService provider change",r),this.#f(this.#r),this.#r=this.#c())},{signal:this.#l.signal}),this.proxy=this.#h()}async activate(t){if(console.log("SharedService activate called"),this.#e){console.warn("SharedService activate called twice");return}this.#e=new AbortController;const n=`SharedService-${this.#t}`;console.log(await navigator.locks.query()),(await navigator.locks.query()).held?.find(o=>o.name===n)&&(console.log("SharedService lock already held"),t());try{await navigator.locks.request(n,{signal:this.#e.signal,mode:"exclusive"},async o=>{console.log("SharedService lock acquired");try{await this.executeLockedSection(t)}catch(i){throw console.error("An error occurred within the lock-acquired section:",i),i}})}catch(o){throw console.error("Error in lock acquisition or execution:",o),o}finally{console.log("SharedService lock released"),this.cleanupResources()}}async executeLockedSection(t){const n=await this.#s();n.start();const r=await this.#n,o=new BroadcastChannel("SharedService");return this.listenForClientRequests(n,o,t),o.postMessage({type:"provider",sharedService:this.#t,providerId:r}),new Promise((i,s)=>{this.#e.signal.addEventListener("abort",async()=>{console.log("Cleanup"),await this.proxy.cleanup(),o.close(),s(this.#e?.signal.reason)})})}listenForClientRequests(t,n,r){n.addEventListener("message",async({data:o})=>{if(o?.type==="request"&&o?.sharedService===this.#t){console.log("SharedService request received",o);const i=await this.getPortForClient(t,o.clientId);console.log("SharedService port obtained",i),this.#u(o,i),r()}},{signal:this.#e.signal})}async getPortForClient(t,n){return console.log("SharedService getPortForClient called",n),new Promise(r=>{t.addEventListener("message",o=>{console.log("SharedService getPortForClient message received",o),r(o.ports[0])},{once:!0}),t.postMessage(n)})}cleanupResources(){this.#e&&(this.#e?.abort(),this.#e=null)}deactivate(){console.log("SharedService deactivate called"),this.#e?.abort(),this.#e=null}close(){console.log("cleanup"),this.deactivate(),this.#l.abort();for(const{reject:t}of this.providerCallbacks.values())t(new Error("SharedService closed"))}async#u(t,n){console.log("SharedService port sent to client",navigator.serviceWorker,t,n),(await navigator.serviceWorker.ready).active?.postMessage(t,[n])}async#d(){let t=null;async function n(){const r=await fetch("/clientId");console.log("SharedService clientId response",r);const o=r.headers.get("content-type");if(r.ok&&o?.startsWith("text/plain"))return r.text();throw new Error("Service worker not ready or other error")}return t=await gs(n,2,1e3,16e3),console.log("Successfully fetched clientId:",t),navigator.serviceWorker.addEventListener("message",r=>{r.data.ports=r.ports,console.log("SharedService message received FROM SERVICEWORKER",r),this.dispatchEvent(new MessageEvent("message",{data:r.data}))}),await Bn.#g(t),t}async#c(){const t=++this.#o;let n=null;const r=await this.#n;for(;!n&&t===this.#o;){const o=dr();this.#a.postMessage({type:"request",nonce:o,sharedService:this.#t,clientId:r});const i=new Promise(s=>{const l=new AbortController;this.addEventListener("message",a=>{console.log("Provider port received",a),a.data?.nonce===o&&(s(a.data.ports[0]),l.abort())},{signal:l.signal}),this.#i.push(()=>l.abort())});n=await Promise.race([i,new Promise(s=>setTimeout(()=>s(null),vs))]),n||i.then(s=>s?.close())}return n&&t===this.#o?(this.#i.forEach(o=>o()),this.#i=[],n.addEventListener("message",({data:o})=>{const i=this.providerCallbacks.get(o.nonce);o.error?i?.reject(Object.assign(new Error,o.error)):i?.resolve(o.result)}),n.start(),n):(n?.close(),null)}#f(t){t.then(n=>n?.close());for(const{reject:n}of this.providerCallbacks.values())n(new Error("SharedService provider change"))}#h(){return new Proxy({},{get:(t,n)=>async(...r)=>{const o=dr(),i=await this.#r;return console.log("finally",o,n,r),new Promise((s,l)=>{this.providerCallbacks.set(o,{resolve:s,reject:l}),i?.postMessage({nonce:o,method:n,args:r})}).finally(()=>{this.providerCallbacks.delete(o)})}})}static#g=function(){let t;return function(n){return t||(t=new Promise(r=>{navigator.locks.request(n,()=>new Promise(o=>{r()}))}))}}()}function ps(e){console.log("createSharedServicePort",e);const{port1:t,port2:n}=new MessageChannel;return console.log("Listening to message events on provider port 1",t),t.addEventListener("message",({data:r})=>{const{port1:o,port2:i}=new MessageChannel;console.log("Requesting lock",r),navigator.locks.request(r,()=>{o.close()}),o.addEventListener("message",async({data:s})=>{console.log("service worker received message",s);const l={nonce:s.nonce};try{l.result=await e[s.method](...s.args)}catch(a){const c=a instanceof Error?Object.fromEntries(Object.getOwnPropertyNames(a).map(u=>[u,a[u]])):a;l.error=c}o.postMessage(l)}),o.start(),t.postMessage(null,[i])}),t.start(),n}function dr(){return Math.random().toString(36).replace("0.","")}function bs(e){let r=2166136261;for(const o of e)r^=o,r*=16777619,r>>>=0;return r.toString(16)}class ys extends $i{constructor(t,n,r=!1){super(),this.room=t,this.ydoc=n,this.debug=r,this.log("Initializing YOpfsProvider..."),this.worker=new Worker("/OpfsWorker.js"),console.time("OPFS"),this.whenSynced=()=>new Promise(o=>{this.on("synced",()=>{o(this)})}),n.on("update",(o,i)=>{this._storeUpdate(o,i)}),n.on("destroy",()=>{this.destroy()})}worker=null;debug;PREFERRED_TRIM_SIZE=10;_updateCount=0;DEBOUNCE_TIMEOUT=1e3;_destroyed=!1;_storeTimeoutId=null;whenSynced;_sharedService=null;synced=!1;_timerId=null;_getSessionId=()=>{let t=sessionStorage.getItem("sessionId");return t||(t=Math.random().toString(36).substring(2,15),sessionStorage.setItem("sessionId",t)),t};_storeUpdate=async(t,n)=>{if(this.log("Received update from Y.Doc...",t,n),n!==this&&!this._destroyed){this._timerId&&clearTimeout(this._timerId);const r=(await navigator.locks.query()).held?.find(i=>i.name===`SharedService-${this.room}`);if(!this.synced&&!r){this.log("Waiting for sync..."),this._timerId=setTimeout(()=>{this._storeUpdate(t,n)},1e3);return}bs(t);const{updates:o}=await this._sharedService?.proxy.read();if(console.log("updates",o),this.log("Received a local Y.Doc update or an update from another provider.",t,n,this,this._updateCount),this._sharedService?.proxy.write(t),++this._updateCount>=10){this._storeTimeoutId!==null&&clearTimeout(this._storeTimeoutId);const i=Y.encodeStateAsUpdate(this.ydoc),s=i.byteLength/1024/1024;console.log(`updates size: ${s} MB`),this._storeTimeoutId=setTimeout(()=>{this.log("Trimming updates file..."),this._sharedService?.proxy.trim(i),this._storeTimeoutId=null,this._updateCount=0},this.DEBOUNCE_TIMEOUT)}}};log=(...t)=>{this.debug&&console.log(...t)};sendMessage(t){return new Promise((n,r)=>{if(!this.worker){r("Worker not initialized.");return}const o=s=>{n(s.data),this.worker?.removeEventListener("message",o)},i=s=>{s instanceof ErrorEvent&&r(s),this.worker?.removeEventListener("error",i)};this.worker.onerror=i,this.worker.onmessage=o,this.worker.postMessage(t)})}activateCalled=!1;async sync(){return new Promise(async(t,n)=>{try{this.log("Synchronizing Y.Doc with OPFS..."),console.time("OPFS: getStoredUpdates"),this._sharedService=new Bn(this.room,()=>ps({read:async()=>(console.log("Calling read"),new Promise((r,o)=>{if(!this.worker){o("Worker not initialized.");return}const i=l=>{r(l.data),this.worker?.removeEventListener("message",i)},s=l=>{l instanceof ErrorEvent&&o(l),this.worker?.removeEventListener("error",s)};this.worker.onerror=s,this.worker.onmessage=i,this.worker.postMessage({action:"read",payload:{roomName:this.room}})})),write:async r=>(console.log("Calling write"),this.sendMessage({action:"write",payload:{roomName:this.room,content:r}})),trim:r=>(console.log("Calling trim"),this.sendMessage({action:"trim",payload:{roomName:this.room,content:r}})),cleanup:()=>this.sendMessage({action:"cleanup",payload:{roomName:this.room}})})),console.log("this._sharedService",this._sharedService),await this._sharedService.activate(async()=>{if(console.log("Destroyed?",this._destroyed,"synced?",this.synced),this._destroyed||this.synced||this.activateCalled)return;this.activateCalled=!0;const r=await this._sharedService?.proxy.read();console.log("res",r);const{updates:o}=r;if(console.timeEnd("OPFS: getStoredUpdates"),this.log("Received updates from OPFS.",o.length),this._updateCount=o.length,Y.transact(this.ydoc,()=>{o.forEach(i=>{Y.applyUpdate(this.ydoc,i,this)})},this,!1),this._destroyed)return this;this.emit("synced",[]),this.synced=!0,console.timeEnd("OPFS"),t()})}catch(r){console.error("Error syncing",r),this.destroy(),n(r)}})}destroy(){this.ydoc.off("update",this._storeUpdate),this.ydoc.off("destroy",this.destroy),this._destroyed=!0,this.worker&&this.worker.terminate(),this._sharedService?.deactivate()}}var xs=!ie,ws=xs&&!!_i;function io(e){return(...t)=>{for(const n of e)n&&n(...t)}}function Ss(e){return(...t)=>{for(let n=e.length-1;n>=0;n--){const r=e[n];r&&r(...t)}}}var S=e=>typeof e=="function"&&!e.length?e():e,fr=e=>Array.isArray(e)?e:e?[e]:[];function Es(e,...t){return typeof e=="function"?e(...t):e}var Ts=ws?e=>Fi()?k(e):e:k;function Cs(e,t,n,r){return e.addEventListener(t,n,r),Ts(e.removeEventListener.bind(e,t,n,r))}function Ps(e,t,n,r){if(ie)return;const o=()=>{fr(S(e)).forEach(i=>{i&&fr(S(t)).forEach(s=>Cs(i,s,n,r))})};typeof e=="function"?A(o):Ri(o)}var ln=Symbol("fallback");function hr(e){for(const t of e)t.dispose()}function Is(e,t,n,r={}){if(ie){const s=e();let l=[];if(s&&s.length)for(let a=0,c=s.length;a<c;a++)l.push(n(()=>s[a],()=>a));else r.fallback&&(l=[r.fallback()]);return()=>l}const o=new Map;return k(()=>hr(o.values())),()=>{const s=e()||[];return s[Ni],eo(()=>{if(!s.length)return hr(o.values()),o.clear(),r.fallback?[ar(f=>(o.set(ln,{dispose:f}),r.fallback()))]:[];const l=new Array(s.length),a=o.get(ln);if(!o.size||a){a?.dispose(),o.delete(ln);for(let u=0;u<s.length;u++){const f=s[u],h=t(f,u);i(l,f,u,h)}return l}const c=new Set(o.keys());for(let u=0;u<s.length;u++){const f=s[u],h=t(f,u);c.delete(h);const p=o.get(h);p?(l[u]=p.mapped,p.setIndex?.(u),p.setItem(()=>f)):i(l,f,u,h)}for(const u of c)o.get(u)?.dispose(),o.delete(u);return l})};function i(s,l,a,c){ar(u=>{const[f,h]=I(l),p={setItem:h,dispose:u};if(n.length>1){const[d,x]=I(a);p.setIndex=x,p.mapped=n(f,d)}else p.mapped=n(f);o.set(c,p),s[a]=p.mapped})}}function Os(e){const{by:t}=e;return j(Is(()=>e.each,typeof t=="function"?t:n=>n[t],e.children,"fallback"in e?{fallback:()=>e.fallback}:void 0))}function Pt(){return!0}var As={get(e,t,n){return t===Me?n:e.get(t)},has(e,t){return e.has(t)},set:Pt,deleteProperty:Pt,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:Pt,deleteProperty:Pt}},ownKeys(e){return e.keys()}},Ds=/((?:--)?(?:\w+-?)+)\s*:\s*([^;]*)/g;function gr(e){const t={};let n;for(;n=Ds.exec(e);)t[n[1]]=n[2];return t}function Ls(e,t){if(typeof e=="string"){if(typeof t=="string")return`${e};${t}`;e=gr(e)}else typeof t=="string"&&(t=gr(t));return{...e,...t}}var cn=(e,t,n)=>{let r;for(const o of e){const i=S(o)[t];r?i&&(r=n(r,i)):r=i}return r};function Ms(...e){const t=Array.isArray(e[0]),n=t?e[0]:e;if(n.length===1)return n[0];const r=t&&e[1]?.reverseEventHandlers?Ss:io,o={};for(const s of n){const l=S(s);for(const a in l)if(a[0]==="o"&&a[1]==="n"&&a[2]){const c=l[a],u=a.toLowerCase(),f=typeof c=="function"?c:Array.isArray(c)?c.length===1?c[0]:c[0].bind(void 0,c[1]):void 0;f?o[u]?o[u].push(f):o[u]=[f]:delete o[u]}}const i=Kt(...n);return new Proxy({get(s){if(typeof s!="string")return Reflect.get(i,s);if(s==="style")return cn(n,"style",Ls);if(s==="ref"){const l=[];for(const a of n){const c=S(a)[s];typeof c=="function"&&l.push(c)}return r(l)}if(s[0]==="o"&&s[1]==="n"&&s[2]){const l=o[s.toLowerCase()];return l?r(l):Reflect.get(i,s)}return s==="class"||s==="className"?cn(n,s,(l,a)=>`${l} ${a}`):s==="classList"?cn(n,s,(l,a)=>({...l,...a})):Reflect.get(i,s)},has(s){return Reflect.has(i,s)},keys(){return Object.keys(i)}},As)}function Fs(e,t,n=-1){return n in e?[...e.slice(0,n),t,...e.slice(n)]:[...e,t]}function wn(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function _s(e){return typeof e=="number"}function Rs(e){return Array.isArray(e)}function ze(e){return Object.prototype.toString.call(e)==="[object String]"}function Ut(e){return typeof e=="function"}function Ce(e){return t=>`${e()}-${t}`}function ye(e,t){return e?e===t||e.contains(t):!1}function dt(e,t=!1){const{activeElement:n}=fe(e);if(!n?.nodeName)return null;if(so(n)&&n.contentDocument)return dt(n.contentDocument.body,t);if(t){const r=n.getAttribute("aria-activedescendant");if(r){const o=fe(n).getElementById(r);if(o)return o}}return n}function Hn(e){return fe(e).defaultView||window}function fe(e){return e?e.ownerDocument||e:document}function so(e){return e.tagName==="IFRAME"}var ao=(e=>(e.Escape="Escape",e.Enter="Enter",e.Tab="Tab",e.Space=" ",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.ArrowUp="ArrowUp",e.End="End",e.Home="Home",e.PageDown="PageDown",e.PageUp="PageUp",e))(ao||{});function lo(e){return typeof window>"u"||window.navigator==null?!1:window.navigator.userAgentData?.brands.some(t=>e.test(t.brand))||e.test(window.navigator.userAgent)}function kn(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.userAgentData?.platform||window.navigator.platform):!1}function yt(){return kn(/^Mac/i)}function Ns(){return kn(/^iPhone/i)}function Bs(){return kn(/^iPad/i)||yt()&&navigator.maxTouchPoints>1}function co(){return Ns()||Bs()}function Hs(){return yt()||co()}function ks(){return lo(/AppleWebKit/i)&&!Ks()}function Ks(){return lo(/Chrome/i)}function q(e,t){return t&&(Ut(t)?t(e):t[0](t[1],e)),e?.defaultPrevented}function ee(e){return t=>{for(const n of e)q(t,n)}}function Us(e){return yt()?e.metaKey&&!e.ctrlKey:e.ctrlKey&&!e.metaKey}function se(e){if(e)if($s())e.focus({preventScroll:!0});else{const t=Vs(e);e.focus(),Gs(t)}}var It=null;function $s(){if(It==null){It=!1;try{document.createElement("div").focus({get preventScroll(){return It=!0,!0}})}catch{}}return It}function Vs(e){let t=e.parentNode;const n=[],r=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==r;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&n.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return r instanceof HTMLElement&&n.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),n}function Gs(e){for(const{element:t,scrollTop:n,scrollLeft:r}of e)t.scrollTop=n,t.scrollLeft=r}var uo=["input:not([type='hidden']):not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","[tabindex]","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]:not([contenteditable='false'])"],js=[...uo,'[tabindex]:not([tabindex="-1"]):not([disabled])'],Kn=uo.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])",Ws=js.join(':not([hidden]):not([tabindex="-1"]),');function fo(e,t){const r=Array.from(e.querySelectorAll(Kn)).filter(mr);return t&&mr(e)&&r.unshift(e),r.forEach((o,i)=>{if(so(o)&&o.contentDocument){const s=o.contentDocument.body,l=fo(s,!1);r.splice(i,1,...l)}}),r}function mr(e){return ho(e)&&!zs(e)}function ho(e){return e.matches(Kn)&&Un(e)}function zs(e){return parseInt(e.getAttribute("tabindex")||"0",10)<0}function Un(e,t){return e.nodeName!=="#comment"&&Xs(e)&&Ys(e,t)&&(!e.parentElement||Un(e.parentElement,e))}function Xs(e){if(!(e instanceof HTMLElement)&&!(e instanceof SVGElement))return!1;const{display:t,visibility:n}=e.style;let r=t!=="none"&&n!=="hidden"&&n!=="collapse";if(r){if(!e.ownerDocument.defaultView)return r;const{getComputedStyle:o}=e.ownerDocument.defaultView,{display:i,visibility:s}=o(e);r=i!=="none"&&s!=="hidden"&&s!=="collapse"}return r}function Ys(e,t){return!e.hasAttribute("hidden")&&(e.nodeName==="DETAILS"&&t&&t.nodeName!=="SUMMARY"?e.hasAttribute("open"):!0)}function qs(e,t){return t.some(n=>n.contains(e))}function Zs(e,t,n){const r=t?.tabbable?Ws:Kn,o=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode(i){return t?.from?.contains(i)?NodeFilter.FILTER_REJECT:i.matches(r)&&Un(i)&&(!n||qs(i,n))&&(!t?.accept||t.accept(i))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return t?.from&&(o.currentNode=t.from),o}function Js(){}function Qs(e){return[e.clientX,e.clientY]}function go(e,t){const[n,r]=e;let o=!1;const i=t.length;for(let s=i,l=0,a=s-1;l<s;a=l++){const[c,u]=t[l],[f,h]=t[a],[,p]=t[a===0?s-1:a-1]||[0,0],d=(u-h)*(n-c)-(c-f)*(r-u);if(h<u){if(r>=h&&r<u){if(d===0)return!0;d>0&&(r===h?r>p&&(o=!o):o=!o)}}else if(u<h){if(r>u&&r<=h){if(d===0)return!0;d<0&&(r===h?r<p&&(o=!o):o=!o)}}else if(r==u&&(n>=f&&n<=c||n>=c&&n<=f))return!0}return o}function z(e,t){return Kt(e,t)}var lt=new Map,vr=new Set;function pr(){if(typeof window>"u")return;const e=n=>{if(!n.target)return;let r=lt.get(n.target);r||(r=new Set,lt.set(n.target,r),n.target.addEventListener("transitioncancel",t)),r.add(n.propertyName)},t=n=>{if(!n.target)return;const r=lt.get(n.target);if(r&&(r.delete(n.propertyName),r.size===0&&(n.target.removeEventListener("transitioncancel",t),lt.delete(n.target)),lt.size===0)){for(const o of vr)o();vr.clear()}};document.body.addEventListener("transitionrun",e),document.body.addEventListener("transitionend",t)}typeof document<"u"&&(document.readyState!=="loading"?pr():document.addEventListener("DOMContentLoaded",pr));function br(e,t){const n=yr(e,t,"left"),r=yr(e,t,"top"),o=t.offsetWidth,i=t.offsetHeight;let s=e.scrollLeft,l=e.scrollTop;const a=s+e.offsetWidth,c=l+e.offsetHeight;n<=s?s=n:n+o>a&&(s+=n+o-a),r<=l?l=r:r+i>c&&(l+=r+i-c),e.scrollLeft=s,e.scrollTop=l}function yr(e,t,n){const r=n==="left"?"offsetLeft":"offsetTop";let o=0;for(;t.offsetParent&&(o+=t[r],t.offsetParent!==e);){if(t.offsetParent.contains(e)){o-=e[r];break}t=t.offsetParent}return o}var ea={border:"0",clip:"rect(0 0 0 0)","clip-path":"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:"0",position:"absolute",width:"1px","white-space":"nowrap"};function Sn(e){let t=e.startIndex??0;const n=e.startLevel??0,r=[],o=a=>{if(a==null)return"";const c=e.getKey??"key",u=ze(c)?a[c]:c(a);return u!=null?String(u):""},i=a=>{if(a==null)return"";const c=e.getTextValue??"textValue",u=ze(c)?a[c]:c(a);return u!=null?String(u):""},s=a=>{if(a==null)return!1;const c=e.getDisabled??"disabled";return(ze(c)?a[c]:c(a))??!1},l=a=>{if(a!=null)return ze(e.getSectionChildren)?a[e.getSectionChildren]:e.getSectionChildren?.(a)};for(const a of e.dataSource){if(ze(a)||_s(a)){r.push({type:"item",rawValue:a,key:String(a),textValue:String(a),disabled:s(a),level:n,index:t}),t++;continue}if(l(a)!=null){r.push({type:"section",rawValue:a,key:"",textValue:"",disabled:!1,level:n,index:t}),t++;const c=l(a)??[];if(c.length>0){const u=Sn({dataSource:c,getKey:e.getKey,getTextValue:e.getTextValue,getDisabled:e.getDisabled,getSectionChildren:e.getSectionChildren,startIndex:t,startLevel:n+1});r.push(...u),t+=u.length}}else r.push({type:"item",rawValue:a,key:o(a),textValue:i(a),disabled:s(a),level:n,index:t}),t++}return r}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/bfce84fee12a027d9cbc38b43e1747e3e4b4b169/packages/@react-stately/collections/src/useCollection.ts
 */function ta(e,t=[]){const n=Sn({dataSource:S(e.dataSource),getKey:S(e.getKey),getTextValue:S(e.getTextValue),getDisabled:S(e.getDisabled),getSectionChildren:S(e.getSectionChildren)}),[r,o]=I(e.factory(n));return A(me([()=>S(e.dataSource),()=>S(e.getKey),()=>S(e.getTextValue),()=>S(e.getDisabled),()=>S(e.getSectionChildren),()=>e.factory,...t],([i,s,l,a,c,u])=>{const f=Sn({dataSource:i,getKey:s,getTextValue:l,getDisabled:a,getSectionChildren:c});o(()=>u(f))},{defer:!0})),r}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/22cb32d329e66c60f55d4fc4025d1d44bb015d71/packages/@react-stately/collections/src/getItemCount.ts
 */const xr=new WeakMap;function na(e){let t=xr.get(e);if(t!=null)return t;t=0;for(const n of e)n.type==="item"&&t++;return xr.set(e,t),t}function $n(e){const[t,n]=I(e.defaultValue?.()),r=j(()=>e.value?.()!==void 0),o=j(()=>r()?e.value?.():t());return[o,s=>{eo(()=>{const l=Es(s,o());return Object.is(l,o())||(r()||n(l),e.onChange?.(l)),l})}]}function ra(e){const[t,n]=$n(e);return[()=>t()??!1,n]}function oa(e){const[t,n]=$n(e);return[()=>t()??[],n]}function xt(e={}){const[t,n]=ra({value:()=>S(e.open),defaultValue:()=>!!S(e.defaultOpen),onChange:s=>e.onOpenChange?.(s)}),r=()=>{n(!0)},o=()=>{n(!1)};return{isOpen:t,setIsOpen:n,open:r,close:o,toggle:()=>{t()?o():r()}}}function ia(e){const t=n=>{n.key===ao.Escape&&e.onEscapeKeyDown?.(n)};A(()=>{if(ie||S(e.isDisabled))return;const n=e.ownerDocument?.()??fe();n.addEventListener("keydown",t),k(()=>{n.removeEventListener("keydown",t)})})}/*!
 * Portions of this file are based on code from radix-ui-primitives.
 * MIT Licensed, Copyright (c) 2022 WorkOS.
 *
 * Credits to the Radix UI team:
 * https://github.com/radix-ui/primitives/blob/81b25f4b40c54f72aeb106ca0e64e1e09655153e/packages/react/dismissable-layer/src/DismissableLayer.tsx
 *
 * Portions of this file are based on code from zag.
 * MIT Licensed, Copyright (c) 2021 Chakra UI.
 *
 * Credits to the Chakra UI team:
 * https://github.com/chakra-ui/zag/blob/d1dbf9e240803c9e3ed81ebef363739be4273de0/packages/utilities/dismissable/src/layer-stack.ts
 */const Rt="data-kb-top-layer";let mo,En=!1;const Oe=[];function gt(e){return Oe.findIndex(t=>t.node===e)}function sa(e){return Oe[gt(e)]}function aa(e){return Oe[Oe.length-1].node===e}function vo(){return Oe.filter(e=>e.isPointerBlocking)}function la(){return[...vo()].slice(-1)[0]}function Vn(){return vo().length>0}function po(e){const t=gt(la()?.node);return gt(e)<t}function ca(e){Oe.push(e)}function ua(e){const t=gt(e);t<0||Oe.splice(t,1)}function da(){Oe.forEach(({node:e})=>{e.style.pointerEvents=po(e)?"none":"auto"})}function fa(e){if(Vn()&&!En){const t=fe(e);mo=document.body.style.pointerEvents,t.body.style.pointerEvents="none",En=!0}}function ha(e){if(Vn())return;const t=fe(e);t.body.style.pointerEvents=mo,t.body.style.length===0&&t.body.removeAttribute("style"),En=!1}const Ot={layers:Oe,isTopMostLayer:aa,hasPointerBlockingLayer:Vn,isBelowPointerBlockingLayer:po,addLayer:ca,removeLayer:ua,indexOf:gt,find:sa,assignPointerEventToLayers:da,disableBodyPointerEvents:fa,restoreBodyPointerEvents:ha};/*!
 * Portions of this file are based on code from radix-ui-primitives.
 * MIT Licensed, Copyright (c) 2022 WorkOS.
 *
 * Credits to the Radix UI team:
 * https://github.com/radix-ui/primitives/blob/81b25f4b40c54f72aeb106ca0e64e1e09655153e/packages/react/focus-scope/src/FocusScope.tsx
 *
 * Portions of this file are based on code from zag.
 * MIT Licensed, Copyright (c) 2021 Chakra UI.
 *
 * Credits to the Chakra UI team:
 * https://github.com/chakra-ui/zag/blob/d1dbf9e240803c9e3ed81ebef363739be4273de0/packages/utilities/focus-scope/src/focus-on-child-unmount.ts
 * https://github.com/chakra-ui/zag/blob/d1dbf9e240803c9e3ed81ebef363739be4273de0/packages/utilities/focus-scope/src/focus-containment.ts
 */const un="focusScope.autoFocusOnMount",dn="focusScope.autoFocusOnUnmount",wr={bubbles:!1,cancelable:!0},Sr={stack:[],active(){return this.stack[0]},add(e){e!==this.active()&&this.active()?.pause(),this.stack=wn(this.stack,e),this.stack.unshift(e)},remove(e){this.stack=wn(this.stack,e),this.active()?.resume()}};function Gn(e,t){const[n,r]=I(!1),o={pause(){r(!0)},resume(){r(!1)}};let i=null;const s=d=>e.onMountAutoFocus?.(d),l=d=>e.onUnmountAutoFocus?.(d),a=()=>fe(t()),c=()=>{const d=a().createElement("span");return d.setAttribute("data-focus-trap",""),d.tabIndex=0,Object.assign(d.style,ea),d},u=()=>{const d=t();return d?fo(d,!0).filter(x=>!x.hasAttribute("data-focus-trap")):[]},f=()=>{const d=u();return d.length>0?d[0]:null},h=()=>{const d=u();return d.length>0?d[d.length-1]:null},p=()=>{const d=t();if(!d)return!1;const x=dt(d);return!x||ye(d,x)?!1:ho(x)};A(()=>{if(ie)return;const d=t();if(!d)return;Sr.add(o);const x=dt(d);if(!ye(d,x)){const b=new CustomEvent(un,wr);d.addEventListener(un,s),d.dispatchEvent(b),b.defaultPrevented||setTimeout(()=>{se(f()),dt(d)===x&&se(d)},0)}k(()=>{d.removeEventListener(un,s),setTimeout(()=>{const b=new CustomEvent(dn,wr);p()&&b.preventDefault(),d.addEventListener(dn,l),d.dispatchEvent(b),b.defaultPrevented||se(x??a().body),d.removeEventListener(dn,l),Sr.remove(o)},0)})}),A(()=>{if(ie)return;const d=t();if(!d||!S(e.trapFocus)||n())return;const x=b=>{const m=b.target;m?.closest(`[${Rt}]`)||(ye(d,m)?i=m:se(i))},E=b=>{const v=b.relatedTarget??dt(d);v?.closest(`[${Rt}]`)||ye(d,v)||se(i)};a().addEventListener("focusin",x),a().addEventListener("focusout",E),k(()=>{a().removeEventListener("focusin",x),a().removeEventListener("focusout",E)})}),A(()=>{if(ie)return;const d=t();if(!d||!S(e.trapFocus)||n())return;const x=c();d.insertAdjacentElement("afterbegin",x);const E=c();d.insertAdjacentElement("beforeend",E);function b(v){const T=f(),w=h();v.relatedTarget===T?se(w):se(T)}x.addEventListener("focusin",b),E.addEventListener("focusin",b);const m=new MutationObserver(v=>{for(const T of v)T.previousSibling===E&&(E.remove(),d.insertAdjacentElement("beforeend",E)),T.nextSibling===x&&(x.remove(),d.insertAdjacentElement("afterbegin",x))});m.observe(d,{childList:!0,subtree:!1}),k(()=>{x.removeEventListener("focusin",b),E.removeEventListener("focusin",b),x.remove(),E.remove(),m.disconnect()})})}/*!
 * Portions of this file are based on code from zag.
 * MIT Licensed, Copyright (c) 2021 Chakra UI.
 *
 * Credits to the zag team:
 * https://github.com/chakra-ui/zag/blob/c1e6c7689b22bf58741ded7cf224dd9baec2a046/packages/utilities/form-utils/src/form.ts
 */function ga(e,t){A(me(e,n=>{if(n==null)return;const r=ma(n);r!=null&&(r.addEventListener("reset",t,{passive:!0}),k(()=>{r.removeEventListener("reset",t)}))}))}function ma(e){return va(e)?e.form:e.closest("form")}function va(e){return e.matches("textarea, input, select, button")}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/15e101b74966bd5eb719c6529ce71ce57eaed430/packages/@react-aria/live-announcer/src/LiveAnnouncer.tsx
 */const pa="data-live-announcer";/*!
 * This file is based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/810579b671791f1593108f62cdc1893de3a220e3/packages/@react-aria/overlays/src/ariaHideOutside.ts
 */function jn(e){A(()=>{S(e.isDisabled)||k(ba(S(e.targets),S(e.root)))})}const ct=new WeakMap,pe=[];function ba(e,t=document.body){const n=new Set(e),r=new Set,o=a=>{for(const h of a.querySelectorAll(`[${pa}], [${Rt}]`))n.add(h);const c=h=>{if(n.has(h)||h.parentElement&&r.has(h.parentElement)&&h.parentElement.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(const p of n)if(h.contains(p))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},u=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:c}),f=c(a);if(f===NodeFilter.FILTER_ACCEPT&&i(a),f!==NodeFilter.FILTER_REJECT){let h=u.nextNode();for(;h!=null;)i(h),h=u.nextNode()}},i=a=>{const c=ct.get(a)??0;a.getAttribute("aria-hidden")==="true"&&c===0||(c===0&&a.setAttribute("aria-hidden","true"),r.add(a),ct.set(a,c+1))};pe.length&&pe[pe.length-1].disconnect(),o(t);const s=new MutationObserver(a=>{for(const c of a)if(!(c.type!=="childList"||c.addedNodes.length===0)&&![...n,...r].some(u=>u.contains(c.target))){for(const u of c.removedNodes)u instanceof Element&&(n.delete(u),r.delete(u));for(const u of c.addedNodes)(u instanceof HTMLElement||u instanceof SVGElement)&&(u.dataset.liveAnnouncer==="true"||u.dataset.reactAriaTopLayer==="true")?n.add(u):u instanceof Element&&o(u)}});s.observe(t,{childList:!0,subtree:!0});const l={observe(){s.observe(t,{childList:!0,subtree:!0})},disconnect(){s.disconnect()}};return pe.push(l),()=>{s.disconnect();for(const a of r){const c=ct.get(a);if(c==null)return;c===1?(a.removeAttribute("aria-hidden"),ct.delete(a)):ct.set(a,c-1)}l===pe[pe.length-1]?(pe.pop(),pe.length&&pe[pe.length-1].observe()):pe.splice(pe.indexOf(l),1)}}/*!
 * Portions of this file are based on code from radix-ui-primitives.
 * MIT Licensed, Copyright (c) 2022 WorkOS.
 *
 * Credits to the Radix UI team:
 * https://github.com/radix-ui/primitives/blob/81b25f4b40c54f72aeb106ca0e64e1e09655153e/packages/react/dismissable-layer/src/DismissableLayer.tsx
 *
 * Portions of this file are based on code from zag.
 * MIT Licensed, Copyright (c) 2021 Chakra UI.
 *
 * Credits to the Chakra UI team:
 * https://github.com/chakra-ui/zag/blob/d1dbf9e240803c9e3ed81ebef363739be4273de0/packages/utilities/interact-outside/src/index.ts
 */const Er="interactOutside.pointerDownOutside",Tr="interactOutside.focusOutside";function ya(e,t){let n,r=Js;const o=()=>fe(t()),i=f=>e.onPointerDownOutside?.(f),s=f=>e.onFocusOutside?.(f),l=f=>e.onInteractOutside?.(f),a=f=>{const h=f.target;return!(h instanceof HTMLElement)||h.closest(`[${Rt}]`)||!ye(o(),h)||ye(t(),h)?!1:!e.shouldExcludeElement?.(h)},c=f=>{function h(){const p=t(),d=f.target;if(!p||!d||!a(f))return;const x=ee([i,l]);d.addEventListener(Er,x,{once:!0});const E=new CustomEvent(Er,{bubbles:!1,cancelable:!0,detail:{originalEvent:f,isContextMenu:f.button===2||Us(f)&&f.button===0}});d.dispatchEvent(E)}f.pointerType==="touch"?(o().removeEventListener("click",h),r=h,o().addEventListener("click",h,{once:!0})):h()},u=f=>{const h=t(),p=f.target;if(!h||!p||!a(f))return;const d=ee([s,l]);p.addEventListener(Tr,d,{once:!0});const x=new CustomEvent(Tr,{bubbles:!1,cancelable:!0,detail:{originalEvent:f,isContextMenu:!1}});p.dispatchEvent(x)};A(()=>{ie||S(e.isDisabled)||(n=window.setTimeout(()=>{o().addEventListener("pointerdown",c,!0)},0),o().addEventListener("focusin",u,!0),k(()=>{window.clearTimeout(n),o().removeEventListener("click",r),o().removeEventListener("pointerdown",c,!0),o().removeEventListener("focusin",u,!0)}))})}/*!
 * Portions of this file are based on code from radix-ui-primitives.
 * MIT Licensed, Copyright (c) 2022 WorkOS.
 *
 * Credits to the Radix UI team:
 * https://github.com/radix-ui/primitives/blob/21a7c97dc8efa79fecca36428eec49f187294085/packages/react/presence/src/Presence.tsx
 * https://github.com/radix-ui/primitives/blob/21a7c97dc8efa79fecca36428eec49f187294085/packages/react/presence/src/useStateMachine.tsx
 */function Je(e){const[t,n]=I();let r={},o=e(),i="none";const[s,l]=xa(e()?"mounted":"unmounted",{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A(me(s,a=>{const c=At(r);i=a==="mounted"?c:"none"})),A(me(e,a=>{if(o===a)return;const c=At(r);a?l("MOUNT"):r?.display==="none"?l("UNMOUNT"):l(o&&i!==c?"ANIMATION_OUT":"UNMOUNT"),o=a})),A(me(t,a=>{if(a){const c=f=>{const p=At(r).includes(f.animationName);f.target===a&&p&&l("ANIMATION_END")},u=f=>{f.target===a&&(i=At(r))};a.addEventListener("animationstart",u),a.addEventListener("animationcancel",c),a.addEventListener("animationend",c),k(()=>{a.removeEventListener("animationstart",u),a.removeEventListener("animationcancel",c),a.removeEventListener("animationend",c)})}else l("ANIMATION_END")})),{isPresent:()=>["mounted","unmountSuspended"].includes(s()),setRef:a=>{a&&(r=getComputedStyle(a)),n(a)}}}function At(e){return e?.animationName||"none"}function xa(e,t){const n=(s,l)=>t[s][l]??s,[r,o]=I(e);return[r,s=>{o(l=>n(l,s))}]}/*!
 * Portions of this file are based on code from floating-ui.
 * MIT Licensed, Copyright (c) 2021 Floating UI contributors.
 *
 * Credits to the Floating UI contributors:
 * https://github.com/floating-ui/floating-ui/blob/f7ce9420aa32c150eb45049f12cf3b5506715341/packages/react/src/components/FloatingOverlay.tsx
 *
 * Portions of this file are based on code from ariakit.
 * MIT Licensed, Copyright (c) Diego Haz.
 *
 * Credits to the Ariakit team:
 * https://github.com/ariakit/ariakit/blob/5d8a1f047fcadcf117073c70359663a3946b73bf/packages/ariakit/src/dialog/__utils/use-prevent-body-scroll.ts
 */const fn="data-kb-scroll-lock";function Cr(e,t){if(!e)return()=>{};const n=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=n}}function wa(e,t,n){if(!e)return()=>{};const r=e.style.getPropertyValue(t);return e.style.setProperty(t,n),()=>{r?e.style.setProperty(t,r):e.style.removeProperty(t)}}function Sa(e){const t=e.getBoundingClientRect().left;return Math.round(t)+e.scrollLeft?"paddingLeft":"paddingRight"}function Wn(e){A(()=>{if(ie||!S(e.ownerRef)||S(e.isDisabled))return;const t=fe(S(e.ownerRef)),n=Hn(S(e.ownerRef)),{documentElement:r,body:o}=t;if(o.hasAttribute(fn))return;o.setAttribute(fn,"");const s=n.innerWidth-r.clientWidth,l=()=>wa(r,"--scrollbar-width",`${s}px`),a=Sa(r),c=()=>Cr(o,{overflow:"hidden",[a]:`${s}px`}),u=()=>{const{scrollX:h,scrollY:p,visualViewport:d}=n,x=d?.offsetLeft??0,E=d?.offsetTop??0,b=Cr(o,{position:"fixed",overflow:"hidden",top:`${-(p-Math.floor(E))}px`,left:`${-(h-Math.floor(x))}px`,right:"0",[a]:`${s}px`});return()=>{b(),n.scrollTo(h,p)}},f=io([l(),co()?u():c()]);k(()=>{f(),o.removeAttribute(fn)})})}function ne(e){return t=>(e(t),()=>e(void 0))}/*!
 * Portions of this file are based on code from ariakit.
 * MIT Licensed, Copyright (c) Diego Haz.
 *
 * Credits to the ariakit team:
 * https://github.com/ariakit/ariakit/blob/8a13899ff807bbf39f3d89d2d5964042ba4d5287/packages/ariakit-react-utils/src/hooks.ts
 */function bo(e,t){const[n,r]=I(Pr(t?.()));return A(()=>{r(e()?.tagName.toLowerCase()||Pr(t?.()))}),n}function Pr(e){return ze(e)?e:void 0}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/70e7caf1946c423bc9aa9cb0e50dbdbe953d239b/packages/@react-aria/label/src/useField.ts
 */const Ea=["id","name","validationState","required","disabled","readOnly"];function Ta(e){const t=`form-control-${we()}`;e=z({id:t},e);const[n,r]=I(),[o,i]=I(),[s,l]=I(),[a,c]=I(),u=(d,x,E)=>{const b=E!=null||n()!=null;return[E,n(),b&&x!=null?d:void 0].filter(Boolean).join(" ")||void 0},f=d=>[s(),a(),d].filter(Boolean).join(" ")||void 0,h=j(()=>({"data-valid":S(e.validationState)==="valid"?"":void 0,"data-invalid":S(e.validationState)==="invalid"?"":void 0,"data-required":S(e.required)?"":void 0,"data-disabled":S(e.disabled)?"":void 0,"data-readonly":S(e.readOnly)?"":void 0}));return{formControlContext:{name:()=>S(e.name)??S(e.id),dataset:h,validationState:()=>S(e.validationState),isRequired:()=>S(e.required),isDisabled:()=>S(e.disabled),isReadOnly:()=>S(e.readOnly),labelId:n,fieldId:o,descriptionId:s,errorMessageId:a,getAriaLabelledBy:u,getAriaDescribedBy:f,generateId:Ce(()=>S(e.id)),registerLabel:ne(r),registerField:ne(i),registerDescription:ne(l),registerErrorMessage:ne(c)}}}const yo=re();function $t(){const e=oe(yo);if(e===void 0)throw new Error("[kobalte]: `useFormControlContext` must be used within a `FormControlContext.Provider` component");return e}const Ca=["id","aria-label","aria-labelledby","aria-describedby"];function Pa(e){const t=$t();return e=z({id:t.generateId("field")},e),A(()=>k(t.registerField(S(e.id)))),{fieldProps:{id:()=>S(e.id),ariaLabel:()=>S(e["aria-label"]),ariaLabelledBy:()=>t.getAriaLabelledBy(S(e.id),S(e["aria-label"]),S(e["aria-labelledby"])),ariaDescribedBy:()=>t.getAriaDescribedBy(S(e["aria-describedby"]))}}}function te(e){const[t,n]=K(e,["asChild","as","children"]);if(!t.asChild)return g(tn,F({get component(){return t.as}},n,{get children(){return t.children}}));const r=to(()=>t.children);if(Ir(r())){const o=Or(n,r()?.props??{});return g(tn,o)}if(Rs(r())){const o=r().find(Ir);if(o){const i=()=>g(Bi,{get each(){return r()},children:l=>g(W,{when:l===o,fallback:l,get children(){return o.props.children}})}),s=Or(n,o?.props??{});return g(tn,F(s,{children:i}))}}throw new Error("[kobalte]: Component is expected to render `asChild` but no children `As` component was found.")}const Ia=Symbol("$$KobalteAsComponent");function Ir(e){return e?.[Ia]===!0}function Or(e,t){return Ms([e,t],{reverseEventHandlers:!0})}function Oa(e){let t;const n=$t();e=z({id:n.generateId("label")},e);const[r,o]=K(e,["ref"]),i=bo(()=>t,()=>"label");return A(()=>k(n.registerLabel(o.id))),g(te,F({as:"label",get for(){return i()==="label"?n.fieldId():void 0}},()=>n.dataset(),o))}const Aa={"ar-AE":{dismiss:"تجاهل"},"bg-BG":{dismiss:"Отхвърляне"},"cs-CZ":{dismiss:"Odstranit"},"da-DK":{dismiss:"Luk"},"de-DE":{dismiss:"Schließen"},"el-GR":{dismiss:"Απόρριψη"},"en-US":{dismiss:"Dismiss"},"es-ES":{dismiss:"Descartar"},"et-EE":{dismiss:"Lõpeta"},"fi-FI":{dismiss:"Hylkää"},"fr-FR":{dismiss:"Rejeter"},"he-IL":{dismiss:"התעלם"},"hr-HR":{dismiss:"Odbaci"},"hu-HU":{dismiss:"Elutasítás"},"it-IT":{dismiss:"Ignora"},"ja-JP":{dismiss:"閉じる"},"ko-KR":{dismiss:"무시"},"lt-LT":{dismiss:"Atmesti"},"lv-LV":{dismiss:"Nerādīt"},"nb-NO":{dismiss:"Lukk"},"nl-NL":{dismiss:"Negeren"},"pl-PL":{dismiss:"Zignoruj"},"pt-BR":{dismiss:"Descartar"},"pt-PT":{dismiss:"Dispensar"},"ro-RO":{dismiss:"Revocare"},"ru-RU":{dismiss:"Пропустить"},"sk-SK":{dismiss:"Zrušiť"},"sl-SI":{dismiss:"Opusti"},"sr-SP":{dismiss:"Odbaci"},"sv-SE":{dismiss:"Avvisa"},"tr-TR":{dismiss:"Kapat"},"uk-UA":{dismiss:"Скасувати"},"zh-CN":{dismiss:"取消"},"zh-TW":{dismiss:"關閉"}};/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/b35d5c02fe900badccd0cf1a8f23bb593419f238/packages/@react-aria/i18n/src/utils.ts
 */const Da=new Set(["Avst","Arab","Armi","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),La=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]);function Ma(e){if(Intl.Locale){const n=new Intl.Locale(e).maximize().script??"";return Da.has(n)}const t=e.split("-")[0];return La.has(t)}function Fa(e){return Ma(e)?"rtl":"ltr"}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/b35d5c02fe900badccd0cf1a8f23bb593419f238/packages/@react-aria/i18n/src/useDefaultLocale.ts
 */function xo(){let e=typeof navigator<"u"&&(navigator.language||navigator.userLanguage)||"en-US";try{Intl.DateTimeFormat.supportedLocalesOf([e])}catch{e="en-US"}return{locale:e,direction:Fa(e)}}let Tn=xo();const ft=new Set;function Ar(){Tn=xo();for(const e of ft)e(Tn)}function _a(){const e={locale:"en-US",direction:"ltr"},[t,n]=I(Tn),r=j(()=>ie?e:t());return pt(()=>{ft.size===0&&window.addEventListener("languagechange",Ar),ft.add(n),k(()=>{ft.delete(n),ft.size===0&&window.removeEventListener("languagechange",Ar)})}),{locale:()=>r().locale,direction:()=>r().direction}}const Ra=re();function Vt(){const e=_a();return oe(Ra)||e}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/b35d5c02fe900badccd0cf1a8f23bb593419f238/packages/@react-aria/i18n/src/useCollator.ts
 */const hn=new Map;function wo(e){const{locale:t}=Vt(),n=j(()=>t()+(e?Object.entries(e).sort((r,o)=>r[0]<o[0]?-1:1).join():""));return j(()=>{const r=n();let o;return hn.has(r)&&(o=hn.get(r)),o||(o=new Intl.Collator(t(),e),hn.set(r,o)),o})}var Cn=function(e,t){return Cn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},Cn(e,t)};function Gt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Cn(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var X=function(){return X=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},X.apply(this,arguments)};function Na(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function gn(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var $;(function(e){e[e.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",e[e.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",e[e.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",e[e.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",e[e.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",e[e.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",e[e.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",e[e.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",e[e.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",e[e.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",e[e.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",e[e.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",e[e.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",e[e.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",e[e.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",e[e.INVALID_TAG=23]="INVALID_TAG",e[e.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",e[e.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",e[e.UNCLOSED_TAG=27]="UNCLOSED_TAG"})($||($={}));var Q;(function(e){e[e.literal=0]="literal",e[e.argument=1]="argument",e[e.number=2]="number",e[e.date=3]="date",e[e.time=4]="time",e[e.select=5]="select",e[e.plural=6]="plural",e[e.pound=7]="pound",e[e.tag=8]="tag"})(Q||(Q={}));var Qe;(function(e){e[e.number=0]="number",e[e.dateTime=1]="dateTime"})(Qe||(Qe={}));function Dr(e){return e.type===Q.literal}function Ba(e){return e.type===Q.argument}function So(e){return e.type===Q.number}function Eo(e){return e.type===Q.date}function To(e){return e.type===Q.time}function Co(e){return e.type===Q.select}function Po(e){return e.type===Q.plural}function Ha(e){return e.type===Q.pound}function Io(e){return e.type===Q.tag}function Oo(e){return!!(e&&typeof e=="object"&&e.type===Qe.number)}function Pn(e){return!!(e&&typeof e=="object"&&e.type===Qe.dateTime)}var Ao=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,ka=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function Ka(e){var t={};return e.replace(ka,function(n){var r=n.length;switch(n[0]){case"G":t.era=r===4?"long":r===5?"narrow":"short";break;case"y":t.year=r===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":t.month=["numeric","2-digit","short","long","narrow"][r-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":t.day=["numeric","2-digit"][r-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":t.weekday=r===4?"long":r===5?"narrow":"short";break;case"e":if(r<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][r-4];break;case"c":if(r<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][r-4];break;case"a":t.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":t.hourCycle="h12",t.hour=["numeric","2-digit"][r-1];break;case"H":t.hourCycle="h23",t.hour=["numeric","2-digit"][r-1];break;case"K":t.hourCycle="h11",t.hour=["numeric","2-digit"][r-1];break;case"k":t.hourCycle="h24",t.hour=["numeric","2-digit"][r-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":t.minute=["numeric","2-digit"][r-1];break;case"s":t.second=["numeric","2-digit"][r-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":t.timeZoneName=r<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),t}var Ua=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function $a(e){if(e.length===0)throw new Error("Number skeleton cannot be empty");for(var t=e.split(Ua).filter(function(h){return h.length>0}),n=[],r=0,o=t;r<o.length;r++){var i=o[r],s=i.split("/");if(s.length===0)throw new Error("Invalid number skeleton");for(var l=s[0],a=s.slice(1),c=0,u=a;c<u.length;c++){var f=u[c];if(f.length===0)throw new Error("Invalid number skeleton")}n.push({stem:l,options:a})}return n}function Va(e){return e.replace(/^(.*?)-/,"")}var Lr=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,Do=/^(@+)?(\+|#+)?[rs]?$/g,Ga=/(\*)(0+)|(#+)(0+)|(0+)/g,Lo=/^(0+)$/;function Mr(e){var t={};return e[e.length-1]==="r"?t.roundingPriority="morePrecision":e[e.length-1]==="s"&&(t.roundingPriority="lessPrecision"),e.replace(Do,function(n,r,o){return typeof o!="string"?(t.minimumSignificantDigits=r.length,t.maximumSignificantDigits=r.length):o==="+"?t.minimumSignificantDigits=r.length:r[0]==="#"?t.maximumSignificantDigits=r.length:(t.minimumSignificantDigits=r.length,t.maximumSignificantDigits=r.length+(typeof o=="string"?o.length:0)),""}),t}function Mo(e){switch(e){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function ja(e){var t;if(e[0]==="E"&&e[1]==="E"?(t={notation:"engineering"},e=e.slice(2)):e[0]==="E"&&(t={notation:"scientific"},e=e.slice(1)),t){var n=e.slice(0,2);if(n==="+!"?(t.signDisplay="always",e=e.slice(2)):n==="+?"&&(t.signDisplay="exceptZero",e=e.slice(2)),!Lo.test(e))throw new Error("Malformed concise eng/scientific notation");t.minimumIntegerDigits=e.length}return t}function Fr(e){var t={},n=Mo(e);return n||t}function Wa(e){for(var t={},n=0,r=e;n<r.length;n++){var o=r[n];switch(o.stem){case"percent":case"%":t.style="percent";continue;case"%x100":t.style="percent",t.scale=100;continue;case"currency":t.style="currency",t.currency=o.options[0];continue;case"group-off":case",_":t.useGrouping=!1;continue;case"precision-integer":case".":t.maximumFractionDigits=0;continue;case"measure-unit":case"unit":t.style="unit",t.unit=Va(o.options[0]);continue;case"compact-short":case"K":t.notation="compact",t.compactDisplay="short";continue;case"compact-long":case"KK":t.notation="compact",t.compactDisplay="long";continue;case"scientific":t=X(X(X({},t),{notation:"scientific"}),o.options.reduce(function(a,c){return X(X({},a),Fr(c))},{}));continue;case"engineering":t=X(X(X({},t),{notation:"engineering"}),o.options.reduce(function(a,c){return X(X({},a),Fr(c))},{}));continue;case"notation-simple":t.notation="standard";continue;case"unit-width-narrow":t.currencyDisplay="narrowSymbol",t.unitDisplay="narrow";continue;case"unit-width-short":t.currencyDisplay="code",t.unitDisplay="short";continue;case"unit-width-full-name":t.currencyDisplay="name",t.unitDisplay="long";continue;case"unit-width-iso-code":t.currencyDisplay="symbol";continue;case"scale":t.scale=parseFloat(o.options[0]);continue;case"rounding-mode-floor":t.roundingMode="floor";continue;case"rounding-mode-ceiling":t.roundingMode="ceil";continue;case"rounding-mode-down":t.roundingMode="trunc";continue;case"rounding-mode-up":t.roundingMode="expand";continue;case"rounding-mode-half-even":t.roundingMode="halfEven";continue;case"rounding-mode-half-down":t.roundingMode="halfTrunc";continue;case"rounding-mode-half-up":t.roundingMode="halfExpand";continue;case"integer-width":if(o.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");o.options[0].replace(Ga,function(a,c,u,f,h,p){if(c)t.minimumIntegerDigits=u.length;else{if(f&&h)throw new Error("We currently do not support maximum integer digits");if(p)throw new Error("We currently do not support exact integer digits")}return""});continue}if(Lo.test(o.stem)){t.minimumIntegerDigits=o.stem.length;continue}if(Lr.test(o.stem)){if(o.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");o.stem.replace(Lr,function(a,c,u,f,h,p){return u==="*"?t.minimumFractionDigits=c.length:f&&f[0]==="#"?t.maximumFractionDigits=f.length:h&&p?(t.minimumFractionDigits=h.length,t.maximumFractionDigits=h.length+p.length):(t.minimumFractionDigits=c.length,t.maximumFractionDigits=c.length),""});var i=o.options[0];i==="w"?t=X(X({},t),{trailingZeroDisplay:"stripIfInteger"}):i&&(t=X(X({},t),Mr(i)));continue}if(Do.test(o.stem)){t=X(X({},t),Mr(o.stem));continue}var s=Mo(o.stem);s&&(t=X(X({},t),s));var l=ja(o.stem);l&&(t=X(X({},t),l))}return t}var Dt={"001":["H","h"],AC:["H","h","hb","hB"],AD:["H","hB"],AE:["h","hB","hb","H"],AF:["H","hb","hB","h"],AG:["h","hb","H","hB"],AI:["H","h","hb","hB"],AL:["h","H","hB"],AM:["H","hB"],AO:["H","hB"],AR:["H","h","hB","hb"],AS:["h","H"],AT:["H","hB"],AU:["h","hb","H","hB"],AW:["H","hB"],AX:["H"],AZ:["H","hB","h"],BA:["H","hB","h"],BB:["h","hb","H","hB"],BD:["h","hB","H"],BE:["H","hB"],BF:["H","hB"],BG:["H","hB","h"],BH:["h","hB","hb","H"],BI:["H","h"],BJ:["H","hB"],BL:["H","hB"],BM:["h","hb","H","hB"],BN:["hb","hB","h","H"],BO:["H","hB","h","hb"],BQ:["H"],BR:["H","hB"],BS:["h","hb","H","hB"],BT:["h","H"],BW:["H","h","hb","hB"],BY:["H","h"],BZ:["H","h","hb","hB"],CA:["h","hb","H","hB"],CC:["H","h","hb","hB"],CD:["hB","H"],CF:["H","h","hB"],CG:["H","hB"],CH:["H","hB","h"],CI:["H","hB"],CK:["H","h","hb","hB"],CL:["H","h","hB","hb"],CM:["H","h","hB"],CN:["H","hB","hb","h"],CO:["h","H","hB","hb"],CP:["H"],CR:["H","h","hB","hb"],CU:["H","h","hB","hb"],CV:["H","hB"],CW:["H","hB"],CX:["H","h","hb","hB"],CY:["h","H","hb","hB"],CZ:["H"],DE:["H","hB"],DG:["H","h","hb","hB"],DJ:["h","H"],DK:["H"],DM:["h","hb","H","hB"],DO:["h","H","hB","hb"],DZ:["h","hB","hb","H"],EA:["H","h","hB","hb"],EC:["H","hB","h","hb"],EE:["H","hB"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],ER:["h","H"],ES:["H","hB","h","hb"],ET:["hB","hb","h","H"],FI:["H"],FJ:["h","hb","H","hB"],FK:["H","h","hb","hB"],FM:["h","hb","H","hB"],FO:["H","h"],FR:["H","hB"],GA:["H","hB"],GB:["H","h","hb","hB"],GD:["h","hb","H","hB"],GE:["H","hB","h"],GF:["H","hB"],GG:["H","h","hb","hB"],GH:["h","H"],GI:["H","h","hb","hB"],GL:["H","h"],GM:["h","hb","H","hB"],GN:["H","hB"],GP:["H","hB"],GQ:["H","hB","h","hb"],GR:["h","H","hb","hB"],GT:["H","h","hB","hb"],GU:["h","hb","H","hB"],GW:["H","hB"],GY:["h","hb","H","hB"],HK:["h","hB","hb","H"],HN:["H","h","hB","hb"],HR:["H","hB"],HU:["H","h"],IC:["H","h","hB","hb"],ID:["H"],IE:["H","h","hb","hB"],IL:["H","hB"],IM:["H","h","hb","hB"],IN:["h","H"],IO:["H","h","hb","hB"],IQ:["h","hB","hb","H"],IR:["hB","H"],IS:["H"],IT:["H","hB"],JE:["H","h","hb","hB"],JM:["h","hb","H","hB"],JO:["h","hB","hb","H"],JP:["H","K","h"],KE:["hB","hb","H","h"],KG:["H","h","hB","hb"],KH:["hB","h","H","hb"],KI:["h","hb","H","hB"],KM:["H","h","hB","hb"],KN:["h","hb","H","hB"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],KW:["h","hB","hb","H"],KY:["h","hb","H","hB"],KZ:["H","hB"],LA:["H","hb","hB","h"],LB:["h","hB","hb","H"],LC:["h","hb","H","hB"],LI:["H","hB","h"],LK:["H","h","hB","hb"],LR:["h","hb","H","hB"],LS:["h","H"],LT:["H","h","hb","hB"],LU:["H","h","hB"],LV:["H","hB","hb","h"],LY:["h","hB","hb","H"],MA:["H","h","hB","hb"],MC:["H","hB"],MD:["H","hB"],ME:["H","hB","h"],MF:["H","hB"],MG:["H","h"],MH:["h","hb","H","hB"],MK:["H","h","hb","hB"],ML:["H"],MM:["hB","hb","H","h"],MN:["H","h","hb","hB"],MO:["h","hB","hb","H"],MP:["h","hb","H","hB"],MQ:["H","hB"],MR:["h","hB","hb","H"],MS:["H","h","hb","hB"],MT:["H","h"],MU:["H","h"],MV:["H","h"],MW:["h","hb","H","hB"],MX:["H","h","hB","hb"],MY:["hb","hB","h","H"],MZ:["H","hB"],NA:["h","H","hB","hb"],NC:["H","hB"],NE:["H"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NI:["H","h","hB","hb"],NL:["H","hB"],NO:["H","h"],NP:["H","h","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],NZ:["h","hb","H","hB"],OM:["h","hB","hb","H"],PA:["h","H","hB","hb"],PE:["H","hB","h","hb"],PF:["H","h","hB"],PG:["h","H"],PH:["h","hB","hb","H"],PK:["h","hB","H"],PL:["H","h"],PM:["H","hB"],PN:["H","h","hb","hB"],PR:["h","H","hB","hb"],PS:["h","hB","hb","H"],PT:["H","hB"],PW:["h","H"],PY:["H","h","hB","hb"],QA:["h","hB","hb","H"],RE:["H","hB"],RO:["H","hB"],RS:["H","hB","h"],RU:["H"],RW:["H","h"],SA:["h","hB","hb","H"],SB:["h","hb","H","hB"],SC:["H","h","hB"],SD:["h","hB","hb","H"],SE:["H"],SG:["h","hb","H","hB"],SH:["H","h","hb","hB"],SI:["H","hB"],SJ:["H"],SK:["H"],SL:["h","hb","H","hB"],SM:["H","h","hB"],SN:["H","h","hB"],SO:["h","H"],SR:["H","hB"],SS:["h","hb","H","hB"],ST:["H","hB"],SV:["H","h","hB","hb"],SX:["H","h","hb","hB"],SY:["h","hB","hb","H"],SZ:["h","hb","H","hB"],TA:["H","h","hb","hB"],TC:["h","hb","H","hB"],TD:["h","H","hB"],TF:["H","h","hB"],TG:["H","hB"],TH:["H","h"],TJ:["H","h"],TL:["H","hB","hb","h"],TM:["H","h"],TN:["h","hB","hb","H"],TO:["h","H"],TR:["H","hB"],TT:["h","hb","H","hB"],TW:["hB","hb","h","H"],TZ:["hB","hb","H","h"],UA:["H","hB","h"],UG:["hB","hb","H","h"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],UY:["H","h","hB","hb"],UZ:["H","hB","h"],VA:["H","h","hB"],VC:["h","hb","H","hB"],VE:["h","H","hB","hb"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],VN:["H","h"],VU:["h","H"],WF:["H","hB"],WS:["h","H"],XK:["H","hB","h"],YE:["h","hB","hb","H"],YT:["H","hB"],ZA:["H","h","hb","hB"],ZM:["h","hb","H","hB"],ZW:["H","h"],"af-ZA":["H","h","hB","hb"],"ar-001":["h","hB","hb","H"],"ca-ES":["H","h","hB"],"en-001":["h","hb","H","hB"],"es-BO":["H","h","hB","hb"],"es-BR":["H","h","hB","hb"],"es-EC":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"es-PE":["H","h","hB","hb"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"gu-IN":["hB","hb","h","H"],"hi-IN":["hB","h","H"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],"ta-IN":["hB","h","hb","H"],"te-IN":["hB","h","H"],"zu-ZA":["H","hB","hb","h"]};function za(e,t){for(var n="",r=0;r<e.length;r++){var o=e.charAt(r);if(o==="j"){for(var i=0;r+1<e.length&&e.charAt(r+1)===o;)i++,r++;var s=1+(i&1),l=i<2?1:3+(i>>1),a="a",c=Xa(t);for((c=="H"||c=="k")&&(l=0);l-- >0;)n+=a;for(;s-- >0;)n=c+n}else o==="J"?n+="H":n+=o}return n}function Xa(e){var t=e.hourCycle;if(t===void 0&&e.hourCycles&&e.hourCycles.length&&(t=e.hourCycles[0]),t)switch(t){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var n=e.language,r;n!=="root"&&(r=e.maximize().region);var o=Dt[r||""]||Dt[n||""]||Dt["".concat(n,"-001")]||Dt["001"];return o[0]}var mn,Ya=new RegExp("^".concat(Ao.source,"*")),qa=new RegExp("".concat(Ao.source,"*$"));function V(e,t){return{start:e,end:t}}var Za=!!String.prototype.startsWith&&"_a".startsWith("a",1),Ja=!!String.fromCodePoint,Qa=!!Object.fromEntries,el=!!String.prototype.codePointAt,tl=!!String.prototype.trimStart,nl=!!String.prototype.trimEnd,rl=!!Number.isSafeInteger,ol=rl?Number.isSafeInteger:function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e&&Math.abs(e)<=9007199254740991},In=!0;try{var il=_o("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");In=((mn=il.exec("a"))===null||mn===void 0?void 0:mn[0])==="a"}catch{In=!1}var _r=Za?function(t,n,r){return t.startsWith(n,r)}:function(t,n,r){return t.slice(r,r+n.length)===n},On=Ja?String.fromCodePoint:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r="",o=t.length,i=0,s;o>i;){if(s=t[i++],s>1114111)throw RangeError(s+" is not a valid code point");r+=s<65536?String.fromCharCode(s):String.fromCharCode(((s-=65536)>>10)+55296,s%1024+56320)}return r},Rr=Qa?Object.fromEntries:function(t){for(var n={},r=0,o=t;r<o.length;r++){var i=o[r],s=i[0],l=i[1];n[s]=l}return n},Fo=el?function(t,n){return t.codePointAt(n)}:function(t,n){var r=t.length;if(!(n<0||n>=r)){var o=t.charCodeAt(n),i;return o<55296||o>56319||n+1===r||(i=t.charCodeAt(n+1))<56320||i>57343?o:(o-55296<<10)+(i-56320)+65536}},sl=tl?function(t){return t.trimStart()}:function(t){return t.replace(Ya,"")},al=nl?function(t){return t.trimEnd()}:function(t){return t.replace(qa,"")};function _o(e,t){return new RegExp(e,t)}var An;if(In){var Nr=_o("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");An=function(t,n){var r;Nr.lastIndex=n;var o=Nr.exec(t);return(r=o[1])!==null&&r!==void 0?r:""}}else An=function(t,n){for(var r=[];;){var o=Fo(t,n);if(o===void 0||Ro(o)||dl(o))break;r.push(o),n+=o>=65536?2:1}return On.apply(void 0,r)};var ll=function(){function e(t,n){n===void 0&&(n={}),this.message=t,this.position={offset:0,line:1,column:1},this.ignoreTag=!!n.ignoreTag,this.locale=n.locale,this.requiresOtherClause=!!n.requiresOtherClause,this.shouldParseSkeletons=!!n.shouldParseSkeletons}return e.prototype.parse=function(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},e.prototype.parseMessage=function(t,n,r){for(var o=[];!this.isEOF();){var i=this.char();if(i===123){var s=this.parseArgument(t,r);if(s.err)return s;o.push(s.val)}else{if(i===125&&t>0)break;if(i===35&&(n==="plural"||n==="selectordinal")){var l=this.clonePosition();this.bump(),o.push({type:Q.pound,location:V(l,this.clonePosition())})}else if(i===60&&!this.ignoreTag&&this.peek()===47){if(r)break;return this.error($.UNMATCHED_CLOSING_TAG,V(this.clonePosition(),this.clonePosition()))}else if(i===60&&!this.ignoreTag&&Dn(this.peek()||0)){var s=this.parseTag(t,n);if(s.err)return s;o.push(s.val)}else{var s=this.parseLiteral(t,n);if(s.err)return s;o.push(s.val)}}}return{val:o,err:null}},e.prototype.parseTag=function(t,n){var r=this.clonePosition();this.bump();var o=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:Q.literal,value:"<".concat(o,"/>"),location:V(r,this.clonePosition())},err:null};if(this.bumpIf(">")){var i=this.parseMessage(t+1,n,!0);if(i.err)return i;var s=i.val,l=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!Dn(this.char()))return this.error($.INVALID_TAG,V(l,this.clonePosition()));var a=this.clonePosition(),c=this.parseTagName();return o!==c?this.error($.UNMATCHED_CLOSING_TAG,V(a,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:Q.tag,value:o,children:s,location:V(r,this.clonePosition())},err:null}:this.error($.INVALID_TAG,V(l,this.clonePosition())))}else return this.error($.UNCLOSED_TAG,V(r,this.clonePosition()))}else return this.error($.INVALID_TAG,V(r,this.clonePosition()))},e.prototype.parseTagName=function(){var t=this.offset();for(this.bump();!this.isEOF()&&ul(this.char());)this.bump();return this.message.slice(t,this.offset())},e.prototype.parseLiteral=function(t,n){for(var r=this.clonePosition(),o="";;){var i=this.tryParseQuote(n);if(i){o+=i;continue}var s=this.tryParseUnquoted(t,n);if(s){o+=s;continue}var l=this.tryParseLeftAngleBracket();if(l){o+=l;continue}break}var a=V(r,this.clonePosition());return{val:{type:Q.literal,value:o,location:a},err:null}},e.prototype.tryParseLeftAngleBracket=function(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!cl(this.peek()||0))?(this.bump(),"<"):null},e.prototype.tryParseQuote=function(t){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(t==="plural"||t==="selectordinal")break;return null;default:return null}this.bump();var n=[this.char()];for(this.bump();!this.isEOF();){var r=this.char();if(r===39)if(this.peek()===39)n.push(39),this.bump();else{this.bump();break}else n.push(r);this.bump()}return On.apply(void 0,n)},e.prototype.tryParseUnquoted=function(t,n){if(this.isEOF())return null;var r=this.char();return r===60||r===123||r===35&&(n==="plural"||n==="selectordinal")||r===125&&t>0?null:(this.bump(),On(r))},e.prototype.parseArgument=function(t,n){var r=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error($.EXPECT_ARGUMENT_CLOSING_BRACE,V(r,this.clonePosition()));if(this.char()===125)return this.bump(),this.error($.EMPTY_ARGUMENT,V(r,this.clonePosition()));var o=this.parseIdentifierIfPossible().value;if(!o)return this.error($.MALFORMED_ARGUMENT,V(r,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error($.EXPECT_ARGUMENT_CLOSING_BRACE,V(r,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:Q.argument,value:o,location:V(r,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error($.EXPECT_ARGUMENT_CLOSING_BRACE,V(r,this.clonePosition())):this.parseArgumentOptions(t,n,o,r);default:return this.error($.MALFORMED_ARGUMENT,V(r,this.clonePosition()))}},e.prototype.parseIdentifierIfPossible=function(){var t=this.clonePosition(),n=this.offset(),r=An(this.message,n),o=n+r.length;this.bumpTo(o);var i=this.clonePosition(),s=V(t,i);return{value:r,location:s}},e.prototype.parseArgumentOptions=function(t,n,r,o){var i,s=this.clonePosition(),l=this.parseIdentifierIfPossible().value,a=this.clonePosition();switch(l){case"":return this.error($.EXPECT_ARGUMENT_TYPE,V(s,a));case"number":case"date":case"time":{this.bumpSpace();var c=null;if(this.bumpIf(",")){this.bumpSpace();var u=this.clonePosition(),f=this.parseSimpleArgStyleIfPossible();if(f.err)return f;var h=al(f.val);if(h.length===0)return this.error($.EXPECT_ARGUMENT_STYLE,V(this.clonePosition(),this.clonePosition()));var p=V(u,this.clonePosition());c={style:h,styleLocation:p}}var d=this.tryParseArgumentClose(o);if(d.err)return d;var x=V(o,this.clonePosition());if(c&&_r(c?.style,"::",0)){var E=sl(c.style.slice(2));if(l==="number"){var f=this.parseNumberSkeletonFromString(E,c.styleLocation);return f.err?f:{val:{type:Q.number,value:r,location:x,style:f.val},err:null}}else{if(E.length===0)return this.error($.EXPECT_DATE_TIME_SKELETON,x);var b=E;this.locale&&(b=za(E,this.locale));var h={type:Qe.dateTime,pattern:b,location:c.styleLocation,parsedOptions:this.shouldParseSkeletons?Ka(b):{}},m=l==="date"?Q.date:Q.time;return{val:{type:m,value:r,location:x,style:h},err:null}}}return{val:{type:l==="number"?Q.number:l==="date"?Q.date:Q.time,value:r,location:x,style:(i=c?.style)!==null&&i!==void 0?i:null},err:null}}case"plural":case"selectordinal":case"select":{var v=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error($.EXPECT_SELECT_ARGUMENT_OPTIONS,V(v,X({},v)));this.bumpSpace();var T=this.parseIdentifierIfPossible(),w=0;if(l!=="select"&&T.value==="offset"){if(!this.bumpIf(":"))return this.error($.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,V(this.clonePosition(),this.clonePosition()));this.bumpSpace();var f=this.tryParseDecimalInteger($.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,$.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(f.err)return f;this.bumpSpace(),T=this.parseIdentifierIfPossible(),w=f.val}var y=this.tryParsePluralOrSelectOptions(t,l,n,T);if(y.err)return y;var d=this.tryParseArgumentClose(o);if(d.err)return d;var P=V(o,this.clonePosition());return l==="select"?{val:{type:Q.select,value:r,options:Rr(y.val),location:P},err:null}:{val:{type:Q.plural,value:r,options:Rr(y.val),offset:w,pluralType:l==="plural"?"cardinal":"ordinal",location:P},err:null}}default:return this.error($.INVALID_ARGUMENT_TYPE,V(s,a))}},e.prototype.tryParseArgumentClose=function(t){return this.isEOF()||this.char()!==125?this.error($.EXPECT_ARGUMENT_CLOSING_BRACE,V(t,this.clonePosition())):(this.bump(),{val:!0,err:null})},e.prototype.parseSimpleArgStyleIfPossible=function(){for(var t=0,n=this.clonePosition();!this.isEOF();){var r=this.char();switch(r){case 39:{this.bump();var o=this.clonePosition();if(!this.bumpUntil("'"))return this.error($.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,V(o,this.clonePosition()));this.bump();break}case 123:{t+=1,this.bump();break}case 125:{if(t>0)t-=1;else return{val:this.message.slice(n.offset,this.offset()),err:null};break}default:this.bump();break}}return{val:this.message.slice(n.offset,this.offset()),err:null}},e.prototype.parseNumberSkeletonFromString=function(t,n){var r=[];try{r=$a(t)}catch{return this.error($.INVALID_NUMBER_SKELETON,n)}return{val:{type:Qe.number,tokens:r,location:n,parsedOptions:this.shouldParseSkeletons?Wa(r):{}},err:null}},e.prototype.tryParsePluralOrSelectOptions=function(t,n,r,o){for(var i,s=!1,l=[],a=new Set,c=o.value,u=o.location;;){if(c.length===0){var f=this.clonePosition();if(n!=="select"&&this.bumpIf("=")){var h=this.tryParseDecimalInteger($.EXPECT_PLURAL_ARGUMENT_SELECTOR,$.INVALID_PLURAL_ARGUMENT_SELECTOR);if(h.err)return h;u=V(f,this.clonePosition()),c=this.message.slice(f.offset,this.offset())}else break}if(a.has(c))return this.error(n==="select"?$.DUPLICATE_SELECT_ARGUMENT_SELECTOR:$.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,u);c==="other"&&(s=!0),this.bumpSpace();var p=this.clonePosition();if(!this.bumpIf("{"))return this.error(n==="select"?$.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:$.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,V(this.clonePosition(),this.clonePosition()));var d=this.parseMessage(t+1,n,r);if(d.err)return d;var x=this.tryParseArgumentClose(p);if(x.err)return x;l.push([c,{value:d.val,location:V(p,this.clonePosition())}]),a.add(c),this.bumpSpace(),i=this.parseIdentifierIfPossible(),c=i.value,u=i.location}return l.length===0?this.error(n==="select"?$.EXPECT_SELECT_ARGUMENT_SELECTOR:$.EXPECT_PLURAL_ARGUMENT_SELECTOR,V(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!s?this.error($.MISSING_OTHER_CLAUSE,V(this.clonePosition(),this.clonePosition())):{val:l,err:null}},e.prototype.tryParseDecimalInteger=function(t,n){var r=1,o=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(r=-1);for(var i=!1,s=0;!this.isEOF();){var l=this.char();if(l>=48&&l<=57)i=!0,s=s*10+(l-48),this.bump();else break}var a=V(o,this.clonePosition());return i?(s*=r,ol(s)?{val:s,err:null}:this.error(n,a)):this.error(t,a)},e.prototype.offset=function(){return this.position.offset},e.prototype.isEOF=function(){return this.offset()===this.message.length},e.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},e.prototype.char=function(){var t=this.position.offset;if(t>=this.message.length)throw Error("out of bound");var n=Fo(this.message,t);if(n===void 0)throw Error("Offset ".concat(t," is at invalid UTF-16 code unit boundary"));return n},e.prototype.error=function(t,n){return{val:null,err:{kind:t,message:this.message,location:n}}},e.prototype.bump=function(){if(!this.isEOF()){var t=this.char();t===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=t<65536?1:2)}},e.prototype.bumpIf=function(t){if(_r(this.message,t,this.offset())){for(var n=0;n<t.length;n++)this.bump();return!0}return!1},e.prototype.bumpUntil=function(t){var n=this.offset(),r=this.message.indexOf(t,n);return r>=0?(this.bumpTo(r),!0):(this.bumpTo(this.message.length),!1)},e.prototype.bumpTo=function(t){if(this.offset()>t)throw Error("targetOffset ".concat(t," must be greater than or equal to the current offset ").concat(this.offset()));for(t=Math.min(t,this.message.length);;){var n=this.offset();if(n===t)break;if(n>t)throw Error("targetOffset ".concat(t," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},e.prototype.bumpSpace=function(){for(;!this.isEOF()&&Ro(this.char());)this.bump()},e.prototype.peek=function(){if(this.isEOF())return null;var t=this.char(),n=this.offset(),r=this.message.charCodeAt(n+(t>=65536?2:1));return r??null},e}();function Dn(e){return e>=97&&e<=122||e>=65&&e<=90}function cl(e){return Dn(e)||e===47}function ul(e){return e===45||e===46||e>=48&&e<=57||e===95||e>=97&&e<=122||e>=65&&e<=90||e==183||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8255&&e<=8256||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}function Ro(e){return e>=9&&e<=13||e===32||e===133||e>=8206&&e<=8207||e===8232||e===8233}function dl(e){return e>=33&&e<=35||e===36||e>=37&&e<=39||e===40||e===41||e===42||e===43||e===44||e===45||e>=46&&e<=47||e>=58&&e<=59||e>=60&&e<=62||e>=63&&e<=64||e===91||e===92||e===93||e===94||e===96||e===123||e===124||e===125||e===126||e===161||e>=162&&e<=165||e===166||e===167||e===169||e===171||e===172||e===174||e===176||e===177||e===182||e===187||e===191||e===215||e===247||e>=8208&&e<=8213||e>=8214&&e<=8215||e===8216||e===8217||e===8218||e>=8219&&e<=8220||e===8221||e===8222||e===8223||e>=8224&&e<=8231||e>=8240&&e<=8248||e===8249||e===8250||e>=8251&&e<=8254||e>=8257&&e<=8259||e===8260||e===8261||e===8262||e>=8263&&e<=8273||e===8274||e===8275||e>=8277&&e<=8286||e>=8592&&e<=8596||e>=8597&&e<=8601||e>=8602&&e<=8603||e>=8604&&e<=8607||e===8608||e>=8609&&e<=8610||e===8611||e>=8612&&e<=8613||e===8614||e>=8615&&e<=8621||e===8622||e>=8623&&e<=8653||e>=8654&&e<=8655||e>=8656&&e<=8657||e===8658||e===8659||e===8660||e>=8661&&e<=8691||e>=8692&&e<=8959||e>=8960&&e<=8967||e===8968||e===8969||e===8970||e===8971||e>=8972&&e<=8991||e>=8992&&e<=8993||e>=8994&&e<=9e3||e===9001||e===9002||e>=9003&&e<=9083||e===9084||e>=9085&&e<=9114||e>=9115&&e<=9139||e>=9140&&e<=9179||e>=9180&&e<=9185||e>=9186&&e<=9254||e>=9255&&e<=9279||e>=9280&&e<=9290||e>=9291&&e<=9311||e>=9472&&e<=9654||e===9655||e>=9656&&e<=9664||e===9665||e>=9666&&e<=9719||e>=9720&&e<=9727||e>=9728&&e<=9838||e===9839||e>=9840&&e<=10087||e===10088||e===10089||e===10090||e===10091||e===10092||e===10093||e===10094||e===10095||e===10096||e===10097||e===10098||e===10099||e===10100||e===10101||e>=10132&&e<=10175||e>=10176&&e<=10180||e===10181||e===10182||e>=10183&&e<=10213||e===10214||e===10215||e===10216||e===10217||e===10218||e===10219||e===10220||e===10221||e===10222||e===10223||e>=10224&&e<=10239||e>=10240&&e<=10495||e>=10496&&e<=10626||e===10627||e===10628||e===10629||e===10630||e===10631||e===10632||e===10633||e===10634||e===10635||e===10636||e===10637||e===10638||e===10639||e===10640||e===10641||e===10642||e===10643||e===10644||e===10645||e===10646||e===10647||e===10648||e>=10649&&e<=10711||e===10712||e===10713||e===10714||e===10715||e>=10716&&e<=10747||e===10748||e===10749||e>=10750&&e<=11007||e>=11008&&e<=11055||e>=11056&&e<=11076||e>=11077&&e<=11078||e>=11079&&e<=11084||e>=11085&&e<=11123||e>=11124&&e<=11125||e>=11126&&e<=11157||e===11158||e>=11159&&e<=11263||e>=11776&&e<=11777||e===11778||e===11779||e===11780||e===11781||e>=11782&&e<=11784||e===11785||e===11786||e===11787||e===11788||e===11789||e>=11790&&e<=11798||e===11799||e>=11800&&e<=11801||e===11802||e===11803||e===11804||e===11805||e>=11806&&e<=11807||e===11808||e===11809||e===11810||e===11811||e===11812||e===11813||e===11814||e===11815||e===11816||e===11817||e>=11818&&e<=11822||e===11823||e>=11824&&e<=11833||e>=11834&&e<=11835||e>=11836&&e<=11839||e===11840||e===11841||e===11842||e>=11843&&e<=11855||e>=11856&&e<=11857||e===11858||e>=11859&&e<=11903||e>=12289&&e<=12291||e===12296||e===12297||e===12298||e===12299||e===12300||e===12301||e===12302||e===12303||e===12304||e===12305||e>=12306&&e<=12307||e===12308||e===12309||e===12310||e===12311||e===12312||e===12313||e===12314||e===12315||e===12316||e===12317||e>=12318&&e<=12319||e===12320||e===12336||e===64830||e===64831||e>=65093&&e<=65094}function Ln(e){e.forEach(function(t){if(delete t.location,Co(t)||Po(t))for(var n in t.options)delete t.options[n].location,Ln(t.options[n].value);else So(t)&&Oo(t.style)||(Eo(t)||To(t))&&Pn(t.style)?delete t.style.location:Io(t)&&Ln(t.children)})}function fl(e,t){t===void 0&&(t={}),t=X({shouldParseSkeletons:!0,requiresOtherClause:!0},t);var n=new ll(e,t).parse();if(n.err){var r=SyntaxError($[n.err.kind]);throw r.location=n.err.location,r.originalMessage=n.err.message,r}return t?.captureLocation||Ln(n.val),n.val}function vn(e,t){var n=t&&t.cache?t.cache:bl,r=t&&t.serializer?t.serializer:pl,o=t&&t.strategy?t.strategy:gl;return o(e,{cache:n,serializer:r})}function hl(e){return e==null||typeof e=="number"||typeof e=="boolean"}function No(e,t,n,r){var o=hl(r)?r:n(r),i=t.get(o);return typeof i>"u"&&(i=e.call(this,r),t.set(o,i)),i}function Bo(e,t,n){var r=Array.prototype.slice.call(arguments,3),o=n(r),i=t.get(o);return typeof i>"u"&&(i=e.apply(this,r),t.set(o,i)),i}function zn(e,t,n,r,o){return n.bind(t,e,r,o)}function gl(e,t){var n=e.length===1?No:Bo;return zn(e,this,n,t.cache.create(),t.serializer)}function ml(e,t){return zn(e,this,Bo,t.cache.create(),t.serializer)}function vl(e,t){return zn(e,this,No,t.cache.create(),t.serializer)}var pl=function(){return JSON.stringify(arguments)};function Xn(){this.cache=Object.create(null)}Xn.prototype.get=function(e){return this.cache[e]};Xn.prototype.set=function(e,t){this.cache[e]=t};var bl={create:function(){return new Xn}},pn={variadic:ml,monadic:vl},et;(function(e){e.MISSING_VALUE="MISSING_VALUE",e.INVALID_VALUE="INVALID_VALUE",e.MISSING_INTL_API="MISSING_INTL_API"})(et||(et={}));var jt=function(e){Gt(t,e);function t(n,r,o){var i=e.call(this,n)||this;return i.code=r,i.originalMessage=o,i}return t.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},t}(Error),Br=function(e){Gt(t,e);function t(n,r,o,i){return e.call(this,'Invalid values for "'.concat(n,'": "').concat(r,'". Options are "').concat(Object.keys(o).join('", "'),'"'),et.INVALID_VALUE,i)||this}return t}(jt),yl=function(e){Gt(t,e);function t(n,r,o){return e.call(this,'Value for "'.concat(n,'" must be of type ').concat(r),et.INVALID_VALUE,o)||this}return t}(jt),xl=function(e){Gt(t,e);function t(n,r){return e.call(this,'The intl string context variable "'.concat(n,'" was not provided to the string "').concat(r,'"'),et.MISSING_VALUE,r)||this}return t}(jt),ue;(function(e){e[e.literal=0]="literal",e[e.object=1]="object"})(ue||(ue={}));function wl(e){return e.length<2?e:e.reduce(function(t,n){var r=t[t.length-1];return!r||r.type!==ue.literal||n.type!==ue.literal?t.push(n):r.value+=n.value,t},[])}function Sl(e){return typeof e=="function"}function Mt(e,t,n,r,o,i,s){if(e.length===1&&Dr(e[0]))return[{type:ue.literal,value:e[0].value}];for(var l=[],a=0,c=e;a<c.length;a++){var u=c[a];if(Dr(u)){l.push({type:ue.literal,value:u.value});continue}if(Ha(u)){typeof i=="number"&&l.push({type:ue.literal,value:n.getNumberFormat(t).format(i)});continue}var f=u.value;if(!(o&&f in o))throw new xl(f,s);var h=o[f];if(Ba(u)){(!h||typeof h=="string"||typeof h=="number")&&(h=typeof h=="string"||typeof h=="number"?String(h):""),l.push({type:typeof h=="string"?ue.literal:ue.object,value:h});continue}if(Eo(u)){var p=typeof u.style=="string"?r.date[u.style]:Pn(u.style)?u.style.parsedOptions:void 0;l.push({type:ue.literal,value:n.getDateTimeFormat(t,p).format(h)});continue}if(To(u)){var p=typeof u.style=="string"?r.time[u.style]:Pn(u.style)?u.style.parsedOptions:r.time.medium;l.push({type:ue.literal,value:n.getDateTimeFormat(t,p).format(h)});continue}if(So(u)){var p=typeof u.style=="string"?r.number[u.style]:Oo(u.style)?u.style.parsedOptions:void 0;p&&p.scale&&(h=h*(p.scale||1)),l.push({type:ue.literal,value:n.getNumberFormat(t,p).format(h)});continue}if(Io(u)){var d=u.children,x=u.value,E=o[x];if(!Sl(E))throw new yl(x,"function",s);var b=Mt(d,t,n,r,o,i),m=E(b.map(function(w){return w.value}));Array.isArray(m)||(m=[m]),l.push.apply(l,m.map(function(w){return{type:typeof w=="string"?ue.literal:ue.object,value:w}}))}if(Co(u)){var v=u.options[h]||u.options.other;if(!v)throw new Br(u.value,h,Object.keys(u.options),s);l.push.apply(l,Mt(v.value,t,n,r,o));continue}if(Po(u)){var v=u.options["=".concat(h)];if(!v){if(!Intl.PluralRules)throw new jt(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,et.MISSING_INTL_API,s);var T=n.getPluralRules(t,{type:u.pluralType}).select(h-(u.offset||0));v=u.options[T]||u.options.other}if(!v)throw new Br(u.value,h,Object.keys(u.options),s);l.push.apply(l,Mt(v.value,t,n,r,o,h-(u.offset||0)));continue}}return wl(l)}function El(e,t){return t?X(X(X({},e||{}),t||{}),Object.keys(e).reduce(function(n,r){return n[r]=X(X({},e[r]),t[r]||{}),n},{})):e}function Tl(e,t){return t?Object.keys(e).reduce(function(n,r){return n[r]=El(e[r],t[r]),n},X({},e)):e}function bn(e){return{create:function(){return{get:function(t){return e[t]},set:function(t,n){e[t]=n}}}}}function Cl(e){return e===void 0&&(e={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:vn(function(){for(var t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new((t=Intl.NumberFormat).bind.apply(t,gn([void 0],n,!1)))},{cache:bn(e.number),strategy:pn.variadic}),getDateTimeFormat:vn(function(){for(var t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new((t=Intl.DateTimeFormat).bind.apply(t,gn([void 0],n,!1)))},{cache:bn(e.dateTime),strategy:pn.variadic}),getPluralRules:vn(function(){for(var t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new((t=Intl.PluralRules).bind.apply(t,gn([void 0],n,!1)))},{cache:bn(e.pluralRules),strategy:pn.variadic})}}var Pl=function(){function e(t,n,r,o){var i=this;if(n===void 0&&(n=e.defaultLocale),this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(a){var c=i.formatToParts(a);if(c.length===1)return c[0].value;var u=c.reduce(function(f,h){return!f.length||h.type!==ue.literal||typeof f[f.length-1]!="string"?f.push(h.value):f[f.length-1]+=h.value,f},[]);return u.length<=1?u[0]||"":u},this.formatToParts=function(a){return Mt(i.ast,i.locales,i.formatters,i.formats,a,void 0,i.message)},this.resolvedOptions=function(){var a;return{locale:((a=i.resolvedLocale)===null||a===void 0?void 0:a.toString())||Intl.NumberFormat.supportedLocalesOf(i.locales)[0]}},this.getAst=function(){return i.ast},this.locales=n,this.resolvedLocale=e.resolveLocale(n),typeof t=="string"){if(this.message=t,!e.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var s=o||{};s.formatters;var l=Na(s,["formatters"]);this.ast=e.__parse(t,X(X({},l),{locale:this.resolvedLocale}))}else this.ast=t;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=Tl(e.formats,r),this.formatters=o&&o.formatters||Cl(this.formatterCache)}return Object.defineProperty(e,"defaultLocale",{get:function(){return e.memoizedDefaultLocale||(e.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),e.memoizedDefaultLocale},enumerable:!1,configurable:!0}),e.memoizedDefaultLocale=null,e.resolveLocale=function(t){if(!(typeof Intl.Locale>"u")){var n=Intl.NumberFormat.supportedLocalesOf(t);return n.length>0?new Intl.Locale(n[0]):new Intl.Locale(typeof t=="string"?t:t[0])}},e.__parse=fl,e.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},e}();class Il{getStringForLocale(t,n){let r=this.messages[n];r||(r=Ol(n,this.messages,this.defaultLocale),this.messages[n]=r);let o=r[t];if(!o)throw new Error(`Could not find intl message ${t} in ${n} locale`);return o}constructor(t,n="en-US"){this.messages={...t},this.defaultLocale=n}}function Ol(e,t,n="en-US"){if(t[e])return t[e];let r=Al(e);if(t[r])return t[r];for(let o in t)if(o.startsWith(r+"-"))return t[o];return t[n]}function Al(e){return Intl.Locale?new Intl.Locale(e).language:e.split("-")[0]}class Dl{format(t,n){let r=this.cache[t];if(!r){let i=this.messages.getStringForLocale(t,this.locale);if(!i)throw new Error(`Could not find intl message ${t} in ${this.locale} locale`);r=new Pl(i,this.locale),this.cache[t]=r}let o;return n&&(o=Object.keys(n).reduce((i,s)=>(i[s]=n[s]==null?!1:n[s],i),{})),r.format(o)}constructor(t,n){this.locale=t,this.messages=n,this.cache={}}}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/23c3a91e7b87952f07da9da115188bd2abd99d77/packages/@react-aria/i18n/src/useMessageFormatter.ts
 */const Hr=new WeakMap;function Ll(e){let t=Hr.get(e);return t||(t=new Il(e),Hr.set(e,t)),t}function Ho(e){const{locale:t}=Vt(),n=j(()=>new Dl(t(),Ll(S(e))));return j(()=>({format:(r,o)=>n().format(r,o)}))}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/bfce84fee12a027d9cbc38b43e1747e3e4b4b169/packages/@react-stately/selection/src/Selection.ts
 * https://github.com/adobe/react-spectrum/blob/bfce84fee12a027d9cbc38b43e1747e3e4b4b169/packages/@react-stately/selection/src/types.ts
 * https://github.com/adobe/react-spectrum/blob/bfce84fee12a027d9cbc38b43e1747e3e4b4b169/packages/@react-types/shared/src/selection.d.ts
 */class be extends Set{anchorKey;currentKey;constructor(t,n,r){super(t),t instanceof be?(this.anchorKey=n||t.anchorKey,this.currentKey=r||t.currentKey):(this.anchorKey=n,this.currentKey=r)}}function Ml(e){const[t,n]=$n(e);return[()=>t()??new be,n]}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/8f2f2acb3d5850382ebe631f055f88c704aa7d17/packages/@react-aria/selection/src/utils.ts
 */function ko(e){return Hs()?e.altKey:e.ctrlKey}function Xe(e){return yt()?e.metaKey:e.ctrlKey}function kr(e){return new be(e)}function Fl(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/bfce84fee12a027d9cbc38b43e1747e3e4b4b169/packages/@react-stately/selection/src/useMultipleSelectionState.ts
 */function _l(e){e=z({selectionMode:"none",selectionBehavior:"toggle"},e);const[t,n]=I(!1),[r,o]=I(),i=j(()=>{const d=S(e.selectedKeys);return d!=null?kr(d):d}),s=j(()=>{const d=S(e.defaultSelectedKeys);return d!=null?kr(d):new be}),[l,a]=Ml({value:i,defaultValue:s,onChange:d=>e.onSelectionChange?.(d)}),[c,u]=I(S(e.selectionBehavior)),f=()=>S(e.selectionMode),h=()=>S(e.disallowEmptySelection)??!1,p=d=>{(S(e.allowDuplicateSelectionEvents)||!Fl(d,l()))&&a(d)};return A(()=>{const d=l();S(e.selectionBehavior)==="replace"&&c()==="toggle"&&typeof d=="object"&&d.size===0&&u("replace")}),A(()=>{u(S(e.selectionBehavior)??"toggle")}),{selectionMode:f,disallowEmptySelection:h,selectionBehavior:c,setSelectionBehavior:u,isFocused:t,setFocused:n,focusedKey:r,setFocusedKey:o,selectedKeys:l,setSelectedKeys:p}}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/8f2f2acb3d5850382ebe631f055f88c704aa7d17/packages/@react-aria/selection/src/useTypeSelect.ts
 */function Ko(e){const[t,n]=I(""),[r,o]=I(-1);return{typeSelectHandlers:{onKeyDown:s=>{if(S(e.isDisabled))return;const l=S(e.keyboardDelegate),a=S(e.selectionManager);if(!l.getKeyForSearch)return;const c=Rl(s.key);if(!c||s.ctrlKey||s.metaKey)return;c===" "&&t().trim().length>0&&(s.preventDefault(),s.stopPropagation());let u=n(h=>h+=c),f=l.getKeyForSearch(u,a.focusedKey())??l.getKeyForSearch(u);f==null&&Nl(u)&&(u=u[0],f=l.getKeyForSearch(u,a.focusedKey())??l.getKeyForSearch(u)),f!=null&&(a.setFocusedKey(f),e.onTypeSelect?.(f)),clearTimeout(r()),o(window.setTimeout(()=>n(""),500))}}}}function Rl(e){return e.length===1||!/^[A-Z]/i.test(e)?e:""}function Nl(e){return e.split("").every(t=>t===e[0])}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/8f2f2acb3d5850382ebe631f055f88c704aa7d17/packages/@react-aria/selection/src/useSelectableCollection.ts
 */function Bl(e,t,n){e=Kt({selectOnFocus:()=>S(e.selectionManager).selectionBehavior()==="replace"},e);const o=()=>n?.()??t(),{direction:i}=Vt();let s={top:0,left:0};Ps(()=>S(e.isVirtualized)?void 0:o(),"scroll",()=>{const d=o();d&&(s={top:d.scrollTop,left:d.scrollLeft})});const{typeSelectHandlers:l}=Ko({isDisabled:()=>S(e.disallowTypeAhead),keyboardDelegate:()=>S(e.keyboardDelegate),selectionManager:()=>S(e.selectionManager)}),a=d=>{q(d,l.onKeyDown),d.altKey&&d.key==="Tab"&&d.preventDefault();const x=t();if(!x?.contains(d.target))return;const E=S(e.selectionManager),b=S(e.selectOnFocus),m=y=>{y!=null&&(E.setFocusedKey(y),d.shiftKey&&E.selectionMode()==="multiple"?E.extendSelection(y):b&&!ko(d)&&E.replaceSelection(y))},v=S(e.keyboardDelegate),T=S(e.shouldFocusWrap),w=E.focusedKey();switch(d.key){case"ArrowDown":{if(v.getKeyBelow){d.preventDefault();let y;w!=null?y=v.getKeyBelow(w):y=v.getFirstKey?.(),y==null&&T&&(y=v.getFirstKey?.(w)),m(y)}break}case"ArrowUp":{if(v.getKeyAbove){d.preventDefault();let y;w!=null?y=v.getKeyAbove(w):y=v.getLastKey?.(),y==null&&T&&(y=v.getLastKey?.(w)),m(y)}break}case"ArrowLeft":{if(v.getKeyLeftOf){d.preventDefault();const y=i()==="rtl";let P;w!=null?P=v.getKeyLeftOf(w):P=y?v.getFirstKey?.():v.getLastKey?.(),m(P)}break}case"ArrowRight":{if(v.getKeyRightOf){d.preventDefault();const y=i()==="rtl";let P;w!=null?P=v.getKeyRightOf(w):P=y?v.getLastKey?.():v.getFirstKey?.(),m(P)}break}case"Home":if(v.getFirstKey){d.preventDefault();const y=v.getFirstKey(w,Xe(d));y!=null&&(E.setFocusedKey(y),Xe(d)&&d.shiftKey&&E.selectionMode()==="multiple"?E.extendSelection(y):b&&E.replaceSelection(y))}break;case"End":if(v.getLastKey){d.preventDefault();const y=v.getLastKey(w,Xe(d));y!=null&&(E.setFocusedKey(y),Xe(d)&&d.shiftKey&&E.selectionMode()==="multiple"?E.extendSelection(y):b&&E.replaceSelection(y))}break;case"PageDown":if(v.getKeyPageBelow&&w!=null){d.preventDefault();const y=v.getKeyPageBelow(w);m(y)}break;case"PageUp":if(v.getKeyPageAbove&&w!=null){d.preventDefault();const y=v.getKeyPageAbove(w);m(y)}break;case"a":Xe(d)&&E.selectionMode()==="multiple"&&S(e.disallowSelectAll)!==!0&&(d.preventDefault(),E.selectAll());break;case"Escape":d.defaultPrevented||(d.preventDefault(),S(e.disallowEmptySelection)||E.clearSelection());break;case"Tab":if(!S(e.allowsTabNavigation)){if(d.shiftKey)x.focus();else{const y=Zs(x,{tabbable:!0});let P,C;do C=y.lastChild(),C&&(P=C);while(C);P&&!P.contains(document.activeElement)&&se(P)}break}}},c=d=>{const x=S(e.selectionManager),E=S(e.keyboardDelegate),b=S(e.selectOnFocus);if(x.isFocused()){d.currentTarget.contains(d.target)||x.setFocused(!1);return}if(d.currentTarget.contains(d.target)){if(x.setFocused(!0),x.focusedKey()==null){const m=T=>{T!=null&&(x.setFocusedKey(T),b&&x.replaceSelection(T))},v=d.relatedTarget;v&&d.currentTarget.compareDocumentPosition(v)&Node.DOCUMENT_POSITION_FOLLOWING?m(x.lastSelectedKey()??E.getLastKey?.()):m(x.firstSelectedKey()??E.getFirstKey?.())}else if(!S(e.isVirtualized)){const m=o();if(m){m.scrollTop=s.top,m.scrollLeft=s.left;const v=m.querySelector(`[data-key="${x.focusedKey()}"]`);v&&(se(v),br(m,v))}}}},u=d=>{const x=S(e.selectionManager);d.currentTarget.contains(d.relatedTarget)||x.setFocused(!1)},f=d=>{o()===d.target&&d.preventDefault()},h=()=>{const d=S(e.autoFocus);if(!d)return;const x=S(e.selectionManager),E=S(e.keyboardDelegate);let b;d==="first"&&(b=E.getFirstKey?.()),d==="last"&&(b=E.getLastKey?.());const m=x.selectedKeys();m.size&&(b=m.values().next().value),x.setFocused(!0),x.setFocusedKey(b);const v=t();v&&b==null&&!S(e.shouldUseVirtualFocus)&&se(v)};return pt(()=>{e.deferAutoFocus?setTimeout(h,0):h()}),A(me([o,()=>S(e.isVirtualized),()=>S(e.selectionManager).focusedKey()],d=>{const[x,E,b]=d;if(E)b&&e.scrollToKey?.(b);else if(b&&x){const m=x.querySelector(`[data-key="${b}"]`);m&&br(x,m)}})),{tabIndex:j(()=>{if(!S(e.shouldUseVirtualFocus))return S(e.selectionManager).focusedKey()==null?0:-1}),onKeyDown:a,onMouseDown:f,onFocusIn:c,onFocusOut:u}}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/8f2f2acb3d5850382ebe631f055f88c704aa7d17/packages/@react-aria/selection/src/useSelectableItem.ts
 */function Uo(e,t){const n=()=>S(e.selectionManager),r=()=>S(e.key),o=()=>S(e.shouldUseVirtualFocus),i=m=>{n().selectionMode()!=="none"&&(n().selectionMode()==="single"?n().isSelected(r())&&!n().disallowEmptySelection()?n().toggleSelection(r()):n().replaceSelection(r()):m&&m.shiftKey?n().extendSelection(r()):n().selectionBehavior()==="toggle"||Xe(m)||"pointerType"in m&&m.pointerType==="touch"?n().toggleSelection(r()):n().replaceSelection(r()))},s=()=>n().isSelected(r()),l=()=>S(e.disabled)||n().isDisabled(r()),a=()=>!l()&&n().canSelectItem(r());let c=null;const u=m=>{a()&&(c=m.pointerType,m.pointerType==="mouse"&&m.button===0&&!S(e.shouldSelectOnPressUp)&&i(m))},f=m=>{a()&&m.pointerType==="mouse"&&m.button===0&&S(e.shouldSelectOnPressUp)&&S(e.allowsDifferentPressOrigin)&&i(m)},h=m=>{a()&&(S(e.shouldSelectOnPressUp)&&!S(e.allowsDifferentPressOrigin)||c!=="mouse")&&i(m)},p=m=>{!a()||!["Enter"," "].includes(m.key)||(ko(m)?n().toggleSelection(r()):i(m))},d=m=>{l()&&m.preventDefault()},x=m=>{const v=t();o()||l()||!v||m.target===v&&n().setFocusedKey(r())},E=j(()=>{if(!(o()||l()))return r()===n().focusedKey()?0:-1}),b=j(()=>S(e.virtualized)?void 0:r());return A(me([t,r,o,()=>n().focusedKey(),()=>n().isFocused()],([m,v,T,w,y])=>{m&&v===w&&y&&!T&&document.activeElement!==m&&(e.focus?e.focus():se(m))})),{isSelected:s,isDisabled:l,allowsSelection:a,tabIndex:E,dataKey:b,onPointerDown:u,onPointerUp:f,onClick:h,onKeyDown:p,onMouseDown:d,onFocus:x}}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/bfce84fee12a027d9cbc38b43e1747e3e4b4b169/packages/@react-stately/selection/src/SelectionManager.ts
 */class Hl{collection;state;constructor(t,n){this.collection=t,this.state=n}selectionMode(){return this.state.selectionMode()}disallowEmptySelection(){return this.state.disallowEmptySelection()}selectionBehavior(){return this.state.selectionBehavior()}setSelectionBehavior(t){this.state.setSelectionBehavior(t)}isFocused(){return this.state.isFocused()}setFocused(t){this.state.setFocused(t)}focusedKey(){return this.state.focusedKey()}setFocusedKey(t){(t==null||this.collection().getItem(t))&&this.state.setFocusedKey(t)}selectedKeys(){return this.state.selectedKeys()}isSelected(t){if(this.state.selectionMode()==="none")return!1;const n=this.getKey(t);return n==null?!1:this.state.selectedKeys().has(n)}isEmpty(){return this.state.selectedKeys().size===0}isSelectAll(){if(this.isEmpty())return!1;const t=this.state.selectedKeys();return this.getAllSelectableKeys().every(n=>t.has(n))}firstSelectedKey(){let t;for(const n of this.state.selectedKeys()){const r=this.collection().getItem(n),o=r?.index!=null&&t?.index!=null&&r.index<t.index;(!t||o)&&(t=r)}return t?.key}lastSelectedKey(){let t;for(const n of this.state.selectedKeys()){const r=this.collection().getItem(n),o=r?.index!=null&&t?.index!=null&&r.index>t.index;(!t||o)&&(t=r)}return t?.key}extendSelection(t){if(this.selectionMode()==="none")return;if(this.selectionMode()==="single"){this.replaceSelection(t);return}const n=this.getKey(t);if(n==null)return;const r=this.state.selectedKeys(),o=r.anchorKey||n,i=new be(r,o,n);for(const s of this.getKeyRange(o,r.currentKey||n))i.delete(s);for(const s of this.getKeyRange(n,o))this.canSelectItem(s)&&i.add(s);this.state.setSelectedKeys(i)}getKeyRange(t,n){const r=this.collection().getItem(t),o=this.collection().getItem(n);return r&&o?r.index!=null&&o.index!=null&&r.index<=o.index?this.getKeyRangeInternal(t,n):this.getKeyRangeInternal(n,t):[]}getKeyRangeInternal(t,n){const r=[];let o=t;for(;o!=null;){const i=this.collection().getItem(o);if(i&&i.type==="item"&&r.push(o),o===n)return r;o=this.collection().getKeyAfter(o)}return[]}getKey(t){const n=this.collection().getItem(t);return n?!n||n.type!=="item"?null:n.key:t}toggleSelection(t){if(this.selectionMode()==="none")return;if(this.selectionMode()==="single"&&!this.isSelected(t)){this.replaceSelection(t);return}const n=this.getKey(t);if(n==null)return;const r=new be(this.state.selectedKeys());r.has(n)?r.delete(n):this.canSelectItem(n)&&(r.add(n),r.anchorKey=n,r.currentKey=n),!(this.disallowEmptySelection()&&r.size===0)&&this.state.setSelectedKeys(r)}replaceSelection(t){if(this.selectionMode()==="none")return;const n=this.getKey(t);if(n==null)return;const r=this.canSelectItem(n)?new be([n],n,n):new be;this.state.setSelectedKeys(r)}setSelectedKeys(t){if(this.selectionMode()==="none")return;const n=new be;for(const r of t){const o=this.getKey(r);if(o!=null&&(n.add(o),this.selectionMode()==="single"))break}this.state.setSelectedKeys(n)}selectAll(){this.selectionMode()==="multiple"&&this.state.setSelectedKeys(new Set(this.getAllSelectableKeys()))}clearSelection(){const t=this.state.selectedKeys();!this.disallowEmptySelection()&&t.size>0&&this.state.setSelectedKeys(new be)}toggleSelectAll(){this.isSelectAll()?this.clearSelection():this.selectAll()}select(t,n){this.selectionMode()!=="none"&&(this.selectionMode()==="single"?this.isSelected(t)&&!this.disallowEmptySelection()?this.toggleSelection(t):this.replaceSelection(t):this.selectionBehavior()==="toggle"||n&&n.pointerType==="touch"?this.toggleSelection(t):this.replaceSelection(t))}isSelectionEqual(t){if(t===this.state.selectedKeys())return!0;const n=this.selectedKeys();if(t.size!==n.size)return!1;for(const r of t)if(!n.has(r))return!1;for(const r of n)if(!t.has(r))return!1;return!0}canSelectItem(t){if(this.state.selectionMode()==="none")return!1;const n=this.collection().getItem(t);return n!=null&&!n.disabled}isDisabled(t){const n=this.collection().getItem(t);return!n||n.disabled}getAllSelectableKeys(){const t=[];return(r=>{for(;r!=null;){if(this.canSelectItem(r)){const o=this.collection().getItem(r);if(!o)continue;o.type==="item"&&t.push(r)}r=this.collection().getKeyAfter(r)}})(this.collection().getFirstKey()),t}}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/bfce84fee12a027d9cbc38b43e1747e3e4b4b169/packages/@react-stately/list/src/ListCollection.ts
 */class Kr{keyMap=new Map;iterable;firstKey;lastKey;constructor(t){this.iterable=t;for(const o of t)this.keyMap.set(o.key,o);if(this.keyMap.size===0)return;let n,r=0;for(const[o,i]of this.keyMap)n?(n.nextKey=o,i.prevKey=n.key):(this.firstKey=o,i.prevKey=void 0),i.type==="item"&&(i.index=r++),n=i,n.nextKey=void 0;this.lastKey=n.key}*[Symbol.iterator](){yield*this.iterable}getSize(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(t){return this.keyMap.get(t)?.prevKey}getKeyAfter(t){return this.keyMap.get(t)?.nextKey}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(t){return this.keyMap.get(t)}at(t){const n=[...this.getKeys()];return this.getItem(n[t])}}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/bfce84fee12a027d9cbc38b43e1747e3e4b4b169/packages/@react-stately/list/src/useListState.ts
 */function Yn(e){const t=_l(e),r=ta({dataSource:()=>S(e.dataSource),getKey:()=>S(e.getKey),getTextValue:()=>S(e.getTextValue),getDisabled:()=>S(e.getDisabled),getSectionChildren:()=>S(e.getSectionChildren),factory:i=>e.filter?new Kr(e.filter(i)):new Kr(i)},[()=>e.filter]),o=new Hl(r,t);return Hi(()=>{const i=t.focusedKey();i!=null&&!r().getItem(i)&&t.setFocusedKey(void 0)}),{collection:r,selectionManager:()=>o}}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/8f2f2acb3d5850382ebe631f055f88c704aa7d17/packages/@react-aria/selection/src/ListKeyboardDelegate.ts
 */class $o{collection;ref;collator;constructor(t,n,r){this.collection=t,this.ref=n,this.collator=r}getKeyBelow(t){let n=this.collection().getKeyAfter(t);for(;n!=null;){const r=this.collection().getItem(n);if(r&&r.type==="item"&&!r.disabled)return n;n=this.collection().getKeyAfter(n)}}getKeyAbove(t){let n=this.collection().getKeyBefore(t);for(;n!=null;){const r=this.collection().getItem(n);if(r&&r.type==="item"&&!r.disabled)return n;n=this.collection().getKeyBefore(n)}}getFirstKey(){let t=this.collection().getFirstKey();for(;t!=null;){const n=this.collection().getItem(t);if(n&&n.type==="item"&&!n.disabled)return t;t=this.collection().getKeyAfter(t)}}getLastKey(){let t=this.collection().getLastKey();for(;t!=null;){const n=this.collection().getItem(t);if(n&&n.type==="item"&&!n.disabled)return t;t=this.collection().getKeyBefore(t)}}getItem(t){return this.ref?.()?.querySelector(`[data-key="${t}"]`)??null}getKeyPageAbove(t){const n=this.ref?.();let r=this.getItem(t);if(!n||!r)return;const o=Math.max(0,r.offsetTop+r.offsetHeight-n.offsetHeight);let i=t;for(;i&&r&&r.offsetTop>o;)i=this.getKeyAbove(i),r=i!=null?this.getItem(i):null;return i}getKeyPageBelow(t){const n=this.ref?.();let r=this.getItem(t);if(!n||!r)return;const o=Math.min(n.scrollHeight,r.offsetTop-r.offsetHeight+n.offsetHeight);let i=t;for(;i&&r&&r.offsetTop<o;)i=this.getKeyBelow(i),r=i!=null?this.getItem(i):null;return i}getKeyForSearch(t,n){const r=this.collator?.();if(!r)return;let o=n!=null?this.getKeyBelow(n):this.getFirstKey();for(;o!=null;){const i=this.collection().getItem(o);if(i){const s=i.textValue.slice(0,t.length);if(i.textValue&&r.compare(s,t)===0)return o}o=this.getKeyBelow(o)}}}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/blob/8f2f2acb3d5850382ebe631f055f88c704aa7d17/packages/@react-aria/selection/src/useSelectableList.ts
 */function Vo(e,t,n){const r=wo({usage:"search",sensitivity:"base"}),o=j(()=>{const i=S(e.keyboardDelegate);return i||new $o(e.collection,t,r)});return Bl({selectionManager:()=>S(e.selectionManager),keyboardDelegate:o,autoFocus:()=>S(e.autoFocus),deferAutoFocus:()=>S(e.deferAutoFocus),shouldFocusWrap:()=>S(e.shouldFocusWrap),disallowEmptySelection:()=>S(e.disallowEmptySelection),selectOnFocus:()=>S(e.selectOnFocus),disallowTypeAhead:()=>S(e.disallowTypeAhead),shouldUseVirtualFocus:()=>S(e.shouldUseVirtualFocus),allowsTabNavigation:()=>S(e.allowsTabNavigation),isVirtualized:()=>S(e.isVirtualized),scrollToKey:i=>S(e.scrollToKey)?.(i)},t,n)}const[qn,wt]=bt({toasts:[]});function kl(e){wt("toasts",t=>[...t,e])}function Kl(e){return qn.toasts.find(t=>t.id===e)}function Ul(e,t){const n=qn.toasts.findIndex(r=>r.id===e);n!=-1&&wt("toasts",r=>[...r.slice(0,n),t,...r.slice(n+1)])}function $l(e){wt("toasts",t=>t.id===e,"dismiss",!0)}function Vl(e){wt("toasts",t=>t.filter(n=>n.id!==e))}function Gl(){wt("toasts",[])}const tt={toasts:()=>qn.toasts,add:kl,get:Kl,update:Ul,dismiss:$l,remove:Vl,clear:Gl};let jl=0;function Go(e,t){const n=jl++;return tt.add({id:n,toastComponent:e,dismiss:!1,update:!1,region:t?.region}),n}function Mn(e,t){tt.update(e,{id:e,toastComponent:t,dismiss:!1,update:!0})}function Wl(e,t,n){const r=Go(o=>t({get toastId(){return o.toastId},state:"pending"}),n);return(Ut(e)?e():e).then(o=>Mn(r,i=>t({get toastId(){return i.toastId},state:"fulfilled",data:o}))).catch(o=>Mn(r,i=>t({get toastId(){return i.toastId},state:"rejected",error:o}))),r}function zl(e){return tt.dismiss(e),e}function Xl(){tt.clear()}const rt={show:Go,update:Mn,promise:Wl,dismiss:zl,clear:Xl};/*!
 * Portions of this file are based on code from ariakit
 * MIT Licensed, Copyright (c) Diego Haz.
 *
 * Credits to the ariakit team:
 * https://github.com/hope-ui/hope-ui/blob/54125b130195f37161dbeeea0c21dc3b198bc3ac/packages/core/src/button/is-button.ts
 */const Yl=["button","color","file","image","reset","submit"];function ql(e){const t=e.tagName.toLowerCase();return t==="button"?!0:t==="input"&&e.type?Yl.indexOf(e.type)!==-1:!1}function St(e){let t;e=z({type:"button"},e);const[n,r]=K(e,["ref","type","disabled"]),o=bo(()=>t,()=>"button"),i=j(()=>{const a=o();return a==null?!1:ql({tagName:a,type:n.type})}),s=j(()=>o()==="input"),l=j(()=>o()==="a"&&t?.getAttribute("href")!=null);return g(te,F({as:"button",get type(){return i()||s()?n.type:void 0},get role(){return!i()&&!l()?"button":void 0},get tabIndex(){return!i()&&!l()&&!n.disabled?0:void 0},get disabled(){return i()||s()?n.disabled:void 0},get"aria-disabled"(){return!i()&&!s()&&n.disabled?!0:void 0},get"data-disabled"(){return n.disabled?"":void 0}},r))}const jo=re();function Wo(){return oe(jo)}function Zl(){const e=Wo();if(e===void 0)throw new Error("[kobalte]: `useDomCollectionContext` must be used within a `DomCollectionProvider` component");return e}/*!
 * Portions of this file are based on code from ariakit.
 * MIT Licensed, Copyright (c) Diego Haz.
 *
 * Credits to the Ariakit team:
 * https://github.com/ariakit/ariakit/blob/da142672eddefa99365773ced72171facc06fdcb/packages/ariakit/src/collection/collection-state.ts
 */function zo(e,t){return!!(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_PRECEDING)}function Jl(e,t){const n=t.ref();if(!n)return-1;let r=e.length;if(!r)return-1;for(;r--;){const o=e[r]?.ref();if(o&&zo(o,n))return r+1}return 0}function Ql(e){const t=e.map((r,o)=>[o,r]);let n=!1;return t.sort(([r,o],[i,s])=>{const l=o.ref(),a=s.ref();return l===a||!l||!a?0:zo(l,a)?(r>i&&(n=!0),-1):(r<i&&(n=!0),1)}),n?t.map(([r,o])=>o):e}function Xo(e,t){const n=Ql(e);e!==n&&t(n)}function ec(e){const t=e[0],n=e[e.length-1]?.ref();let r=t?.ref()?.parentElement;for(;r;){if(n&&r.contains(n))return r;r=r.parentElement}return fe(r).body}function tc(e,t){A(()=>{const n=setTimeout(()=>{Xo(e(),t)});k(()=>clearTimeout(n))})}function nc(e,t){if(typeof IntersectionObserver!="function"){tc(e,t);return}let n=[];A(()=>{const r=()=>{const s=!!n.length;n=e(),s&&Xo(e(),t)},o=ec(e()),i=new IntersectionObserver(r,{root:o});e().forEach(s=>{const l=s.ref();l&&i.observe(l)}),k(()=>i.disconnect())})}/*!
 * Portions of this file are based on code from ariakit.
 * MIT Licensed, Copyright (c) Diego Haz.
 *
 * Credits to the Ariakit team:
 * https://github.com/ariakit/ariakit/blob/da142672eddefa99365773ced72171facc06fdcb/packages/ariakit/src/collection/collection.tsx
 * https://github.com/ariakit/ariakit/blob/da142672eddefa99365773ced72171facc06fdcb/packages/ariakit/src/collection/collection-state.ts
 * https://github.com/ariakit/ariakit/blob/da142672eddefa99365773ced72171facc06fdcb/packages/ariakit/src/collection/collection-item.ts
 */function rc(e={}){const[t,n]=oa({value:()=>S(e.items),onChange:i=>e.onItemsChange?.(i)});nc(t,n);const r=i=>(n(s=>{const l=Jl(s,i);return Fs(s,i,l)}),()=>{n(s=>{const l=s.filter(a=>a.ref()!==i.ref());return s.length===l.length?s:l})});return{DomCollectionProvider:i=>ki(jo.Provider,{value:{registerItem:r},get children(){return i.children}})}}function oc(e){const t=Zl();e=z({shouldRegisterItem:!0},e),A(()=>{if(!e.shouldRegisterItem)return;const n=t.registerItem(e.getItem());k(n)})}const Yo=re();function ot(){const e=oe(Yo);if(e===void 0)throw new Error("[kobalte]: `useDialogContext` must be used within a `Dialog` component");return e}function ic(e){const t=ot(),[n,r]=K(e,["aria-label","onClick"]),o=Ho(()=>Aa);return g(St,F({get"aria-label"(){return n["aria-label"]||o().format("dismiss")},onClick:s=>{q(s,n.onClick),t.close()}},r))}const qo=re();function sc(){return oe(qo)}function Wt(e){let t;const n=sc(),[r,o]=K(e,["ref","disableOutsidePointerEvents","excludedElements","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss","bypassTopMostLayerCheck"]),i=new Set([]),s=f=>{i.add(f);const h=n?.registerNestedLayer(f);return()=>{i.delete(f),h?.()}};ya({shouldExcludeElement:f=>!1,onPointerDownOutside:f=>{},onFocusOutside:f=>{r.onFocusOutside?.(f),r.onInteractOutside?.(f),f.defaultPrevented||r.onDismiss?.()}},()=>t),ia({ownerDocument:()=>fe(t),onEscapeKeyDown:f=>{}}),pt(()=>{}),A(me([()=>t,()=>r.disableOutsidePointerEvents],([f,h])=>{if(!f)return;const p=Ot.find(f);p&&p.isPointerBlocking!==h&&(p.isPointerBlocking=h,Ot.assignPointerEventToLayers()),h&&Ot.disableBodyPointerEvents(f),k(()=>{Ot.restoreBodyPointerEvents(f)})},{defer:!0}));const u={registerNestedLayer:s};return g(qo.Provider,{value:u,get children(){return g(te,F({as:"div"},o))}})}function ac(e){let t;const n=ot();e=z({id:n.generateId("content")},e);const[r,o]=K(e,["ref","onOpenAutoFocus","onCloseAutoFocus","onPointerDownOutside","onFocusOutside","onInteractOutside"]);let i=!1,s=!1;const l=f=>{r.onPointerDownOutside?.(f),n.modal()&&f.detail.isContextMenu&&f.preventDefault()},a=f=>{r.onFocusOutside?.(f),n.modal()&&f.preventDefault()},c=f=>{r.onInteractOutside?.(f),!n.modal()&&(f.defaultPrevented||(i=!0,f.detail.originalEvent.type==="pointerdown"&&(s=!0)),ye(n.triggerRef(),f.target)&&f.preventDefault(),f.detail.originalEvent.type==="focusin"&&s&&f.preventDefault())},u=f=>{r.onCloseAutoFocus?.(f),n.modal()?(f.preventDefault(),se(n.triggerRef())):(f.defaultPrevented||(i||se(n.triggerRef()),f.preventDefault()),i=!1,s=!1)};return jn({isDisabled:()=>!(n.isOpen()&&n.modal()),targets:()=>[]}),Wn({ownerRef:()=>t,isDisabled:()=>!(n.isOpen()&&(n.modal()||n.preventScroll()))}),Gn({trapFocus:()=>n.isOpen()&&n.modal(),onMountAutoFocus:r.onOpenAutoFocus,onUnmountAutoFocus:u},()=>t),A(()=>k(n.registerContentId(o.id))),g(W,{get when(){return n.contentPresence.isPresent()},get children(){return g(Wt,F({role:"dialog",tabIndex:-1,get disableOutsidePointerEvents(){return n.modal()&&n.isOpen()},get excludedElements(){return[n.triggerRef]},get"aria-labelledby"(){return n.titleId()},get"aria-describedby"(){return n.descriptionId()},get"data-expanded"(){return n.isOpen()?"":void 0},get"data-closed"(){return n.isOpen()?void 0:""},onPointerDownOutside:l,onFocusOutside:a,onInteractOutside:c,get onDismiss(){return n.close}},o))}})}function lc(e){const t=ot();e=z({id:t.generateId("description")},e);const[n,r]=K(e,["id"]);return A(()=>k(t.registerDescriptionId(n.id))),g(te,F({as:"p",get id(){return n.id}},r))}function cc(e){const t=ot(),[n,r]=K(e,["ref","style","onPointerDown"]),o=i=>{q(i,n.onPointerDown),i.target===i.currentTarget&&i.preventDefault()};return g(W,{get when(){return t.overlayPresence.isPresent()},get children(){return g(te,F({as:"div",get style(){return{"pointer-events":"auto",...n.style}},get"data-expanded"(){return t.isOpen()?"":void 0},get"data-closed"(){return t.isOpen()?void 0:""},onPointerDown:o},r))}})}function uc(e){const t=ot();return g(W,{get when(){return t.contentPresence.isPresent()||t.overlayPresence.isPresent()},get children(){return g(kt,e)}})}function dc(e){const t=`dialog-${we()}`;e=z({id:t,modal:!0,preventScroll:!1},e);const[n,r]=I(),[o,i]=I(),[s,l]=I(),[a,c]=I(),u=xt({open:()=>e.open,defaultOpen:()=>e.defaultOpen,onOpenChange:x=>e.onOpenChange?.(x)}),f=()=>e.forceMount||u.isOpen(),h=Je(f),p=Je(f),d={isOpen:u.isOpen,modal:()=>e.modal??!0,preventScroll:()=>e.preventScroll??!1,contentId:n,titleId:o,descriptionId:s,triggerRef:a,overlayPresence:h,contentPresence:p,close:u.close,toggle:u.toggle,setTriggerRef:c,generateId:Ce(()=>e.id),registerContentId:ne(r),registerTitleId:ne(i),registerDescriptionId:ne(l)};return g(Yo.Provider,{value:d,get children(){return e.children}})}function fc(e){const t=ot();e=z({id:t.generateId("title")},e);const[n,r]=K(e,["id"]);return A(()=>k(t.registerTitleId(n.id))),g(te,F({as:"h2",get id(){return n.id}},r))}const Zo=re();function Jo(){const e=oe(Zo);if(e===void 0)throw new Error("[kobalte]: `usePopperContext` must be used within a `Popper` component");return e}var hc=["<svg",' display="block" viewBox="','"><g','><path fill="none"','></path><path stroke="none"',"></path></g></svg>"];const ht=30,Ur=ht/2,gc={top:180,right:-90,bottom:0,left:90},$r="M23,27.8c1.1,1.2,3.4,2.2,5,2.2h2H0h2c1.7,0,3.9-1,5-2.2l6.6-7.2c0.7-0.8,2-0.8,2.7,0L23,27.8L23,27.8z";function Qo(e){const t=Jo();e=z({size:ht},e);const[n,r]=K(e,["ref","style","children","size"]),o=()=>t.currentPlacement().split("-")[0],i=mc(t.contentRef),s=()=>i()?.getPropertyValue("background-color")||"none",l=()=>i()?.getPropertyValue(`border-${o()}-color`)||"none",a=()=>i()?.getPropertyValue(`border-${o()}-width`)||"0px",c=()=>parseInt(a())*2*(ht/n.size),u=()=>`rotate(${gc[o()]} ${Ur} ${Ur})`;return g(te,F({as:"div","aria-hidden":"true",get style(){return{position:"absolute","font-size":`${n.size}px`,width:"1em",height:"1em","pointer-events":"none",fill:s(),stroke:l(),"stroke-width":c(),...n.style}}},r,{get children(){return B(hc,H(),`0 0 ${O(ht,!0)} ${O(ht,!0)}`,Ke("transform",O(u(),!0),!1),Ke("d",O($r,!0),!1),Ke("d",O($r,!0),!1))}}))}function mc(e){const[t,n]=I();return A(()=>{const r=e();r&&n(Hn(r).getComputedStyle(r))}),t}function Zn(e){Jo();const[t,n]=K(e,["ref","style"]);return g(te,F({as:"div","data-popper-positioner":"",get style(){return{position:"absolute",top:0,left:0,"min-width":"max-content",...t.style}}},n))}const vc=["top","right","bottom","left"],Fe=Math.min,ge=Math.max,Nt=Math.round,Lt=Math.floor,_e=e=>({x:e,y:e}),pc={left:"right",right:"left",bottom:"top",top:"bottom"},bc={start:"end",end:"start"};function Fn(e,t,n){return ge(e,Fe(t,n))}function $e(e,t){return typeof e=="function"?e(t):e}function Re(e){return e.split("-")[0]}function it(e){return e.split("-")[1]}function ei(e){return e==="x"?"y":"x"}function Jn(e){return e==="y"?"height":"width"}function Et(e){return["top","bottom"].includes(Re(e))?"y":"x"}function Qn(e){return ei(Et(e))}function yc(e,t,n){n===void 0&&(n=!1);const r=it(e),o=Qn(e),i=Jn(o);let s=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(s=Bt(s)),[s,Bt(s)]}function xc(e){const t=Bt(e);return[_n(e),t,_n(t)]}function _n(e){return e.replace(/start|end/g,t=>bc[t])}function wc(e,t,n){const r=["left","right"],o=["right","left"],i=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:r:t?r:o;case"left":case"right":return t?i:s;default:return[]}}function Sc(e,t,n,r){const o=it(e);let i=wc(Re(e),n==="start",r);return o&&(i=i.map(s=>s+"-"+o),t&&(i=i.concat(i.map(_n)))),i}function Bt(e){return e.replace(/left|right|bottom|top/g,t=>pc[t])}function Ec(e){return{top:0,right:0,bottom:0,left:0,...e}}function ti(e){return typeof e!="number"?Ec(e):{top:e,right:e,bottom:e,left:e}}function Ht(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function Vr(e,t,n){let{reference:r,floating:o}=e;const i=Et(t),s=Qn(t),l=Jn(s),a=Re(t),c=i==="y",u=r.x+r.width/2-o.width/2,f=r.y+r.height/2-o.height/2,h=r[l]/2-o[l]/2;let p;switch(a){case"top":p={x:u,y:r.y-o.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:f};break;case"left":p={x:r.x-o.width,y:f};break;default:p={x:r.x,y:r.y}}switch(it(t)){case"start":p[s]-=h*(n&&c?-1:1);break;case"end":p[s]+=h*(n&&c?-1:1);break}return p}const Tc=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:s}=n,l=i.filter(Boolean),a=await(s.isRTL==null?void 0:s.isRTL(t));let c=await s.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:f}=Vr(c,r,a),h=r,p={},d=0;for(let x=0;x<l.length;x++){const{name:E,fn:b}=l[x],{x:m,y:v,data:T,reset:w}=await b({x:u,y:f,initialPlacement:r,placement:h,strategy:o,middlewareData:p,rects:c,platform:s,elements:{reference:e,floating:t}});u=m??u,f=v??f,p={...p,[E]:{...p[E],...T}},w&&d<=50&&(d++,typeof w=="object"&&(w.placement&&(h=w.placement),w.rects&&(c=w.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:o}):w.rects),{x:u,y:f}=Vr(c,h,a)),x=-1)}return{x:u,y:f,placement:h,strategy:o,middlewareData:p}};async function mt(e,t){var n;t===void 0&&(t={});const{x:r,y:o,platform:i,rects:s,elements:l,strategy:a}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:h=!1,padding:p=0}=$e(t,e),d=ti(p),E=l[h?f==="floating"?"reference":"floating":f],b=Ht(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(E)))==null||n?E:E.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:c,rootBoundary:u,strategy:a})),m=f==="floating"?{...s.floating,x:r,y:o}:s.reference,v=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),T=await(i.isElement==null?void 0:i.isElement(v))?await(i.getScale==null?void 0:i.getScale(v))||{x:1,y:1}:{x:1,y:1},w=Ht(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:m,offsetParent:v,strategy:a}):m);return{top:(b.top-w.top+d.top)/T.y,bottom:(w.bottom-b.bottom+d.bottom)/T.y,left:(b.left-w.left+d.left)/T.x,right:(w.right-b.right+d.right)/T.x}}const Cc=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:i,platform:s,elements:l,middlewareData:a}=t,{element:c,padding:u=0}=$e(e,t)||{};if(c==null)return{};const f=ti(u),h={x:n,y:r},p=Qn(o),d=Jn(p),x=await s.getDimensions(c),E=p==="y",b=E?"top":"left",m=E?"bottom":"right",v=E?"clientHeight":"clientWidth",T=i.reference[d]+i.reference[p]-h[p]-i.floating[d],w=h[p]-i.reference[p],y=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c));let P=y?y[v]:0;(!P||!await(s.isElement==null?void 0:s.isElement(y)))&&(P=l.floating[v]||i.floating[d]);const C=T/2-w/2,D=P/2-x[d]/2-1,L=Fe(f[b],D),_=Fe(f[m],D),M=L,R=P-x[d]-_,J=P/2-x[d]/2+C,Z=Fn(M,J,R),ae=!a.arrow&&it(o)!=null&&J!==Z&&i.reference[d]/2-(J<M?L:_)-x[d]/2<0,le=ae?J<M?J-M:J-R:0;return{[p]:h[p]+le,data:{[p]:Z,centerOffset:J-Z-le,...ae&&{alignmentOffset:le}},reset:ae}}}),Pc=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:i,rects:s,initialPlacement:l,platform:a,elements:c}=t,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:d="none",flipAlignment:x=!0,...E}=$e(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const b=Re(o),m=Re(l)===l,v=await(a.isRTL==null?void 0:a.isRTL(c.floating)),T=h||(m||!x?[Bt(l)]:xc(l));!h&&d!=="none"&&T.push(...Sc(l,x,d,v));const w=[l,...T],y=await mt(t,E),P=[];let C=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&P.push(y[b]),f){const M=yc(o,s,v);P.push(y[M[0]],y[M[1]])}if(C=[...C,{placement:o,overflows:P}],!P.every(M=>M<=0)){var D,L;const M=(((D=i.flip)==null?void 0:D.index)||0)+1,R=w[M];if(R)return{data:{index:M,overflows:C},reset:{placement:R}};let J=(L=C.filter(Z=>Z.overflows[0]<=0).sort((Z,ae)=>Z.overflows[1]-ae.overflows[1])[0])==null?void 0:L.placement;if(!J)switch(p){case"bestFit":{var _;const Z=(_=C.map(ae=>[ae.placement,ae.overflows.filter(le=>le>0).reduce((le,Be)=>le+Be,0)]).sort((ae,le)=>ae[1]-le[1])[0])==null?void 0:_[0];Z&&(J=Z);break}case"initialPlacement":J=l;break}if(o!==J)return{reset:{placement:J}}}return{}}}};function Gr(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function jr(e){return vc.some(t=>e[t]>=0)}const Ic=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...o}=$e(e,t);switch(r){case"referenceHidden":{const i=await mt(t,{...o,elementContext:"reference"}),s=Gr(i,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:jr(s)}}}case"escaped":{const i=await mt(t,{...o,altBoundary:!0}),s=Gr(i,n.floating);return{data:{escapedOffsets:s,escaped:jr(s)}}}default:return{}}}}};async function Oc(e,t){const{placement:n,platform:r,elements:o}=e,i=await(r.isRTL==null?void 0:r.isRTL(o.floating)),s=Re(n),l=it(n),a=Et(n)==="y",c=["left","top"].includes(s)?-1:1,u=i&&a?-1:1,f=$e(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:d}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return l&&typeof d=="number"&&(p=l==="end"?d*-1:d),a?{x:p*u,y:h*c}:{x:h*c,y:p*u}}const Ac=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:i,placement:s,middlewareData:l}=t,a=await Oc(t,e);return s===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:o+a.x,y:i+a.y,data:{...a,placement:s}}}}},Dc=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:i=!0,crossAxis:s=!1,limiter:l={fn:E=>{let{x:b,y:m}=E;return{x:b,y:m}}},...a}=$e(e,t),c={x:n,y:r},u=await mt(t,a),f=Et(Re(o)),h=ei(f);let p=c[h],d=c[f];if(i){const E=h==="y"?"top":"left",b=h==="y"?"bottom":"right",m=p+u[E],v=p-u[b];p=Fn(m,p,v)}if(s){const E=f==="y"?"top":"left",b=f==="y"?"bottom":"right",m=d+u[E],v=d-u[b];d=Fn(m,d,v)}const x=l.fn({...t,[h]:p,[f]:d});return{...x,data:{x:x.x-n,y:x.y-r}}}}},Lc=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:o,elements:i}=t,{apply:s=()=>{},...l}=$e(e,t),a=await mt(t,l),c=Re(n),u=it(n),f=Et(n)==="y",{width:h,height:p}=r.floating;let d,x;c==="top"||c==="bottom"?(d=c,x=u===(await(o.isRTL==null?void 0:o.isRTL(i.floating))?"start":"end")?"left":"right"):(x=c,d=u==="end"?"top":"bottom");const E=p-a[d],b=h-a[x],m=!t.middlewareData.shift;let v=E,T=b;if(f){const y=h-a.left-a.right;T=u||m?Fe(b,y):y}else{const y=p-a.top-a.bottom;v=u||m?Fe(E,y):y}if(m&&!u){const y=ge(a.left,0),P=ge(a.right,0),C=ge(a.top,0),D=ge(a.bottom,0);f?T=h-2*(y!==0||P!==0?y+P:ge(a.left,a.right)):v=p-2*(C!==0||D!==0?C+D:ge(a.top,a.bottom))}await s({...t,availableWidth:T,availableHeight:v});const w=await o.getDimensions(i.floating);return h!==w.width||p!==w.height?{reset:{rects:!0}}:{}}}};function Ne(e){return ni(e)?(e.nodeName||"").toLowerCase():"#document"}function ve(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function De(e){var t;return(t=(ni(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function ni(e){return e instanceof Node||e instanceof ve(e).Node}function Ae(e){return e instanceof Element||e instanceof ve(e).Element}function Te(e){return e instanceof HTMLElement||e instanceof ve(e).HTMLElement}function Wr(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ve(e).ShadowRoot}function Tt(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=xe(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(o)}function Mc(e){return["table","td","th"].includes(Ne(e))}function er(e){const t=tr(),n=xe(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Fc(e){let t=nt(e);for(;Te(t)&&!zt(t);){if(er(t))return t;t=nt(t)}return null}function tr(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function zt(e){return["html","body","#document"].includes(Ne(e))}function xe(e){return ve(e).getComputedStyle(e)}function Xt(e){return Ae(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function nt(e){if(Ne(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Wr(e)&&e.host||De(e);return Wr(t)?t.host:t}function ri(e){const t=nt(e);return zt(t)?e.ownerDocument?e.ownerDocument.body:e.body:Te(t)&&Tt(t)?t:ri(t)}function vt(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=ri(e),i=o===((r=e.ownerDocument)==null?void 0:r.body),s=ve(o);return i?t.concat(s,s.visualViewport||[],Tt(o)?o:[],s.frameElement&&n?vt(s.frameElement):[]):t.concat(o,vt(o,[],n))}function oi(e){const t=xe(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=Te(e),i=o?e.offsetWidth:n,s=o?e.offsetHeight:r,l=Nt(n)!==i||Nt(r)!==s;return l&&(n=i,r=s),{width:n,height:r,$:l}}function nr(e){return Ae(e)?e:e.contextElement}function qe(e){const t=nr(e);if(!Te(t))return _e(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:i}=oi(t);let s=(i?Nt(n.width):n.width)/r,l=(i?Nt(n.height):n.height)/o;return(!s||!Number.isFinite(s))&&(s=1),(!l||!Number.isFinite(l))&&(l=1),{x:s,y:l}}const _c=_e(0);function ii(e){const t=ve(e);return!tr()||!t.visualViewport?_c:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Rc(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ve(e)?!1:t}function Ue(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),i=nr(e);let s=_e(1);t&&(r?Ae(r)&&(s=qe(r)):s=qe(e));const l=Rc(i,n,r)?ii(i):_e(0);let a=(o.left+l.x)/s.x,c=(o.top+l.y)/s.y,u=o.width/s.x,f=o.height/s.y;if(i){const h=ve(i),p=r&&Ae(r)?ve(r):r;let d=h,x=d.frameElement;for(;x&&r&&p!==d;){const E=qe(x),b=x.getBoundingClientRect(),m=xe(x),v=b.left+(x.clientLeft+parseFloat(m.paddingLeft))*E.x,T=b.top+(x.clientTop+parseFloat(m.paddingTop))*E.y;a*=E.x,c*=E.y,u*=E.x,f*=E.y,a+=v,c+=T,d=ve(x),x=d.frameElement}}return Ht({width:u,height:f,x:a,y:c})}const Nc=[":popover-open",":modal"];function si(e){return Nc.some(t=>{try{return e.matches(t)}catch{return!1}})}function Bc(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const i=o==="fixed",s=De(r),l=t?si(t.floating):!1;if(r===s||l&&i)return n;let a={scrollLeft:0,scrollTop:0},c=_e(1);const u=_e(0),f=Te(r);if((f||!f&&!i)&&((Ne(r)!=="body"||Tt(s))&&(a=Xt(r)),Te(r))){const h=Ue(r);c=qe(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-a.scrollLeft*c.x+u.x,y:n.y*c.y-a.scrollTop*c.y+u.y}}function Hc(e){return Array.from(e.getClientRects())}function ai(e){return Ue(De(e)).left+Xt(e).scrollLeft}function kc(e){const t=De(e),n=Xt(e),r=e.ownerDocument.body,o=ge(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=ge(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+ai(e);const l=-n.scrollTop;return xe(r).direction==="rtl"&&(s+=ge(t.clientWidth,r.clientWidth)-o),{width:o,height:i,x:s,y:l}}function Kc(e,t){const n=ve(e),r=De(e),o=n.visualViewport;let i=r.clientWidth,s=r.clientHeight,l=0,a=0;if(o){i=o.width,s=o.height;const c=tr();(!c||c&&t==="fixed")&&(l=o.offsetLeft,a=o.offsetTop)}return{width:i,height:s,x:l,y:a}}function Uc(e,t){const n=Ue(e,!0,t==="fixed"),r=n.top+e.clientTop,o=n.left+e.clientLeft,i=Te(e)?qe(e):_e(1),s=e.clientWidth*i.x,l=e.clientHeight*i.y,a=o*i.x,c=r*i.y;return{width:s,height:l,x:a,y:c}}function zr(e,t,n){let r;if(t==="viewport")r=Kc(e,n);else if(t==="document")r=kc(De(e));else if(Ae(t))r=Uc(t,n);else{const o=ii(e);r={...t,x:t.x-o.x,y:t.y-o.y}}return Ht(r)}function li(e,t){const n=nt(e);return n===t||!Ae(n)||zt(n)?!1:xe(n).position==="fixed"||li(n,t)}function $c(e,t){const n=t.get(e);if(n)return n;let r=vt(e,[],!1).filter(l=>Ae(l)&&Ne(l)!=="body"),o=null;const i=xe(e).position==="fixed";let s=i?nt(e):e;for(;Ae(s)&&!zt(s);){const l=xe(s),a=er(s);!a&&l.position==="fixed"&&(o=null),(i?!a&&!o:!a&&l.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||Tt(s)&&!a&&li(e,s))?r=r.filter(u=>u!==s):o=l,s=nt(s)}return t.set(e,r),r}function Vc(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const s=[...n==="clippingAncestors"?$c(t,this._c):[].concat(n),r],l=s[0],a=s.reduce((c,u)=>{const f=zr(t,u,o);return c.top=ge(f.top,c.top),c.right=Fe(f.right,c.right),c.bottom=Fe(f.bottom,c.bottom),c.left=ge(f.left,c.left),c},zr(t,l,o));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function Gc(e){const{width:t,height:n}=oi(e);return{width:t,height:n}}function jc(e,t,n){const r=Te(t),o=De(t),i=n==="fixed",s=Ue(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const a=_e(0);if(r||!r&&!i)if((Ne(t)!=="body"||Tt(o))&&(l=Xt(t)),r){const f=Ue(t,!0,i,t);a.x=f.x+t.clientLeft,a.y=f.y+t.clientTop}else o&&(a.x=ai(o));const c=s.left+l.scrollLeft-a.x,u=s.top+l.scrollTop-a.y;return{x:c,y:u,width:s.width,height:s.height}}function Xr(e,t){return!Te(e)||xe(e).position==="fixed"?null:t?t(e):e.offsetParent}function ci(e,t){const n=ve(e);if(!Te(e)||si(e))return n;let r=Xr(e,t);for(;r&&Mc(r)&&xe(r).position==="static";)r=Xr(r,t);return r&&(Ne(r)==="html"||Ne(r)==="body"&&xe(r).position==="static"&&!er(r))?n:r||Fc(e)||n}const Wc=async function(e){const t=this.getOffsetParent||ci,n=this.getDimensions;return{reference:jc(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,...await n(e.floating)}}};function zc(e){return xe(e).direction==="rtl"}const ui={convertOffsetParentRelativeRectToViewportRelativeRect:Bc,getDocumentElement:De,getClippingRect:Vc,getOffsetParent:ci,getElementRects:Wc,getClientRects:Hc,getDimensions:Gc,getScale:qe,isElement:Ae,isRTL:zc};function Xc(e,t){let n=null,r;const o=De(e);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function s(l,a){l===void 0&&(l=!1),a===void 0&&(a=1),i();const{left:c,top:u,width:f,height:h}=e.getBoundingClientRect();if(l||t(),!f||!h)return;const p=Lt(u),d=Lt(o.clientWidth-(c+f)),x=Lt(o.clientHeight-(u+h)),E=Lt(c),m={rootMargin:-p+"px "+-d+"px "+-x+"px "+-E+"px",threshold:ge(0,Fe(1,a))||1};let v=!0;function T(w){const y=w[0].intersectionRatio;if(y!==a){if(!v)return s();y?s(!1,y):r=setTimeout(()=>{s(!1,1e-7)},100)}v=!1}try{n=new IntersectionObserver(T,{...m,root:o.ownerDocument})}catch{n=new IntersectionObserver(T,m)}n.observe(e)}return s(!0),i}function Yc(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:a=!1}=r,c=nr(e),u=o||i?[...c?vt(c):[],...vt(t)]:[];u.forEach(b=>{o&&b.addEventListener("scroll",n,{passive:!0}),i&&b.addEventListener("resize",n)});const f=c&&l?Xc(c,n):null;let h=-1,p=null;s&&(p=new ResizeObserver(b=>{let[m]=b;m&&m.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var v;(v=p)==null||v.observe(t)})),n()}),c&&!a&&p.observe(c),p.observe(t));let d,x=a?Ue(e):null;a&&E();function E(){const b=Ue(e);x&&(b.x!==x.x||b.y!==x.y||b.width!==x.width||b.height!==x.height)&&n(),x=b,d=requestAnimationFrame(E)}return n(),()=>{var b;u.forEach(m=>{o&&m.removeEventListener("scroll",n),i&&m.removeEventListener("resize",n)}),f?.(),(b=p)==null||b.disconnect(),p=null,a&&cancelAnimationFrame(d)}}const qc=Dc,Zc=Pc,Jc=Lc,Qc=Ic,eu=Cc,tu=(e,t,n)=>{const r=new Map,o={platform:ui,...n},i={...o.platform,_c:r};return Tc(e,t,{...o,platform:i})};function Yr(e){const{x:t=0,y:n=0,width:r=0,height:o=0}=e??{};if(typeof DOMRect=="function")return new DOMRect(t,n,r,o);const i={x:t,y:n,width:r,height:o,top:n,right:t+r,bottom:n+o,left:t};return{...i,toJSON:()=>i}}function nu(e,t){return{contextElement:e,getBoundingClientRect:()=>{const r=t(e);return r?Yr(r):e?e.getBoundingClientRect():Yr()}}}function ru(e){return/^(?:top|bottom|left|right)(?:-(?:start|end))?$/.test(e)}const ou={top:"bottom",right:"left",bottom:"top",left:"right"};function iu(e,t){const[n,r]=e.split("-"),o=ou[n];return r?n==="left"||n==="right"?`${o} ${r==="start"?"top":"bottom"}`:r==="start"?`${o} ${t==="rtl"?"right":"left"}`:`${o} ${t==="rtl"?"left":"right"}`:`${o} center`}function rr(e){e=z({getAnchorRect:f=>f?.getBoundingClientRect(),placement:"bottom",gutter:0,shift:0,flip:!0,slide:!0,overlap:!1,sameWidth:!1,fitViewport:!1,hideWhenDetached:!1,detachedPadding:0,arrowPadding:4,overflowPadding:8},e);const[t,n]=I(),[r,o]=I(),[i,s]=I(e.placement),l=()=>nu(e.anchorRef(),e.getAnchorRect),{direction:a}=Vt();async function c(){const f=l(),h=t(),p=r();if(!f||!h)return;const d=(p?.clientHeight||0)/2,x=typeof e.gutter=="number"?e.gutter+d:e.gutter??d;h.style.setProperty("--kb-popper-content-overflow-padding",`${e.overflowPadding}px`),f.getBoundingClientRect();const E=[Ac(({placement:w})=>{const y=!!w.split("-")[1];return{mainAxis:x,crossAxis:y?void 0:e.shift,alignmentAxis:e.shift}})];if(e.flip!==!1){const w=typeof e.flip=="string"?e.flip.split(" "):void 0;if(w!==void 0&&!w.every(ru))throw new Error("`flip` expects a spaced-delimited list of placements");E.push(Zc({padding:e.overflowPadding,fallbackPlacements:w}))}(e.slide||e.overlap)&&E.push(qc({mainAxis:e.slide,crossAxis:e.overlap,padding:e.overflowPadding})),E.push(Jc({padding:e.overflowPadding,apply({availableWidth:w,availableHeight:y,rects:P}){const C=Math.round(P.reference.width);w=Math.floor(w),y=Math.floor(y),h.style.setProperty("--kb-popper-anchor-width",`${C}px`),h.style.setProperty("--kb-popper-content-available-width",`${w}px`),h.style.setProperty("--kb-popper-content-available-height",`${y}px`),e.sameWidth&&(h.style.width=`${C}px`),e.fitViewport&&(h.style.maxWidth=`${w}px`,h.style.maxHeight=`${y}px`)}})),e.hideWhenDetached&&E.push(Qc({padding:e.detachedPadding})),p&&E.push(eu({element:p,padding:e.arrowPadding}));const b=await tu(f,h,{placement:e.placement,strategy:"absolute",middleware:E,platform:{...ui,isRTL:()=>a()==="rtl"}});if(s(b.placement),e.onCurrentPlacementChange?.(b.placement),!h)return;h.style.setProperty("--kb-popper-content-transform-origin",iu(b.placement,a()));const m=Math.round(b.x),v=Math.round(b.y);let T;if(e.hideWhenDetached&&(T=b.middlewareData.hide?.referenceHidden?"hidden":"visible"),Object.assign(h.style,{top:"0",left:"0",transform:`translate3d(${m}px, ${v}px, 0)`,visibility:T}),p&&b.middlewareData.arrow){const{x:w,y}=b.middlewareData.arrow,P=b.placement.split("-")[0];Object.assign(p.style,{left:w!=null?`${w}px`:"",top:y!=null?`${y}px`:"",[P]:"100%"})}}A(()=>{const f=l(),h=t();if(!f||!h)return;const p=Yc(f,h,c,{elementResize:typeof ResizeObserver=="function"});k(p)}),A(()=>{const f=t(),h=e.contentRef();!f||!h||queueMicrotask(()=>{f.style.zIndex=getComputedStyle(h).zIndex})});const u={currentPlacement:i,contentRef:()=>e.contentRef(),setPositionerRef:n,setArrowRef:o};return g(Zo.Provider,{value:u,get children(){return e.children}})}const di=re();function su(){const e=oe(di);if(e===void 0)throw new Error("[kobalte]: `useListboxContext` must be used within a `Listbox` component");return e}const fi=re();function au(){const e=oe(fi);if(e===void 0)throw new Error("[kobalte]: `useListboxItemContext` must be used within a `Listbox.Item` component");return e}function lu(e){let t;const n=su(),r=`${n.generateId("item")}-${we()}`;e=z({id:r},e);const[o,i]=K(e,["ref","item","aria-label","aria-labelledby","aria-describedby","onPointerMove","onPointerDown","onPointerUp","onClick","onKeyDown","onMouseDown","onFocus"]),[s,l]=I(),[a,c]=I(),u=()=>n.listState().selectionManager(),f=()=>u().focusedKey()===o.item.key,h=Uo({key:()=>o.item.key,selectionManager:u,shouldSelectOnPressUp:n.shouldSelectOnPressUp,allowsDifferentPressOrigin:()=>n.shouldSelectOnPressUp()&&n.shouldFocusOnHover(),shouldUseVirtualFocus:n.shouldUseVirtualFocus,disabled:()=>o.item.disabled},()=>t),p=()=>{if(u().selectionMode()!=="none")return h.isSelected()},d=j(()=>!(yt()&&ks())),x=()=>d()?o["aria-label"]:void 0,E=()=>d()?s():void 0,b=()=>d()?a():void 0,m=()=>{if(!n.isVirtualized())return;const P=n.listState().collection().getItem(o.item.key)?.index;return P!=null?P+1:void 0},v=()=>{if(n.isVirtualized())return na(n.listState().collection())},T=P=>{q(P,o.onPointerMove),P.pointerType==="mouse"&&!h.isDisabled()&&n.shouldFocusOnHover()&&(se(P.currentTarget),u().setFocused(!0),u().setFocusedKey(o.item.key))},w=j(()=>({"data-disabled":h.isDisabled()?"":void 0,"data-selected":h.isSelected()?"":void 0,"data-highlighted":f()?"":void 0})),y={isSelected:h.isSelected,dataset:w,generateId:Ce(()=>i.id),registerLabelId:ne(l),registerDescriptionId:ne(c)};return g(fi.Provider,{value:y,get children(){return g(te,F({as:"li",role:"option",get tabIndex(){return h.tabIndex()},get"aria-disabled"(){return h.isDisabled()},get"aria-selected"(){return p()},get"aria-label"(){return x()},get"aria-labelledby"(){return E()},get"aria-describedby"(){return b()},get"aria-posinset"(){return m()},get"aria-setsize"(){return v()},get"data-key"(){return h.dataKey()},get onPointerDown(){return ee([o.onPointerDown,h.onPointerDown])},get onPointerUp(){return ee([o.onPointerUp,h.onPointerUp])},get onClick(){return ee([o.onClick,h.onClick])},get onKeyDown(){return ee([o.onKeyDown,h.onKeyDown])},get onMouseDown(){return ee([o.onMouseDown,h.onMouseDown])},get onFocus(){return ee([o.onFocus,h.onFocus])},onPointerMove:T},w,i))}})}function cu(e){const t=au();e=z({id:t.generateId("indicator")},e);const[n,r]=K(e,["forceMount"]);return g(W,{get when(){return n.forceMount||t.isSelected()},get children(){return g(te,F({as:"div","aria-hidden":"true"},()=>t.dataset(),r))}})}function uu(e){let t;const n=`listbox-${we()}`;e=z({id:n,selectionMode:"single",virtualized:!1},e);const[r,o]=K(e,["ref","children","renderItem","renderSection","value","defaultValue","onChange","options","optionValue","optionTextValue","optionDisabled","optionGroupChildren","state","keyboardDelegate","autoFocus","selectionMode","shouldFocusWrap","shouldUseVirtualFocus","shouldSelectOnPressUp","shouldFocusOnHover","allowDuplicateSelectionEvents","disallowEmptySelection","selectionBehavior","selectOnFocus","disallowTypeAhead","allowsTabNavigation","virtualized","scrollToItem","scrollRef","onKeyDown","onMouseDown","onFocusIn","onFocusOut"]),i=j(()=>r.state?r.state:Yn({selectedKeys:()=>r.value,defaultSelectedKeys:()=>r.defaultValue,onSelectionChange:r.onChange,allowDuplicateSelectionEvents:()=>S(r.allowDuplicateSelectionEvents),disallowEmptySelection:()=>S(r.disallowEmptySelection),selectionBehavior:()=>S(r.selectionBehavior),selectionMode:()=>S(r.selectionMode),dataSource:()=>r.options??[],getKey:()=>r.optionValue,getTextValue:()=>r.optionTextValue,getDisabled:()=>r.optionDisabled,getSectionChildren:()=>r.optionGroupChildren})),s=Vo({selectionManager:()=>i().selectionManager(),collection:()=>i().collection(),autoFocus:()=>S(r.autoFocus),shouldFocusWrap:()=>S(r.shouldFocusWrap),keyboardDelegate:()=>r.keyboardDelegate,disallowEmptySelection:()=>S(r.disallowEmptySelection),selectOnFocus:()=>S(r.selectOnFocus),disallowTypeAhead:()=>S(r.disallowTypeAhead),shouldUseVirtualFocus:()=>S(r.shouldUseVirtualFocus),allowsTabNavigation:()=>S(r.allowsTabNavigation),isVirtualized:()=>r.virtualized,scrollToKey:()=>r.scrollToItem},()=>t,()=>r.scrollRef?.()),l={listState:i,generateId:Ce(()=>o.id),shouldUseVirtualFocus:()=>e.shouldUseVirtualFocus,shouldSelectOnPressUp:()=>e.shouldSelectOnPressUp,shouldFocusOnHover:()=>e.shouldFocusOnHover,isVirtualized:()=>r.virtualized};return g(di.Provider,{value:l,get children(){return g(te,F({as:"ul",role:"listbox",get tabIndex(){return s.tabIndex()},get"aria-multiselectable"(){return i().selectionManager().selectionMode()==="multiple"?!0:void 0},get onKeyDown(){return ee([r.onKeyDown,s.onKeyDown])},get onMouseDown(){return ee([r.onMouseDown,s.onMouseDown])},get onFocusIn(){return ee([r.onFocusIn,s.onFocusIn])},get onFocusOut(){return ee([r.onFocusOut,s.onFocusOut])}},o,{get children(){return g(W,{get when(){return!r.virtualized},get fallback(){return r.children?.(i().collection)},get children(){return g(Os,{get each(){return[...i().collection()]},by:"key",children:a=>g(Nn,{get children(){return[g(Ze,{get when(){return a().type==="section"},get children(){return r.renderSection?.(a())}}),g(Ze,{get when(){return a().type==="item"},get children(){return r.renderItem?.(a())}})]}})})}})}}))}})}const hi=re();function gi(){return oe(hi)}function st(){const e=gi();if(e===void 0)throw new Error("[kobalte]: `useMenuContext` must be used within a `Menu` component");return e}const mi=re();function Ve(){const e=oe(mi);if(e===void 0)throw new Error("[kobalte]: `useMenuRootContext` must be used within a `MenuRoot` component");return e}/*!
 * Portions of this file are based on code from radix-ui-primitives.
 * MIT Licensed, Copyright (c) 2022 WorkOS.
 *
 * Credits to the Radix UI team:
 * https://github.com/radix-ui/primitives/blob/81b25f4b40c54f72aeb106ca0e64e1e09655153e/packages/react/menu/src/Menu.tsx
 */function du(e,t){return t?go([e.clientX,e.clientY],t):!1}function fu(e){const t=Ve(),n=Wo(),r=gi();e=z({placement:"bottom-start"},e);const[o,i]=K(e,["open","defaultOpen","onOpenChange"]);let s=0,l=null,a="right";const[c,u]=I(),[f,h]=I(),[p,d]=I(),[x,E]=I(),[b,m]=I(!0),[v,T]=I(i.placement),[w,y]=I([]),[P,C]=I([]),{DomCollectionProvider:D}=rc({items:P,onItemsChange:C}),L=xt({open:()=>o.open,defaultOpen:()=>o.defaultOpen,onOpenChange:U=>o.onOpenChange?.(U)}),_=Je(()=>t.forceMount()||L.isOpen()),M=Yn({selectionMode:"none",dataSource:P}),R=U=>{m(U),L.open()},J=(U=!1)=>{L.close(),U&&r&&r.close(!0)},Z=U=>{m(U),L.toggle()},ae=()=>{const U=x();U&&(se(U),M.selectionManager().setFocused(!0),M.selectionManager().setFocusedKey(void 0))},le=U=>{y(N=>[...N,U]);const je=r?.registerNestedMenu(U);return()=>{y(N=>wn(N,U)),je?.()}},Be=U=>a===l?.side&&du(U,l?.area),at=U=>{Be(U)&&U.preventDefault()},Zt=U=>{Be(U)||ae()},Jt=U=>{Be(U)&&U.preventDefault()};jn({isDisabled:()=>!(r==null&&L.isOpen()&&t.isModal()),targets:()=>[x(),...w()].filter(Boolean)}),A(()=>{const U=x();if(!U||!r)return;const je=r.registerNestedMenu(U);k(()=>{je()})});const Qt={dataset:j(()=>({"data-expanded":L.isOpen()?"":void 0,"data-closed":L.isOpen()?void 0:""})),isOpen:L.isOpen,contentPresence:_,currentPlacement:v,pointerGraceTimeoutId:()=>s,autoFocus:b,listState:()=>M,parentMenuContext:()=>r,triggerRef:p,contentRef:x,triggerId:c,contentId:f,setTriggerRef:d,setContentRef:E,open:R,close:J,toggle:Z,focusContent:ae,onItemEnter:at,onItemLeave:Zt,onTriggerLeave:Jt,setPointerDir:U=>a=U,setPointerGraceTimeoutId:U=>s=U,setPointerGraceIntent:U=>l=U,registerNestedMenu:le,registerItemToParentDomCollection:n?.registerItem,registerTriggerId:ne(u),registerContentId:ne(h)};return g(D,{get children(){return g(hi.Provider,{value:Qt,get children(){return g(rr,F({anchorRef:p,contentRef:x,onCurrentPlacementChange:T},i))}})}})}const vi=re();function vf(){const e=oe(vi);if(e===void 0)throw new Error("[kobalte]: `useMenuItemContext` must be used within a `Menu.Item` component");return e}function hu(e){let t;const n=Ve(),r=st();e=z({id:n.generateId(`item-${we()}`)},e);const[o,i]=K(e,["ref","textValue","disabled","closeOnSelect","checked","indeterminate","onSelect","onPointerMove","onPointerLeave","onPointerDown","onPointerUp","onClick","onKeyDown","onMouseDown","onFocus"]),[s,l]=I(),[a,c]=I(),[u,f]=I(),h=()=>r.listState().selectionManager(),p=()=>i.id,d=()=>h().focusedKey()===p(),x=()=>{o.onSelect?.(),o.closeOnSelect&&r.close(!0)};oc({getItem:()=>({ref:()=>t,type:"item",key:p(),textValue:o.textValue??u()?.textContent??t?.textContent??"",disabled:o.disabled??!1})});const E=Uo({key:p,selectionManager:h,shouldSelectOnPressUp:!0,allowsDifferentPressOrigin:!0,disabled:()=>o.disabled},()=>t),b=C=>{q(C,o.onPointerMove),C.pointerType==="mouse"&&(o.disabled?r.onItemLeave(C):(r.onItemEnter(C),C.defaultPrevented||(se(C.currentTarget),r.listState().selectionManager().setFocused(!0),r.listState().selectionManager().setFocusedKey(p()))))},m=C=>{q(C,o.onPointerLeave),C.pointerType==="mouse"&&r.onItemLeave(C)},v=C=>{q(C,o.onPointerUp),!o.disabled&&C.button===0&&x()},T=C=>{if(q(C,o.onKeyDown),!C.repeat&&!o.disabled)switch(C.key){case"Enter":case" ":x();break}},w=j(()=>{if(o.indeterminate)return"mixed";if(o.checked!=null)return o.checked}),y=j(()=>({"data-indeterminate":o.indeterminate?"":void 0,"data-checked":o.checked&&!o.indeterminate?"":void 0,"data-disabled":o.disabled?"":void 0,"data-highlighted":d()?"":void 0})),P={isChecked:()=>o.checked,dataset:y,setLabelRef:f,generateId:Ce(()=>i.id),registerLabel:ne(l),registerDescription:ne(c)};return g(vi.Provider,{value:P,get children(){return g(te,F({as:"div",get tabIndex(){return E.tabIndex()},get"aria-checked"(){return w()},get"aria-disabled"(){return o.disabled},get"aria-labelledby"(){return s()},get"aria-describedby"(){return a()},get"data-key"(){return E.dataKey()},get onPointerDown(){return ee([o.onPointerDown,E.onPointerDown])},get onPointerUp(){return ee([v,E.onPointerUp])},get onClick(){return ee([o.onClick,E.onClick])},get onKeyDown(){return ee([T,E.onKeyDown])},get onMouseDown(){return ee([o.onMouseDown,E.onMouseDown])},get onFocus(){return ee([o.onFocus,E.onFocus])},onPointerMove:b,onPointerLeave:m},y,i))}})}function gu(e){let t;const n=Ve(),r=st();e=z({id:n.generateId(`content-${we()}`)},e);const[o,i]=K(e,["ref","id","style","onOpenAutoFocus","onCloseAutoFocus","onEscapeKeyDown","onFocusOutside","onPointerEnter","onPointerMove","onKeyDown","onMouseDown","onFocusIn","onFocusOut"]);let s=0;const l=()=>r.parentMenuContext()==null&&n.isModal(),a=Vo({selectionManager:r.listState().selectionManager,collection:r.listState().collection,autoFocus:r.autoFocus,deferAutoFocus:!0,shouldFocusWrap:!0,disallowTypeAhead:()=>!r.listState().selectionManager().isFocused()},()=>t);Gn({trapFocus:()=>l()&&r.isOpen(),onMountAutoFocus:o.onOpenAutoFocus,onUnmountAutoFocus:o.onCloseAutoFocus},()=>t);const c=d=>{ye(d.currentTarget,d.target)&&d.key==="Tab"&&r.isOpen()&&d.preventDefault()},u=d=>{o.onEscapeKeyDown?.(d),r.close(!0)},f=d=>{o.onFocusOutside?.(d),n.isModal()&&d.preventDefault()},h=d=>{q(d,o.onPointerEnter),r.isOpen()&&(r.parentMenuContext()?.listState().selectionManager().setFocused(!1),r.parentMenuContext()?.listState().selectionManager().setFocusedKey(void 0))},p=d=>{if(q(d,o.onPointerMove),d.pointerType!=="mouse")return;const x=d.target,E=s!==d.clientX;ye(d.currentTarget,x)&&E&&(r.setPointerDir(d.clientX>s?"right":"left"),s=d.clientX)};return A(()=>k(r.registerContentId(o.id))),g(W,{get when(){return r.contentPresence.isPresent()},get children(){return g(Zn,{get children(){return g(Wt,F({role:"menu",get id(){return o.id},get tabIndex(){return a.tabIndex()},get disableOutsidePointerEvents(){return l()&&r.isOpen()},get excludedElements(){return[r.triggerRef]},bypassTopMostLayerCheck:!0,get style(){return{"--kb-menu-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative",...o.style}},get"aria-labelledby"(){return r.triggerId()},onEscapeKeyDown:u,onFocusOutside:f,get onDismiss(){return r.close},get onKeyDown(){return ee([o.onKeyDown,a.onKeyDown,c])},get onMouseDown(){return ee([o.onMouseDown,a.onMouseDown])},get onFocusIn(){return ee([o.onFocusIn,a.onFocusIn])},get onFocusOut(){return ee([o.onFocusOut,a.onFocusOut])},onPointerEnter:h,onPointerMove:p},()=>r.dataset(),i))}})}})}function mu(e){let t;const n=Ve(),r=st(),[o,i]=K(e,["ref"]);return Wn({ownerRef:()=>t,isDisabled:()=>!(r.isOpen()&&(n.isModal()||n.preventScroll()))}),g(gu,i)}const pi=re();function vu(){const e=oe(pi);if(e===void 0)throw new Error("[kobalte]: `useMenuGroupContext` must be used within a `Menu.Group` component");return e}function pu(e){const t=Ve();e=z({id:t.generateId(`group-${we()}`)},e);const[n,r]=I(),o={generateId:Ce(()=>e.id),registerLabelId:ne(r)};return g(pi.Provider,{value:o,get children(){return g(te,F({as:"div",role:"group",get"aria-labelledby"(){return n()}},e))}})}function bu(e){const t=vu();e=z({id:t.generateId("label")},e);const[n,r]=K(e,["id"]);return A(()=>k(t.registerLabelId(n.id))),g(te,F({as:"span",get id(){return n.id},"aria-hidden":"true"},r))}function Le(e){return g(hu,F({role:"menuitem",closeOnSelect:!0},e))}function yu(e){const t=st();return g(W,{get when(){return t.contentPresence.isPresent()},get children(){return g(kt,e)}})}function xu(e){const t=`menu-${we()}`;e=z({id:t,modal:!0,preventScroll:!1},e);const[n,r]=K(e,["id","modal","preventScroll","forceMount","open","defaultOpen","onOpenChange"]),o=xt({open:()=>n.open,defaultOpen:()=>n.defaultOpen,onOpenChange:s=>n.onOpenChange?.(s)}),i={isModal:()=>n.modal??!0,preventScroll:()=>n.preventScroll??!1,forceMount:()=>n.forceMount??!1,generateId:Ce(()=>n.id)};return g(mi.Provider,{value:i,get children(){return g(fu,F({get open(){return o.isOpen()},get onOpenChange(){return o.setIsOpen}},r))}})}function wu(e){const t=Ve(),n=st();e=z({id:t.generateId("trigger")},e);const[r,o]=K(e,["ref","id","disabled","onPointerDown","onClick","onKeyDown"]),i=a=>{q(a,r.onPointerDown),a.currentTarget.dataset.pointerType=a.pointerType,!r.disabled&&a.pointerType!=="touch"&&a.button===0&&n.toggle(!0)},s=a=>{q(a,r.onClick),!r.disabled&&a.currentTarget.dataset.pointerType==="touch"&&n.toggle(!0)},l=a=>{if(q(a,r.onKeyDown),!r.disabled)switch(a.key){case"Enter":case" ":case"ArrowDown":a.stopPropagation(),a.preventDefault(),n.toggle("first");break;case"ArrowUp":a.stopPropagation(),a.preventDefault(),n.toggle("last");break}};return A(()=>k(n.registerTriggerId(r.id))),g(St,F({get id(){return r.id},get disabled(){return r.disabled},"aria-haspopup":"true",get"aria-expanded"(){return n.isOpen()},get"aria-controls"(){return n.isOpen()?n.contentId():void 0},onPointerDown:i,onClick:s,onKeyDown:l},()=>n.dataset(),o))}function Su(e){const t=Ve(),n=st(),[r,o]=K(e,["onCloseAutoFocus","onInteractOutside"]);let i=!1;return g(mu,F({onCloseAutoFocus:a=>{r.onCloseAutoFocus?.(a),i||se(n.triggerRef()),i=!1,a.preventDefault()},onInteractOutside:a=>{r.onInteractOutside?.(a),(!t.isModal()||a.detail.isContextMenu)&&(i=!0)}},o))}function Eu(e){const t=`dropdownmenu-${we()}`;return e=z({id:t},e),g(xu,e)}const bi=re();function Ge(){const e=oe(bi);if(e===void 0)throw new Error("[kobalte]: `useSelectContext` must be used within a `Select` component");return e}function Tu(e){let t;const n=Ge(),[r,o]=K(e,["ref","id","style","onCloseAutoFocus","onFocusOutside"]),i=l=>{n.close()},s=l=>{r.onFocusOutside?.(l),n.isOpen()&&n.isModal()&&l.preventDefault()};return jn({isDisabled:()=>!(n.isOpen()&&n.isModal()),targets:()=>[]}),Wn({ownerRef:()=>t,isDisabled:()=>!(n.isOpen()&&(n.isModal()||n.preventScroll()))}),Gn({trapFocus:()=>n.isOpen()&&n.isModal(),onMountAutoFocus:l=>{l.preventDefault()},onUnmountAutoFocus:l=>{r.onCloseAutoFocus?.(l),l.defaultPrevented||(se(n.triggerRef()),l.preventDefault())}},()=>t),g(W,{get when(){return n.contentPresence.isPresent()},get children(){return g(Zn,{get children(){return g(Wt,F({get disableOutsidePointerEvents(){return n.isModal()&&n.isOpen()},get excludedElements(){return[n.triggerRef]},get style(){return{"--kb-select-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative",...r.style}},onEscapeKeyDown:i,onFocusOutside:s,get onDismiss(){return n.close}},()=>n.dataset(),o))}})}})}function Cu(e){const t=Ge();return e=z({children:"▼"},e),g(te,F({as:"span","aria-hidden":"true"},()=>t.dataset(),e))}function Pu(e){const t=Ge(),[n,r]=K(e,["onClick"]);return g(Oa,F({as:"span",onClick:i=>{q(i,n.onClick),t.isDisabled()||t.triggerRef()?.focus()}},r))}function Iu(e){const t=Ge();e=z({id:t.generateId("listbox")},e);const[n,r]=K(e,["ref","id","onKeyDown"]);return A(()=>k(t.registerListboxId(n.id))),g(uu,F({get id(){return n.id},get state(){return t.listState()},get virtualized(){return t.isVirtualized()},get autoFocus(){return t.autoFocus()},shouldSelectOnPressUp:!0,shouldFocusOnHover:!0,get shouldFocusWrap(){return t.shouldFocusWrap()},get disallowTypeAhead(){return t.disallowTypeAhead()},get"aria-labelledby"(){return t.listboxAriaLabelledBy()},get renderItem(){return t.renderItem},get renderSection(){return t.renderSection},onKeyDown:i=>{q(i,n.onKeyDown),i.key==="Escape"&&i.preventDefault()}},r))}function Ou(e){const t=Ge();return g(W,{get when(){return t.contentPresence.isPresent()},get children(){return g(kt,e)}})}function Au(e){const t=`select-${we()}`;e=z({id:t,selectionMode:"single",disallowEmptySelection:!1,allowDuplicateSelectionEvents:!0,gutter:8,sameWidth:!0,modal:!1,preventScroll:!1},e);const[n,r,o,i]=K(e,["itemComponent","sectionComponent","open","defaultOpen","onOpenChange","value","defaultValue","onChange","placeholder","options","optionValue","optionTextValue","optionDisabled","optionGroupChildren","keyboardDelegate","allowDuplicateSelectionEvents","disallowEmptySelection","disallowTypeAhead","shouldFocusWrap","selectionBehavior","selectionMode","virtualized","modal","preventScroll","forceMount"],["getAnchorRect","placement","gutter","shift","flip","slide","overlap","sameWidth","fitViewport","hideWhenDetached","detachedPadding","arrowPadding","overflowPadding"],Ea),[s,l]=I(),[a,c]=I(),[u,f]=I(),[h,p]=I(),[d,x]=I(),[E,b]=I(),[m,v]=I(),[T,w]=I(!0),y=N=>{const ce=n.optionValue;return ce==null?String(N):String(Ut(ce)?ce(N):N[ce])},P=j(()=>{const N=n.optionGroupChildren;return N==null?n.options:n.options.flatMap(ce=>ce[N]??ce)}),C=j(()=>P().map(N=>y(N))),D=N=>[...N].map(ce=>P().find(en=>y(en)===ce)).filter(ce=>ce!=null),L=xt({open:()=>n.open,defaultOpen:()=>n.defaultOpen,onOpenChange:N=>n.onOpenChange?.(N)}),_=Yn({selectedKeys:()=>n.value!=null?n.value.map(y):n.value,defaultSelectedKeys:()=>n.defaultValue!=null?n.defaultValue.map(y):n.defaultValue,onSelectionChange:N=>{n.onChange?.(D(N)),n.selectionMode==="single"&&le()},allowDuplicateSelectionEvents:()=>S(n.allowDuplicateSelectionEvents),disallowEmptySelection:()=>S(n.disallowEmptySelection),selectionBehavior:()=>S(n.selectionBehavior),selectionMode:()=>n.selectionMode,dataSource:()=>n.options??[],getKey:()=>n.optionValue,getTextValue:()=>n.optionTextValue,getDisabled:()=>n.optionDisabled,getSectionChildren:()=>n.optionGroupChildren}),M=j(()=>D(_.selectionManager().selectedKeys())),R=N=>{_.selectionManager().toggleSelection(y(N))},J=Je(()=>n.forceMount||L.isOpen()),Z=()=>{const N=E();N&&se(N)},ae=N=>{if(n.options.length<=0)return;w(N),L.open();let ce=_.selectionManager().firstSelectedKey();ce==null&&(N==="first"?ce=_.collection().getFirstKey():N==="last"&&(ce=_.collection().getLastKey())),Z(),_.selectionManager().setFocused(!0),_.selectionManager().setFocusedKey(ce)},le=()=>{L.close(),_.selectionManager().setFocused(!1),_.selectionManager().setFocusedKey(void 0)},Be=N=>{L.isOpen()?le():ae(N)},{formControlContext:at}=Ta(o);ga(h,()=>{const N=n.defaultValue?[...n.defaultValue].map(y):new be;_.selectionManager().setSelectedKeys(N)});const Zt=wo({usage:"search",sensitivity:"base"}),Jt=j(()=>{const N=S(n.keyboardDelegate);return N||new $o(_.collection,void 0,Zt)}),sr=N=>n.itemComponent?.({item:N}),Qt=N=>n.sectionComponent?.({section:N});A(me([C],([N])=>{const en=[..._.selectionManager().selectedKeys()].filter(Li=>N.includes(Li));_.selectionManager().setSelectedKeys(en)},{defer:!0}));const U=j(()=>({"data-expanded":L.isOpen()?"":void 0,"data-closed":L.isOpen()?void 0:""})),je={dataset:U,isOpen:L.isOpen,isDisabled:()=>at.isDisabled()??!1,isMultiple:()=>S(n.selectionMode)==="multiple",isVirtualized:()=>n.virtualized??!1,isModal:()=>n.modal??!1,preventScroll:()=>n.preventScroll??!1,disallowTypeAhead:()=>n.disallowTypeAhead??!1,shouldFocusWrap:()=>n.shouldFocusWrap??!1,selectedOptions:M,contentPresence:J,autoFocus:T,triggerRef:h,listState:()=>_,keyboardDelegate:Jt,triggerId:s,valueId:a,listboxId:u,listboxAriaLabelledBy:m,setListboxAriaLabelledBy:v,setTriggerRef:p,setContentRef:x,setListboxRef:b,open:ae,close:le,toggle:Be,placeholder:()=>n.placeholder,renderItem:sr,renderSection:Qt,removeOptionFromSelection:R,generateId:Ce(()=>S(o.id)),registerTriggerId:ne(l),registerValueId:ne(c),registerListboxId:ne(f)};return g(yo.Provider,{value:at,get children(){return g(bi.Provider,{value:je,get children(){return g(rr,F({anchorRef:h,contentRef:d},r,{get children(){return g(te,F({as:"div",role:"group",get id(){return S(o.id)}},()=>at.dataset(),U,i))}}))}})}})}function Du(e){const[t,n]=K(e,["value","defaultValue","onChange","multiple"]),r=j(()=>t.value!=null?t.multiple?t.value:[t.value]:t.value),o=j(()=>t.defaultValue!=null?t.multiple?t.defaultValue:[t.defaultValue]:t.defaultValue);return g(Au,F({get value(){return r()},get defaultValue(){return o()},onChange:s=>{t.multiple?t.onChange?.(s):t.onChange?.(s[0]??null)},get selectionMode(){return t.multiple?"multiple":"single"}},n))}function Lu(e){const t=$t(),n=Ge();e=z({id:n.generateId("trigger")},e);const[r,o,i]=K(e,["ref","disabled","onPointerDown","onClick","onKeyDown","onFocus","onBlur"],Ca),s=()=>n.listState().selectionManager(),l=()=>n.keyboardDelegate(),a=()=>r.disabled||n.isDisabled(),{fieldProps:c}=Pa(o),{typeSelectHandlers:u}=Ko({keyboardDelegate:l,selectionManager:s,onTypeSelect:b=>s().select(b)}),f=()=>[n.listboxAriaLabelledBy(),n.valueId()].filter(Boolean).join(" ")||void 0,h=b=>{q(b,r.onPointerDown),b.currentTarget.dataset.pointerType=b.pointerType,!a()&&b.pointerType!=="touch"&&b.button===0&&(b.preventDefault(),n.toggle(!0))},p=b=>{q(b,r.onClick),!a()&&b.currentTarget.dataset.pointerType==="touch"&&n.toggle(!0)},d=b=>{if(q(b,r.onKeyDown),!a())switch(q(b,u.onKeyDown),b.key){case"Enter":case" ":case"ArrowDown":b.stopPropagation(),b.preventDefault(),n.toggle("first");break;case"ArrowUp":b.stopPropagation(),b.preventDefault(),n.toggle("last");break;case"ArrowLeft":{if(b.preventDefault(),n.isMultiple())return;const m=s().firstSelectedKey(),v=m!=null?l().getKeyAbove?.(m):l().getFirstKey?.();v!=null&&s().select(v);break}case"ArrowRight":{if(b.preventDefault(),n.isMultiple())return;const m=s().firstSelectedKey(),v=m!=null?l().getKeyBelow?.(m):l().getFirstKey?.();v!=null&&s().select(v);break}}},x=b=>{q(b,r.onFocus),!s().isFocused()&&s().setFocused(!0)},E=b=>{q(b,r.onBlur),!n.isOpen()&&s().setFocused(!1)};return A(()=>k(n.registerTriggerId(c.id()))),A(()=>{n.setListboxAriaLabelledBy([c.ariaLabelledBy(),c.ariaLabel()&&!c.ariaLabelledBy()?c.id():null].filter(Boolean).join(" ")||void 0)}),g(St,F({get id(){return c.id()},get disabled(){return a()},"aria-haspopup":"listbox",get"aria-expanded"(){return n.isOpen()},get"aria-controls"(){return n.isOpen()?n.listboxId():void 0},get"aria-label"(){return c.ariaLabel()},get"aria-labelledby"(){return f()},get"aria-describedby"(){return c.ariaDescribedBy()},onPointerDown:h,onClick:p,onKeyDown:d,onFocus:x,onBlur:E},()=>n.dataset(),()=>t.dataset(),i))}function Mu(e){const t=$t(),n=Ge();e=z({id:n.generateId("value")},e);const[r,o]=K(e,["id","children"]),i=()=>n.listState().selectionManager(),s=()=>{const l=i().selectedKeys();return l.size===1&&l.has("")?!0:i().isEmpty()};return A(()=>k(n.registerValueId(r.id))),Qr("span",F({get id(){return r.id},get"data-placeholder-shown"(){return s()?"":void 0}},()=>t.dataset(),o),()=>O(g(W,{get when(){return!s()},get fallback(){return n.placeholder()},get children(){return g(Fu,{state:{selectedOption:()=>n.selectedOptions()[0],selectedOptions:()=>n.selectedOptions(),remove:l=>n.removeOptionFromSelection(l),clear:()=>i().clearSelection()},get children(){return r.children}})}})),!0)}function Fu(e){return to(()=>{const n=e.children;return Ut(n)?n(e.state):n})()}/*!
 * Portions of this file are based on code from react-spectrum.
 * Apache License Version 2.0, Copyright 2020 Adobe.
 *
 * Credits to the React Spectrum team:
 * https://github.com/adobe/react-spectrum/tree/main/packages/%40react-aria/toast/intl
 */const G="{hotkey}",_u={"ar-AE":{close:"إغلاق",notifications:`(${G}) إشعارات`},"bg-BG":{close:"Затвори",notifications:`Известия (${G})`},"cs-CZ":{close:"Zavřít",notifications:`Upozornění (${G})`},"da-DK":{close:"Luk",notifications:`Påmindelser (${G})`},"de-DE":{close:"Schließen",notifications:`Benachrichtigungen (${G})`},"el-GR":{close:"Κλείσιμο",notifications:`Ειδοποιήσεις (${G})`},"en-US":{close:"Close",notifications:`Notifications (${G})`},"es-ES":{close:"Cerrar",notifications:`Notificaciones (${G})`},"et-EE":{close:"Sule",notifications:`Teated (${G})`},"fi-FI":{close:"Sulje",notifications:`Ilmoitukset (${G})`},"fr-FR":{close:"Fermer",notifications:`Notifications (${G})`},"he-IL":{close:"סגור",notifications:`(${G}) התראות`},"hr-HR":{close:"Zatvori",notifications:`Obavijesti (${G})`},"hu-HU":{close:"Bezárás",notifications:`Értesítések (${G})`},"it-IT":{close:"Chiudi",notifications:`Notifiche (${G})`},"ja-JP":{close:"閉じる",notifications:`通知 (${G})`},"ko-KR":{close:"닫기",notifications:`알림 (${G})`},"lt-LT":{close:"Uždaryti",notifications:`Pranešimai (${G})`},"lv-LV":{close:"Aizvērt",notifications:`Paziņojumi (${G})`},"nb-NO":{close:"Lukk",notifications:`Varsler (${G})`},"nl-NL":{close:"Sluiten",notifications:`Meldingen (${G})`},"pl-PL":{close:"Zamknij",notifications:`Powiadomienia (${G})`},"pt-BR":{close:"Fechar",notifications:`Notificações (${G})`},"pt-PT":{close:"Fechar",notifications:`Notificações (${G})`},"ro-RO":{close:"Închideţi",notifications:`Notificări (${G})`},"ru-RU":{close:"Закрыть",notifications:`Уведомления (${G})`},"sk-SK":{close:"Zatvoriť",notifications:`Oznámenia (${G})`},"sl-SI":{close:"Zapri",notifications:`Obvestila (${G})`},"sr-SP":{close:"Zatvori",notifications:`Obaveštenja (${G})`},"sv-SE":{close:"Stäng",notifications:`Aviseringar (${G})`},"tr-TR":{close:"Kapat",notifications:`Bildirimler (${G})`},"uk-UA":{close:"Закрити",notifications:`Сповіщення (${G})`},"zh-CN":{close:"关闭",notifications:`通知 (${G})`},"zh-TW":{close:"關閉",notifications:`通知 (${G})`}},yi=re();function Yt(){const e=oe(yi);if(e===void 0)throw new Error("[kobalte]: `useToastContext` must be used within a `Toast.Root` component");return e}function Ru(e){const t=Yt(),[n,r]=K(e,["aria-label","onClick"]),o=Ho(()=>_u);return g(St,F({get"aria-label"(){return n["aria-label"]||o().format("close")},onClick:s=>{q(s,n.onClick),t.close()}},r))}function Nu(e){const t=Yt();e=z({id:t.generateId("description")},e);const[n,r]=K(e,["id"]);return A(()=>k(t.registerDescriptionId(n.id))),g(te,F({as:"div",get id(){return n.id}},r))}const Bu=re();function xi(){const e=oe(Bu);if(e===void 0)throw new Error("[kobalte]: `useToastRegionContext` must be used within a `Toast.Region` component");return e}function Hu(e){const t=xi(),n=Yt(),[r,o]=K(e,["style"]),[i,s]=I(100);let l=0;return A(()=>{if(t.isPaused()||n.isPersistent())return;const a=setInterval(()=>{const c=new Date().getTime()-n.closeTimerStartTime()+l,u=Math.trunc(100-c/n.duration()*100);s(u<0?0:u)});k(()=>{l+=new Date().getTime()-n.closeTimerStartTime(),clearInterval(a)})}),g(te,F({as:"div",get style(){return{"--kb-toast-progress-fill-width":`${i()}%`,...r.style}}},o))}function ku(e){return g(te,F({as:"div","aria-hidden":"true",role:"presentation"},e))}function wi(e){const t=`toast-${we()}`,n=xi();e=z({id:t,priority:"high"},e);const[r,o]=K(e,["ref","toastId","style","priority","duration","persistent","onPause","onResume","onSwipeStart","onSwipeMove","onSwipeCancel","onSwipeEnd","onEscapeKeyDown","onKeyDown","onPointerDown","onPointerMove","onPointerUp"]),[i,s]=I(!0),[l,a]=I(),[c,u]=I(),[f,h]=I(!0),p=Je(i),d=j(()=>r.duration||n.duration());let x,E=0,b=d();const m=()=>{s(!1),h(!0)},v=()=>{tt.remove(r.toastId)},T=C=>{!C||r.persistent||(window.clearTimeout(x),E=new Date().getTime(),x=window.setTimeout(m,C))},w=()=>{T(b),r.onResume?.()},y=()=>{const C=new Date().getTime()-E;b=b-C,window.clearTimeout(x),r.onPause?.()};pt(()=>{n.toasts().find(C=>C.id===r.toastId&&C.update)&&h(!1)}),A(me(()=>n.isPaused(),C=>{C?y():w()},{defer:!0})),A(me([i,d],([C,D])=>{C&&!n.isPaused()&&T(D)})),A(me(()=>tt.get(r.toastId)?.dismiss,C=>C&&m())),A(me(()=>p.isPresent(),C=>!C&&v()));const P={close:m,duration:d,isPersistent:()=>r.persistent??!1,closeTimerStartTime:()=>E,generateId:Ce(()=>o.id),registerTitleId:ne(a),registerDescriptionId:ne(u)};return g(W,{get when(){return p.isPresent()},get children(){return g(yi.Provider,{value:P,get children(){return Qr("li",F({role:"status",tabIndex:0,get style(){return{animation:f()?void 0:"none","user-select":"none","touch-action":"none",...r.style}},get"aria-live"(){return r.priority==="high"?"assertive":"polite"},"aria-atomic":"true",get"aria-labelledby"(){return l()},get"aria-describedby"(){return c()},get"data-opened"(){return i()?"":void 0},get"data-closed"(){return i()?void 0:""},get"data-swipe-direction"(){return n.swipeDirection()}},o),void 0,!0)}})}})}function Ku(e){const t=Yt();e=z({id:t.generateId("title")},e);const[n,r]=K(e,["id"]);return A(()=>k(t.registerTitleId(n.id))),g(te,F({as:"div",get id(){return n.id}},r))}const Si=re();function or(){const e=oe(Si);if(e===void 0)throw new Error("[kobalte]: `useTooltipContext` must be used within a `Tooltip` component");return e}function Uu(e){const t=or();e=z({id:t.generateId("content")},e);const[n,r]=K(e,["ref","style"]);return A(()=>k(t.registerContentId(r.id))),g(W,{get when(){return t.contentPresence.isPresent()},get children(){return g(Zn,{get children(){return g(Wt,F({role:"tooltip",disableOutsidePointerEvents:!1,get style(){return{"--kb-tooltip-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative",...n.style}},onFocusOutside:o=>o.preventDefault(),onDismiss:()=>t.hideTooltip(!0)},()=>t.dataset(),r))}})}})}function $u(e){const t=or();return g(W,{get when(){return t.contentPresence.isPresent()},get children(){return g(kt,e)}})}/*!
 * Portions of this file are based on code from ariakit.
 * MIT Licensed, Copyright (c) Diego Haz.
 *
 * Credits to the Ariakit team:
 * https://github.com/ariakit/ariakit/blob/84e97943ad637a582c01c9b56d880cd95f595737/packages/ariakit/src/hovercard/__utils/polygon.ts
 * https://github.com/ariakit/ariakit/blob/f2a96973de523d67e41eec983263936c489ef3e2/packages/ariakit/src/hovercard/__utils/debug-polygon.ts
 */function Vu(e,t,n){const r=e.split("-")[0],o=t.getBoundingClientRect(),i=n.getBoundingClientRect(),s=[],l=o.left+o.width/2,a=o.top+o.height/2;switch(r){case"top":s.push([o.left,a]),s.push([i.left,i.bottom]),s.push([i.left,i.top]),s.push([i.right,i.top]),s.push([i.right,i.bottom]),s.push([o.right,a]);break;case"right":s.push([l,o.top]),s.push([i.left,i.top]),s.push([i.right,i.top]),s.push([i.right,i.bottom]),s.push([i.left,i.bottom]),s.push([l,o.bottom]);break;case"bottom":s.push([o.left,a]),s.push([i.left,i.top]),s.push([i.left,i.bottom]),s.push([i.right,i.bottom]),s.push([i.right,i.top]),s.push([o.right,a]);break;case"left":s.push([l,o.top]),s.push([i.right,i.top]),s.push([i.left,i.top]),s.push([i.left,i.bottom]),s.push([i.right,i.bottom]),s.push([l,o.bottom]);break}return s}const ke={};let Gu=0,We=!1,Pe,ut;function ju(e){const t=`tooltip-${we()}`,n=`${++Gu}`;e=z({id:t,openDelay:700,closeDelay:300},e);const[r,o]=K(e,["id","open","defaultOpen","onOpenChange","disabled","triggerOnFocusOnly","openDelay","closeDelay","ignoreSafeArea","forceMount"]);let i;const[s,l]=I(),[a,c]=I(),[u,f]=I(),[h,p]=I(o.placement),d=xt({open:()=>r.open,defaultOpen:()=>r.defaultOpen,onOpenChange:R=>r.onOpenChange?.(R)}),x=Je(()=>r.forceMount||d.isOpen()),E=()=>{ke[n]=m},b=()=>{for(const R in ke)R!==n&&(ke[R](!0),delete ke[R])},m=(R=!1)=>{ie||(R||r.closeDelay&&r.closeDelay<=0?(window.clearTimeout(i),i=void 0,d.close()):i||(i=window.setTimeout(()=>{i=void 0,d.close()},r.closeDelay)),window.clearTimeout(Pe),Pe=void 0,We&&(window.clearTimeout(ut),ut=window.setTimeout(()=>{delete ke[n],ut=void 0,We=!1},r.closeDelay)))},v=()=>{ie||(clearTimeout(i),i=void 0,b(),E(),We=!0,d.open(),window.clearTimeout(Pe),Pe=void 0,window.clearTimeout(ut),ut=void 0)},T=()=>{ie||(b(),E(),!d.isOpen()&&!Pe&&!We?Pe=window.setTimeout(()=>{Pe=void 0,We=!0,v()},r.openDelay):d.isOpen()||v())},w=(R=!1)=>{ie||(!R&&r.openDelay&&r.openDelay>0&&!i?T():v())},y=()=>{ie||(window.clearTimeout(Pe),Pe=void 0,We=!1)},P=()=>{ie||(window.clearTimeout(i),i=void 0)},C=R=>ye(a(),R)||ye(u(),R),D=R=>{const J=a(),Z=u();if(!(!J||!Z))return Vu(R,J,Z)},L=R=>{const J=R.target;if(C(J)){P();return}if(!r.ignoreSafeArea){const Z=D(h());if(Z&&go(Qs(R),Z)){P();return}}i||m()};A(()=>{if(ie||!d.isOpen())return;const R=fe();R.addEventListener("pointermove",L,!0),k(()=>{R.removeEventListener("pointermove",L,!0)})}),A(()=>{const R=a();if(!R||!d.isOpen())return;const J=ae=>{const le=ae.target;ye(le,R)&&m(!0)},Z=Hn();Z.addEventListener("scroll",J,{capture:!0}),k(()=>{Z.removeEventListener("scroll",J,{capture:!0})})}),k(()=>{clearTimeout(i),ke[n]&&delete ke[n]});const M={dataset:j(()=>({"data-expanded":d.isOpen()?"":void 0,"data-closed":d.isOpen()?void 0:""})),isOpen:d.isOpen,isDisabled:()=>r.disabled??!1,triggerOnFocusOnly:()=>r.triggerOnFocusOnly??!1,contentId:s,contentPresence:x,openTooltip:w,hideTooltip:m,cancelOpening:y,generateId:Ce(()=>e.id),registerContentId:ne(l),isTargetOnTooltip:C,setTriggerRef:c,setContentRef:f};return g(Si.Provider,{value:M,get children(){return g(rr,F({anchorRef:a,contentRef:u,onCurrentPlacementChange:p},o))}})}function Wu(e){let t;const n=or(),[r,o]=K(e,["ref","onPointerEnter","onPointerLeave","onPointerDown","onClick","onFocus","onBlur","onTouchStart"]);let i=!1,s=!1,l=!1;const a=()=>{i=!1},c=()=>{!n.isOpen()&&(s||l)&&n.openTooltip(l)},u=b=>{n.isOpen()&&!s&&!l&&n.hideTooltip(b)},f=b=>{q(b,r.onPointerEnter),!(b.pointerType==="touch"||n.triggerOnFocusOnly()||n.isDisabled()||b.defaultPrevented)&&(s=!0,c())},h=b=>{q(b,r.onPointerLeave),b.pointerType!=="touch"&&(s=!1,l=!1,n.isOpen()?u():n.cancelOpening())},p=b=>{q(b,r.onPointerDown),i=!0,fe(t).addEventListener("pointerup",a,{once:!0})},d=b=>{q(b,r.onClick),s=!1,l=!1,u(!0)},x=b=>{q(b,r.onFocus),!(n.isDisabled()||b.defaultPrevented||i)&&(l=!0,c())},E=b=>{q(b,r.onBlur);const m=b.relatedTarget;n.isTargetOnTooltip(m)||(s=!1,l=!1,u(!0))};return k(()=>{ie||fe(t).removeEventListener("pointerup",a)}),g(te,F({as:"button",get"aria-describedby"(){return n.isOpen()?n.contentId():void 0},onPointerEnter:f,onPointerLeave:h,onPointerDown:p,onClick:d,onFocus:x,onBlur:E},()=>n.dataset(),o))}let qr=class{value;next=null;prev=null;constructor(t){this.value=t}};class Ei{head=I(null);tail=I(null);current=I(null);_length=I(0);videoIdSet=new Set;get currentVideo(){return this.current[0]()?.value}get uniqueIds(){return Array.from(this.videoIdSet)}constructor(t=[]){t.forEach(n=>this.add(n))}[Symbol.iterator](){let t=this.head[0]()?.value;return{next:()=>{if(t){const n=t;return t=this.head[0]()?.next?.value,{value:n,done:!1}}else return{value:void 0,done:!0}}}}add(t){const n=Ie(t);if(console.log("adding",n),!n||this.videoIdSet.has(n))return;const r=new qr(t),o=this.tail[0]();return o?(console.log("tail",o),o.next=r,r.prev=o,this.tail[1](r)):(console.log("no tail",o),this.head[1](r),this.tail[1](r),this.current[0]()||this.current[1](r)),this.videoIdSet.add(n),this._length[1](this._length[0]()+1),r.value}list(){const t=[];let n=this.head[0]();for(;n;)t.push(n.value),n=n.next;return t}enqueueNext(t){const n=Ie(t);if(!n||this.videoIdSet.has(n))return;const r=this.current[0]();if(!r){this.add(t);return}const o=new qr(t),i=r.next;r.next=o,o.prev=r,o.next=i,i&&(i.prev=o),r===this.tail[0]()&&this.tail[1](o),this.videoIdSet.add(n),this._length[1](this._length[0]()+1)}next(){const t=this.current[0]();return t?.next?(this.current[1](t.next),t.next.value):null}peekNext(){return this.current[0]()?.next?.value||null}prev(){const t=this.current[0]();return t?.prev?(this.current[1](t.prev),t.prev.value):null}peekPrev(){return this.current[0]()?.prev?.value||null}length(){return this._length[0]()}has(t){return this.videoIdSet.has(t)}isEmpty(){return this._length[0]()===0}setCurrentVideo(t){let n=this.head[0]();for(;n;){if(Ie(n.value)===t)return this.current[1](n),!0;n=n.next}return!1}remove(t){let n=this.head[0]();for(;n;){if(Ie(n.value)===t)return n.prev&&(n.prev.next=n.next),n.next&&(n.next.prev=n.prev),n===this.head[0]()&&this.head[1](n.next),n===this.tail[0]()&&this.tail[1](n.prev),n===this.current[0]()&&this.current[1](n.next),this._length[1](this._length[0]()-1),!0;n=n.next}return this.videoIdSet.delete(t),!1}clear(){this.head[1](null),this.tail[1](null),this.current[1](null),this._length[1](0),this.videoIdSet.clear()}getTotalDuration(){let t=this.head[0](),n=0;for(;t;)n+=t.value.duration,t=t.next;return n}}const Ti=re(new Ei);function bf(e){const t=new Ei;return g(Ti.Provider,{value:t,get children(){return e.children}})}function yf(){const e=oe(Ti);if(!e)throw new Error("useQueue must be used within a QueueProvider");return e}function Ci(){try{return window.localStorage!==void 0&&localStorage,!0}catch{return!1}}function zu(e,t,n="localStorage"){if(!(typeof window>"u")&&Ci())switch(n){case"localStorage":localStorage.setItem(e,JSON.stringify(t));break;case"sessionStorage":sessionStorage.setItem(e,JSON.stringify(t));break;default:throw new Error(`Invalid storage: ${n}`)}}function Xu(e,t,n="string",r){if(typeof window>"u")return t;const o=new URLSearchParams(window.location.search).get(e),i=r==="localStorage"&&Ci()?localStorage.getItem(e):sessionStorage.getItem(e),s=o!==null?o:i;if(s!==null)switch(n){case"boolean":switch(String(s).toLowerCase()){case"true":case"1":case"on":case"yes":return!0;default:return!1}case"string":return s;case"number":return Number(s);case"json":try{const l=JSON.parse(s);return typeof l=="string"?JSON.parse(l):l}catch(l){return console.error(l),t}default:throw new Error(`Invalid type: ${n}`)}else return t}const Ye=bt({autoplay:!1,pip:!1,muted:!1,volume:.5,speed:1,quality:"auto",theatreMode:!1,loop:!1,instance:{name:"Piped",api_url:"https://pipedapi.kavin.rocks",cache:!0,cdn:!0,last_checked:new Date().getTime(),locations:"",version:"0.0.0",registered:0,s3_enabled:!1,up_to_date:!1,image_proxy_url:"https://pipedproxy.kavin.rocks"}}),Pi=re(Ye),xf=e=>(pt(()=>{Ye[1](Xu("preferences",Ye[0],"json","localStorage"))}),A(()=>{console.log(Ye[0],"preferences changed"),zu("preferences",Ye[0],"localStorage")}),g(Pi.Provider,{value:Ye,get children(){return e.children}})),wf=()=>oe(Pi);var Zr=["<span",' class="','">',"</span>"],Yu=["<div",' class="','"><div class="w-2 h-2 bg-white rounded-full animate-bounce"></div><div class="w-2 h-2 bg-white rounded-full animate-bounce delay-150"></div><div class="w-2 h-2 bg-white rounded-full animate-bounce delay-300"></div></div>'];function Jr(e){const t=r=>({primary:{"bg-primary hover:bg-primary/90 shadow hover:shadow-3xl text-text1 border-transparent hover:border-primary/30 active:bg-primary/80":!0},subtle:{"bg-transparent hover:bg-bg3/80 hover:shadow-3xl text-text1 border-transparent ":!0},link:{"bg-transparent text-primary border-transparent hover:border-transparent":!0},danger:{"bg-red-600 hover:bg-red-600/90 shadow hover:shadow-3xl text-text1 border-transparent hover:border-red-600/30":!0},warning:{"bg-yellow-600 hover:bg-yellow-600/90 shadow hover:shadow-3xl text-text1 border-transparent hover:border-yellow-600/30":!0}})[r??"primary"],n=os();return g(St,{get as(){return e.as??"button"},get onClick(){return e.onClick??(()=>{e.href!==void 0&&n(e.href)})},get disabled(){return e.isDisabled},get classList(){return{"relative focus-visible:ring-4 focus-visible:ring-primary/50 focus-visible:outline-none disabled:opacity-50 disabled:cursor-not-allowed duration-300 py-1 px-3 text-sm rounded-full border-4  appearance-none ease-out cursor-pointer select-none focus:outline-none transition active:translate-y-[2px]":!0,"flex items-center justify-center":e.icon!==void 0&&e.label!==void 0,"!text-text1 !bg-bg2":e.isSelected===!0,...t(e.appearance),[e.class]:e.class!==void 0}},get children(){return[g(W,{get when(){return e.icon!==void 0},get children(){return B(Zr,H(),e.isLoading?"invisible":"",O(e.icon))}}),g(W,{get when(){return e.label!==void 0},get children(){return B(Zr,H(),`${e.icon!==void 0?"ml-2":""} ${e.isLoading?"invisible":""}`,O(e.label))}}),g(W,{get when(){return e.isLoading},get children(){return g(qu,{class:"absolute h-full w-full top-0.5 left-0 flex items-center justify-center"})}})]}})}const qu=e=>B(Yu,H(),`flex space-x-1 ${e.class!==void 0?O(e.class,!0):""}`);var Zu=["<div",' class="flex items-baseline justify-between mb-3"><!--$-->',"<!--/--><!--$-->","<!--/--></div>"],Ju=["<div",' class="fixed inset-0 z-[999999] flex items-center justify-center">',"</div>"];function Ii(e){return g(dc,{modal:!0,get open(){return e.isOpen},get onOpenChange(){return e.setIsOpen},get children(){return g(uc,{get children(){return[g(cc,{class:` fixed 
    inset-0 
    z-50 
    bg-black/20
    animate-out
    fade-out
    data-[expanded]:animate-in
    data-[expanded]:fade-in
    `}),B(Ju,H(),O(g(ac,{class:` z-50 
    max-w-[calc(100vw-16px)] 
    max-h-[80vh]
              my-auto
    overflow-hidden
    border 
    border-bg3
    rounded-md 
    p-4 
    bg-bg1
    shadow-md 
    animate-out
    fade-out
    ease-in
    data-[expanded]:animate-in
    data-[expanded]:fade-in
    data-[expanded]:duration-300
    data-[expanded]:ease-out
    `,get children(){return[B(Zu,H(),O(g(fc,{class:"text-xl font-semibold",get children(){return e.title}})),O(g(ic,{class:"",get children(){return g(ro,{fill:"currentColor",class:"w-4 h-4"})}}))),g(lc,{class:`text-base 
    max-h-[calc(100vh-50px)] overflow-y-auto`,get children(){return e.children}})]}})))]}})}})}const Qu=e=>g(Du,{get defaultValue(){return e.value},get value(){return e.value},get onChange(){return e.onChange},get placeholder(){return e.placeholder},optionValue:"value",optionTextValue:"label",optionDisabled:"disabled",gutter:0,get options(){return e.options},itemComponent:t=>g(lu,{class:"cursor-pointer w-full border-bg2 last:border-b-0 flex relative items-center px-7 py-2 rounded border-b hover:bg-bg2 focus-visible:ring-4 focus-visible:ring-primary focus-visible:outline-none data-[disabled]:text-gray-600 data-[disabled]:cursor-not-allowed ",get item(){return t.item},get children(){return[g(Pu,{class:"max-w-xs truncate",get children(){return t.item.rawValue?.label}}),g(cu,{class:"inline-flex absolute left-0",get children(){return g(Vi,{fill:"currentColor",class:"h-4 w-4 mx-1 text-text1"})}})]}}),class:"relative",get children(){return[g(Lu,{class:" p-1 outline-none bg-bg2 ring-1 ring-bg2 inline-flex items-center justify-between py-2 px-3 focus-visible:ring-2 focus-visible:ring-primary rounded-md",get children(){return[g(Mu,{children:t=>t.selectedOption()?.label}),g(Cu,{get children(){return g(Gi,{fill:"currentColor",class:"h-3 w-3 text-text1 relative left-1"})}})]}}),g(Ou,{get children(){return g(Tu,{class:"bg-bg1 p-1 rounded-md z-[999999] ",get children(){return[g(Qo,{}),g(Iu,{class:"overflow-y-auto max-h-[40vh] p-2 "})]}})}})]}}),ed=Qu;var td=["<div",` class="flex items-center gap-2"><div class="text-text1">You don't have any playlists yet.</div></div>`],nd=["<div",' class="text-text1">Select a playlist to add this video to:</div>'],rd=["<div",' class=" w-full flex justify-center items-center mb-2">',"</div>"],od=["<div",' class="flex flex-col gap-4">',"</div>"],id=["<div",' class="flex items-center justify-center gap-4 my-2"><!--$-->',"<!--/--><!--$-->","<!--/--></div>"];const sd=e=>{const t=ir(),n=()=>{const i=prompt("Playlist name");if(!i)return;const s=`conduit-${Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}`,l={name:i,relatedStreams:[],videos:0,uploader:"You",description:"",bannerUrl:"",uploaderAvatar:"",uploaderUrl:"",thumbnailUrl:"",nextpage:""};t.setStore("playlists",{[s]:l})},[r,o]=I({value:"",label:"",disabled:!1});return g(Ii,{get isOpen(){return e.isOpen},get setIsOpen(){return e.setIsOpen},title:"Add to playlist",get children(){return[B(od,H(),O(g(Nn,{get children(){return[g(Ze,{get when(){return Object.keys(t.store.playlists).length===0},get children(){return B(td,H())}}),g(Ze,{get when(){return Object.keys(t.store.playlists).length>0},get children(){return[B(nd,H()),B(rd,H(),O(g(ed,{get options(){return Object.entries(t.store.playlists).map(([i,s])=>({value:i,label:s.name,disabled:s.relatedStreams?.some(l=>l.url===e.v.url)}))},get value(){return r()},onChange:o,placeholder:"Select a playlist..."})))]}})]}}))),B(id,H(),O(g(Jr,{appearance:"subtle",label:"Create a playlist",onClick:()=>n()})),O(g(Jr,{onClick:()=>{console.log(e.v,r(),t.store.playlists[r().value]?.relatedStreams);try{const i=t.store.playlists[r().value],s=i?.relatedStreams.length||0;t.setStore("playlists",r().value,"relatedStreams",[...i.relatedStreams,{url:e.v.url,title:e.v.title,type:e.v.type,duration:e.v.duration,thumbnail:e.v.thumbnail,uploaderName:e.v.uploaderName,uploaderUrl:e.v.uploaderUrl,uploaderAvatar:e.v.uploaderAvatar,views:e.v.views,uploaded:e.v.uploaded,uploaderVerified:e.v.uploaderVerified,shortDescription:"",uploadedDate:e.v.uploadedDate,isShort:e.v.isShort,order:s,timeAdded:Date.now()}]),Se.success(`Added "${e.v.title.length>20?e.v.title.slice(0,20)+"...":e.v.title}" to playlist "${i.name}".`),e.setIsOpen(!1)}catch(i){Se.error("Failed to add to playlist. "+i.message),console.error(i)}},label:"Add",get isDisabled(){return!r().value},appearance:"primary"})))]}})};var ad=["<div",' class="flex items-center gap-2"><!--$-->','<!--/--><div class="text-text1">Add to playlist</div></div>'],ld=["<div",' class="flex items-center gap-2"><!--$-->','<!--/--><div class="text-text1">Watch later</div></div>'],cd=["<div",' class="flex items-center gap-2"><!--$-->','<!--/--><div class="text-text1">Mark as watched</div></div>'],ud=["<div",' class="flex items-center gap-2"><!--$-->','<!--/--><div class="text-text1">Remove from history</div></div>'],dd=["<div",' class="flex items-center gap-2"><!--$-->','<!--/--><div class="text-text1">Share</div></div>'],fd=["<img",' class="w-6 h-6 rounded-full">'],hd=["<span",' class="text-text2 max-w-xs truncate">',"</span>"],gd=["<div",' class="flex items-center gap-2"><!--$-->',"<!--/--><!--$-->",'<!--/--><div class="text-text1">',"</div></div>"],md=["<div",' class="flex items-center gap-2"><!--$-->','<!--/--><div class="text-text1">Block</div></div>'],vd=["<div",' class="flex items-center gap-2"><!--$-->','<!--/--><div class="text-text1">Debug info</div></div>'],pd=["<pre",' class="break-all text-text1 max-w-full min-w-0 overflow-auto z-[9999999]">',"</pre>"];function bd(e){const[t,n]=I(!1),[r,o]=I(!1),i=ir(),[s,l]=I(!1),[a,c]=no();return[g(Eu,{get open(){return t()},onOpenChange:n,get children(){return[g(wu,{class:"p-1 outline-none focus-visible:ring-2 focus-visible:ring-primary rounded-md",get children(){return g(ns,{fill:"currentColor",class:"text-text2 w-6 h-6 group-hover:text-text1"})}}),g(yu,{get children(){return g(Su,{class:`bg-bg1 border border-bg2 shadow p-2 rounded-md z-50
                -translate-y-4
                animate-in
                fade-in
                slide-in-from-top-10
                duration-200
                `,get children(){return[g(Qo,{}),g(Le,{onTouchStart:()=>{c("touchInProgress",!0)},onSelect:()=>{l(!0)},class:"cursor-pointer w-full border-bg3 flex relative items-center px-7 py-2 rounded border-b hover:bg-bg3 focus-visible:bg-bg3 focus-visible:ring-4 focus-visible:ring-highlight focus-visible:outline-none",get children(){return B(ad,H(),O(g(ji,{class:""})))}}),g(Le,{onTouchStart:()=>{c("touchInProgress",!0)},onSelect:()=>{try{i.setStore("watchLater",{[Ie(e.v)]:{title:e.v.title,url:e.v.url,duration:e.v.duration,uploaderName:e.v.uploaderName,uploaderUrl:e.v.uploaderUrl,uploaderAvatar:e.v.uploaderAvatar,views:e.v.views,uploaded:e.v.uploaded,thumbnail:e.v.thumbnail,uploaderVerified:e.v.uploaderVerified}}),Se.success(`Added "${e.v.title.length>20?e.v.title.slice(0,20)+"...":e.v.title}" to watch later.`)}catch(u){Se.error("Failed to add to watch later. "+u.message),console.error(u)}},class:"cursor-pointer w-full border-bg3 flex relative items-center px-7 py-2 rounded border-b hover:bg-bg3 focus-visible:bg-bg3 focus-visible:ring-4 focus-visible:ring-highlight focus-visible:outline-none",get children(){return B(ld,H(),O(g(rs,{class:""})))}}),g(W,{get when(){return e.progress===void 0},get children(){return g(Le,{class:"cursor-pointer z-50 w-full border-bg3 flex relative items-center px-7 py-2 rounded border-b hover:bg-bg3 focus-visible:bg-bg3 focus-visible:ring-4 focus-visible:ring-highlight focus-visible:outline-none",onTouchStart:()=>{c("touchInProgress",!0)},as:"button",onSelect:()=>{if(!e.v)return;const u={[Ie(e.v)]:{title:e.v.title,url:e.v.url,duration:e.v.duration,uploaderName:e.v.uploaderName,uploaderUrl:e.v.uploaderUrl,uploaderAvatar:e.v.uploaderAvatar,views:e.v.views,uploaded:e.v.uploaded,thumbnail:e.v.thumbnail,uploaderVerified:e.v.uploaderVerified,currentTime:e.v.duration,watchedAt:Date.now()}};i.setStore("history",u),console.log("added to history")},get children(){return B(cd,H(),O(g(Wi,{fill:"currentColor"})))}})}}),g(W,{get when(){return e.progress!==void 0},get children(){return g(Le,{class:"cursor-pointer w-full border-bg3 flex relative items-center px-7 py-2 rounded border-b hover:bg-bg3 focus-visible:bg-bg3 focus-visible:ring-4 focus-visible:ring-highlight focus-visible:outline-none",onTouchStart:()=>{c("touchInProgress",!0)},onSelect:()=>{i.setStore("history",{[Ie(e.v)]:void 0})},get children(){return B(ud,H(),O(g(zi,{fill:"currentColor"})))}})}}),g(Le,{class:"cursor-pointer touch-action-none w-full border-bg3 flex relative items-center px-7 py-2 rounded border-b hover:bg-bg3 focus-visible:bg-bg3 focus-visible:ring-4 focus-visible:ring-highlight focus-visible:outline-none",onTouchStart:()=>{c("touchInProgress",!0)},onSelect:()=>{console.log("share event")},get children(){return B(dd,H(),O(g(Xi,{})))}}),g(W,{get when(){return e.v.uploaderName&&e.v.uploaderUrl},get children(){return g(pu,{class:"mt-2",get children(){return[g(bu,{class:"flex items-center gap-2",get children(){return[B(fd,H()+Ke("src",O(e.v.uploaderAvatar,!0)??"",!1)),B(hd,H(),O(e.v.uploaderName))]}}),g(Le,{class:"cursor-pointer w-full border-bg3 flex relative items-center px-7 py-2 rounded border- hover:bg-bg3 focus-visible:bg-bg3 focus-visible:ring-4 focus-visible:ring-highlight focus-visible:outline-none",onTouchStart:()=>{c("touchInProgress",!0)},onSelect:()=>{const u=e.v.uploaderUrl.split("/channel/")[1];i.store.subscriptions[u]?(i.setStore("subscriptions",u,void 0),Se.success(`Unsubscribed from ${e.v.uploaderName}.`)):(i.setStore("subscriptions",u,{subscribedAt:Date.now()}),Se.success(`Subscribed to ${e.v.uploaderName}.`))},get children(){return B(gd,H(),O(g(W,{get when(){return i.store.subscriptions[e.v.uploaderUrl.split("/channel/")[1]]},get children(){return g(Yi,{})}})),O(g(W,{get when(){return!i.store.subscriptions[e.v.uploaderUrl.split("/channel/")[1]]},get children(){return g(qi,{})}})),i.store.subscriptions[e.v.uploaderUrl.split("/channel/")[1]]?"Unsubscribe":"Subscribe")}}),g(Le,{class:"cursor-pointer w-full border-bg3 flex relative items-center px-7 py-2 rounded border-b hover:bg-bg3 focus-visible:bg-bg3 focus-visible:ring-4 focus-visible:ring-highlight focus-visible:outline-none",onTouchStart:()=>{c("touchInProgress",!0)},onSelect:()=>{if(!e.v.uploaderUrl.split("/channel/")[1]){Se.error("Failed to block channel. No channel ID found.");return}try{i.setStore("blocklist",e.v.uploaderUrl.split("/channel/")[1],{name:e.v.uploaderName}),Se.success(`Blocked ${e.v.uploaderName}.`)}catch(f){Se.error("Failed to block channel. "+f.message),console.error(f)}},get children(){return B(md,H(),O(g(Zi,{})))}})]}})}}),g(Le,{onTouchStart:()=>{c("touchInProgress",!0)},class:"cursor-pointer w-full border-bg3 flex relative items-center px-7 py-2 rounded  hover:bg-bg3 focus-visible:bg-bg3 focus-visible:ring-4 focus-visible:ring-highlight focus-visible:outline-none",onSelect:()=>o(!0),get children(){return B(vd,H(),O(g(Ji,{fill:"currentColor"})))}})]}})}})]}}),g(Ii,{get isOpen(){return r()},setIsOpen:o,title:"Debug info",get children(){return B(pd,H(),O(JSON.stringify(e.v,null,2)))}}),g(sd,{get isOpen(){return s()},setIsOpen:l,get v(){return e.v}})]}function yd(e){const t=()=>{switch(e.placement){case"top":return"tooltip animate-out fade-out slide-out-to-bottom-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-bottom-4";case"bottom":return"tooltip animate-out fade-out slide-out-to-top-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-top-4";case"left":return"tooltip animate-out fade-out slide-out-to-right-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-right-4";case"right":return"tooltip animate-out fade-out slide-out-to-left-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-left-4";case"top-end":return"tooltip animate-out fade-out slide-out-to-bottom-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-bottom-4";case"left-end":return"tooltip animate-out fade-out slide-out-to-right-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-right-4";case"right-end":return"tooltip animate-out fade-out slide-out-to-left-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-left-4";case"bottom-end":return"tooltip animate-out fade-out slide-out-to-top-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-top-4";case"top-start":return"tooltip animate-out fade-out slide-out-to-bottom-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-bottom-4";case"left-start":return"tooltip animate-out fade-out slide-out-to-right-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-right-4";case"right-start":return"tooltip animate-out fade-out slide-out-to-left-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-left-4";case"bottom-start":return"tooltip animate-out fade-out slide-out-to-top-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-top-4";default:return"tooltip animate-out fade-out slide-out-to-bottom-2 data-[expanded]:animate-in data-[expanded]:fade-in data-[expanded]:slide-in-from-bottom-4"}},[n,r]=I(e.open??!1);A(()=>{i(e.open??!1)});let o=null;const i=a=>{if(!e.disabled){if(o&&clearTimeout(o),a===!1)return r(!1);o=setTimeout(()=>{r(a)},e.openDelay??0)}},[s,l]=I(!1);return g(ju,{get placement(){return e.placement},get gutter(){return e.gutter??8},get open(){return n()},get onOpenChange(){return e.onOpenChange},get children(){return[g(Wu,{get as(){return e.as??"button"},get onFocus(){return e.onFocus},onFocusIn:async a=>{await hs(),!s()&&i(!0)},onFocusOut:()=>i(!1),onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),onPointerDown:()=>{l(!0),setTimeout(()=>l(!1),500)},get disabled(){return e.disabled},get class(){return e.class},get onClick(){return e.onClick},get children(){return e.triggerSlot}}),g($u,{get children(){return g(Uu,{get class(){return`${t()} z-[99999999] break-words max-w-xs rounded-sm bg-black/90 px-2 py-0.5 text-sm font-medium font-sans text-white`},get children(){return e.contentSlot}})}})]}})}var xd=["<div",' class="','"><div class="','">','</div><div class="','"><div class="','"><!--$-->',"<!--/--><!--$-->",'<!--/--></div><div class="flex flex-col justify-start min-w-[32px]">',"</div></div></div>"],wd=["<div",' class="flex flex-col gap-1"><div aria-hidden="true" class="animate-pulse bg-bg2 w-full rounded-lg h-4 "></div><div aria-hidden="true" class="animate-pulse bg-bg2 w-1/2 h-4 rounded-lg "></div></div>'],Sd=["<img",' class="','"',' width="2560" height="1440" alt="" loading="lazy">'],Ed=["<div",' class="relative h-0 w-0 "><div class="absolute flex items-center left-2 bottom-2 bg-bg1/90 rounded px-1 py-px border border-bg2 w-max h-max text-xs"><!--$-->',"<!--/--><!--$-->","<!--/--></div></div>"],Td=["<div",' class="absolute left-2 bottom-2 bg-bg1/90 rounded px-1 py-px border border-bg2 w-max h-max text-xs">Watched</div>'],Cd=["<div",' class="relative h-0 w-12 place-self-end lg:w-16 "><div class="absolute bottom-2 right-2 bg-bg1/90 rounded px-1 py-px border border-bg2 text-xs"><!--$-->',"<!--/--><!--$-->","<!--/--></div></div>"],Pd=["<div",' class="relative h-0 w-full"><div style="','" class="absolute bottom-0 h-1 bg-highlight"></div></div>'],Id=["<div",' class="','"><div class="animate-pulse bg-bg2 aspect-video h-full overflow-hidden max-w-fit w-full"><div class="w-96 h-full"></div></div></div>'],Od=["<img",' class="rounded-full w-6 h-6 aspect-square min-w-[24px] min-h-[24px]" alt="">'],Ad=["<div",' class="group mb-1 w-max">',"</div>"],Dd=["<div",' class="peer w-fit truncate max-w-[10rem]">',"</div>"],Ld=["<div",' class="w-fit" title="','"> <!--$-->',"<!--/--> views</div>"],Md=["<div",' class="mx-1">•</div>'],Fd=["<div",' class=""><!--$-->',"<!--/--> </div>"],_d=["<div",' class="flex gap-1 text-text2 w-full sm:max-w-full "><!--$-->','<!--/--><div class="flex w-full flex-col text-xs "><!--$-->','<!--/--><div class="flex flex-wrap w-full"><!--$-->',"<!--/--><!--$-->","<!--/--><!--$-->","<!--/--></div></div></div>"],Rd=["<div",' class="flex flex-col gap-2 pr-2 w-full "><div class="flex gap-2 text-text2"><div class="animate-pulse bg-bg2 w-8 h-8 aspect-square rounded-full"></div><div class="flex w-full flex-col gap-2 justify-center"><div class="animate-pulse bg-bg2 w-32 h-4 rounded-lg"></div></div></div></div>'];const Nd=e=>{e=Kt({layout:"sm:grid"},e);const t=ir(),[n]=is(),r=()=>t.store.history[Ie(e.v)]?.watchedAt,[o,i]=I(void 0);A(()=>{const[c]=cr(r()??new Date,{interval:6e4,relativeFormatter:ms});i(c())});const[s]=e.v?cr(e.v.uploaded,{interval:0}):[()=>""],l=()=>Ie(e.v),a=()=>l()?t.store.history[l()]:void 0;return B(xd,H(),`flex flex-row gap-2 mx-1 items-start rounded-xl bg-bg1 p-2  ${e.layout==="list"?"min-w-full":""} ${e.layout==="sm:grid"?"sm:max-w-max  sm:flex-col sm:w-72 sm:gap-0 min-w-full sm:min-w-0":""} ${e.layout==="grid"?"h-max max-h-max max-w-max flex-col w-full gap-2 sm:w-72":""}`,`aspect-video overflow-hidden rounded ${e.layout==="list"?"max-h-96":""} ${e.layout==="sm:grid"?"max-h-44 min-w-min sm:max-h-full sm:w-full":""}`,O(g(W,{get when(){return e.v},get fallback(){return g(Hd,{get layout(){return e.layout}})},get children(){return g(Bd,{get url(){return`/watch?v=${l()}${n.fullscreen?`&fullscreen=${n.fullscreen}`:""}`},get src(){return e.v.thumbnail},get duration(){return e.v.duration},get watched(){return!!a()},get watchedAt(){return o()},get currentTime(){return a()?.currentTime}})}})),`flex w-full min-w-0 max-w-full justify-between h-full  sm:mt-2 max-h-20 ${e.layout==="grid"?"max-w-[22rem]":""}`,`flex flex-col min-w-0 gap-2 pr-2 h-full w-full ${e.layout==="sm:grid"||e.layout==="list"?"max-w-[10rem] [@media(min-width:380px)]:max-w-[11rem] [@media(min-width:400px)]:max-w-full":""} ${e.layout==="grid"?"max-w-full":""}`,O(g(W,{get when(){return e.v},get fallback(){return B(wd,H())},get children(){return g(yd,{as:"div",placement:"top",openDelay:1e3,get triggerSlot(){return g(Ft,{get href(){return`/watch?v=${l()}`},class:"rounded text-start two-line-ellipsis min-w-0 py-1 outline-none focus-visible:ring-2 focus-visible:ring-primary",get children(){return e.v.title}})},get contentSlot(){return e.v.title}})}})),O(g(W,{get when(){return e.v},get fallback(){return g(Kd,{})},get children(){return g(kd,{get url(){return e.v.url},get title(){return e.v.title},get uploaderName(){return e.v.uploaderName},get uploaderUrl(){return e.v.uploaderUrl},get uploaderAvatar(){return e.v.uploaderAvatar},get views(){return e.v.views},get uploaded(){return s()},get uploadedDate(){return new Date(e.v.uploaded)},get live(){return e.v.uploaded===-1}})}})),O(g(W,{get when(){return e.v},get children(){return g(bd,{get v(){return e.v},get progress(){return a()?.currentTime}})}})))},Sf=Nd,Bd=e=>{const[t,n]=I(e.src);return g(Ft,{get href(){return e.url},class:"relative w-[10rem] flex aspect-video sm:w-full flex-col overflow-hidden rounded sm:min-w-min text-text1 outline-none focus-visible:ring-2 focus-visible:ring-primary",get children(){return[B(Sd,H(),`cursor-pointer w-full aspect-video max-w-md break-words  ${e.watched?"saturate-[0.35] opacity-75":""}`,Ke("src",O(t(),!0),!1)),g(Nn,{get children(){return[g(Ze,{get when(){return e.watched&&e.watchedAt},get children(){return B(Ed,H(),O(g(Qi,{title:"Watched",class:"inline-block h-3 w-3 mr-1"})),O(e.watchedAt))}}),g(Ze,{get when(){return e.watched&&!e.watchedAt},get children(){return B(Td,H())}})]}}),B(Cd,H(),O(g(W,{get when(){return e.duration===-1},children:"Live"})),O(g(W,{get when(){return e.duration!==-1},get children(){return xn(e.duration).format("00:00:00").replace(/^0:/,"")}}))),g(W,{get when(){return e.currentTime},get children(){return B(Pd,H(),`width:clamp(0%, ${O(e.currentTime,!0)/O(e.duration,!0)*100}%, 100%`)}})]}})},Hd=e=>B(Id,H(),`relative flex aspect-video min-w-0 flex-col rounded-lg overflow-hidden ${e.layout==="grid"?"w-full":""} ${e.layout==="sm:grid"?"w-[10rem] sm:w-full sm:max-w-[18rem]":""} ${e.layout==="list"?"w-[10rem]":""}`),kd=e=>{const t=()=>{let n="";return e.uploaderUrl.startsWith("UC")?n=`/channel/${e.uploaderUrl}`:e.uploaderUrl.startsWith("/")&&(n=e.uploaderUrl),n};return B(_d,H(),O(g(W,{get when(){return e.uploaderAvatar},get children(){return B(Ad,H(),O(g(Ft,{get href(){return t()},class:"flex max-w-max min-w-min items-center outline-none focus-visible:ring-2 focus-visible:ring-primary",get children(){return B(Od,H()+Ke("src",O(e.uploaderAvatar,!0),!1))}})))}})),O(g(Ft,{get href(){return t()},class:"outline-none focus-visible:ring-2 focus-visible:ring-primary",get children(){return B(Dd,H(),O(e.uploaderName))}})),O(g(W,{get when(){return e.views},get children(){return B(Ld,H(),`${O(xn(e.views).format("0,0"),!0)} views`,O(xn(e.views).format("0a").toUpperCase()))}})),O(g(W,{get when(){return!e.live},get children(){return B(Md,H())}})),O(g(W,{get when(){return!e.live},get children(){return B(Fd,H()+Ke("title",O(e.uploadedDate.toLocaleString(),!0),!1),O(e.uploaded))}})))},Kd=()=>B(Rd,H()),Ud={fetchVideo:async(e,t)=>{if(!e)throw new Error("videoId is undefined");let n=await fetch(t+"/streams/"+e);if(!n.ok)throw new Error("video not found");return n.json()}},Ef=Ud;var $d=["<svg",' class="','" fill="none" viewBox="0 0 120 120" aria-hidden="true"><circle class="opacity-25" cx="60" cy="60" r="54" stroke="currentColor" stroke-width="8"></circle><circle class="opacity-75" cx="60" cy="60" r="54" stroke="currentColor" stroke-width="10" pathLength="100" style="','"></circle></svg>'];const Vd=e=>B($d,H(),`h-24 w-24 text-white duration-300 animate-spin ${e.class?O(e.class,!0):""}`,"stroke-dasharray:50;stroke-dashoffset:50");var Gd=["<div",' class="flex item-center w-full justify-center align-bottom"><!--$-->',"<!--/--><!--$-->","<!--/--><!--$-->","<!--/--><div><!--$-->","<!--/--><!--$-->","<!--/--><!--$-->","<!--/--></div><!--$-->","<!--/--></div>"];function qt(e){return g(wi,{get toastId(){return e.toastId},classList:{"flex flex-col justify-between outline-none border-0 items-center gap-2 rounded p-3 bg-bg2 shadow ring-2 ring-inset ring-bg1 text-text1 data-[opened]:animate-in data-[opened]:fade-in data-[opened]:slide-in-from-right data-[closed]:animate-out data-[closed]:transition-[transform] data-[closed]:translate-x-[var(--kb-toast-swipe-end-x)] data-[closed]:fade-out-25 data-[swipe=cancel]:translate-x-0 data-[swipe=cancel]:transition-[transform] data-[swipe=move]:translate-x-[var(--kb-toast-swipe-move-x)] data-[swipe=end]:animate-out data-[swipe=end]:fade-out data-[swipe=end]:slide-out-to-right":!0},get children(){return[B(Gd,H(),O(g(rn,{get when(){return e.success},get children(){return g(es,{class:"h-5 w-5 text-green-600 mr-2 "})}})),O(g(rn,{get when(){return e.error},get children(){return g(ts,{class:"h-5 w-5 text-red-600 mr-2 "})}})),O(g(rn,{get when(){return e.loading},get children(){return g(Vd,{class:"w-5 h-5 mr-2"})}})),O(g(Ku,{class:"",get children(){return e.title}})),O(g(Nu,{class:"",get children(){return e.description}})),O(e.children),O(g(Ru,{class:"ml-auto rounded",get children(){return g(ro,{class:"h-4 w-4"})}}))),g(ku,{class:"w-full h-1 bg-bg1",get children(){return g(Hu,{class:"bg-primary h-full rounded w-[var(--kb-toast-progress-fill-width)] transition-[width]"})}})]}})}function jd(e){return rt.show(t=>g(qt,{get toastId(){return t.toastId},title:e}))}function Wd(e){return rt.show(t=>g(qt,{get toastId(){return t.toastId},title:e,success:!0}))}function zd(e){return rt.show(t=>g(qt,{get toastId(){return t.toastId},title:e,error:!0}))}function Xd(e,t){return rt.promise(e,n=>g(qt,{get toastId(){return n.toastId},get loading(){return n.state==="pending"},get success(){return n.state==="fulfilled"},get error(){return n.state==="rejected"},get children(){return g(Mi,{get children(){return[g(nn,{get when(){return n.state==="pending"},get children(){return t.loading}}),g(nn,{get when(){return n.state==="fulfilled"},get children(){return t.success?.(n.data)}}),g(nn,{get when(){return n.state==="rejected"},get children(){return t.error?.(n.error)}})]}})}}))}function Yd(e){return rt.show(t=>g(wi,{get toastId(){return t.toastId},get children(){return e()}}))}function qd(e){return rt.dismiss(e)}const Se={show:jd,success:Wd,error:zd,promise:Xd,custom:Yd,dismiss:qd},[Zd]=bt({playlists:{},history:{},subscriptions:{},preferences:{},watchLater:{},blocklist:{}}),Rn=new Y.Doc({guid:"test"}),[Oi,Ai]=fs(Rn,Zd,!1),Di=re({store:Oi,setStore:Ai}),Tf=e=>{const[t,n]=I("localStorage"in globalThis?JSON.parse(localStorage.getItem("room")||"{}"):{});let r=null,o=null;const i=async()=>{if(!t().id){s("sync","providers","webrtc","disconnected");return}r&&(console.log("disconnecting"),r.disconnect()),s("sync","providers","webrtc","connecting"),r=new Ki(t().id,Rn,{signaling:["wss://signaling.fly.dev"],...t().password&&{password:t().password}}),console.log(r,"webrtc provider"),r.connect()};A(async()=>{if(await i(),s("sync","providers","webrtc","disconnected"),!r)return;r.awareness.setLocalStateField("user",{name:t().name});let l=[];r.awareness.states.forEach((a,c)=>{console.log(a,c),l.push({id:c,name:a.user.name})}),s("sync","users",l),r?.awareness.on("change",({added:a,updated:c,removed:u})=>{let f=[];r.awareness.states.forEach((h,p)=>{console.log(h,p),f.push({id:p,name:h.user.name})}),s("sync","users",f),s("sync","lastSync",new Date().getTime()),s("sync","providers","webrtc",r.connected?"connected":"disconnected"),console.log("Awareness changed",a,c,u,f)})});const[,s]=no();return A(async()=>{if(!t().id){s("sync","providers","idb","disconnected");return}s("sync","providers","idb","disconnected"),o=new ys(t().id,Rn,!0),s("sync","providers","opfs","connecting");try{await o.sync(),s("sync","providers","opfs","connected")}catch(l){console.error("Error syncing with OPFSx",l),s("sync","providers","opfs","disconnected"),Se.error("Error syncing with OPFS")}k(()=>{o?.destroy()})}),k(()=>{r?.disconnect()}),g(Di.Provider,{value:{store:Oi,setStore:Ai},get children(){return e.children}})},ir=()=>{const e=oe(Di);if(!e)throw new Error("No SyncedStoreProvider!");return e};export{ju as $,wf as A,St as B,Jr as C,Wt as D,ir as E,df as F,yf as G,Eu as H,wu as I,yu as J,Su as K,Qo as L,pu as M,Xu as N,zu as O,te as P,Ii as Q,Se as R,xf as S,_u as T,uf as U,Sf as V,bf as W,Tf as X,Bn as Y,ps as Z,Vd as _,vf as a,Wu as a0,$u as a1,Uu as a2,$t as a3,ao as a4,ea as a5,Ea as a6,Ta as a7,ga as a8,yo as a9,yd as aA,mf as aB,Ca as aC,Pa as aD,Oa as aE,hs as aF,Le as aG,bu as aH,S as aa,ed as ab,hf as ac,ff as ad,Du as ae,lu as af,Pu as ag,cu as ah,Lu as ai,Mu as aj,Cu as ak,Ou as al,Tu as am,Iu as an,Ef as ao,gf as ap,Ie as aq,Yn as ar,Zs as as,Vt as at,Bl as au,ee as av,rc as aw,oc as ax,Uo as ay,ks as az,Ve as b,$n as c,hu as d,jn as e,Wn as f,Gn as g,Zn as h,se as i,ye as j,xt as k,Je as l,z as m,Ce as n,ne as o,rr as p,q,xi as r,fe as s,Hn as t,st as u,tt as v,Ho as w,Bu as x,G as y,Rt as z};
//# sourceMappingURL=syncStore-DaflpWzS.js.map

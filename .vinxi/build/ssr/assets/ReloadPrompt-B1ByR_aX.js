import{ssr as f,ssrHydrationKey as c,ssrAttribute as u,escape as n,createComponent as _}from"solid-js/web";import{createSignal as b,Show as S}from"solid-js";function v(o={}){const{immediate:p=!1,onNeedRefresh:a,onOfflineReady:i,onRegistered:R,onRegisteredSW:t,onRegisterError:l}=o;let e,d,m;const y=async(W=!0)=>{await d,await m?.()};async function w(){if("serviceWorker"in navigator){const{Workbox:W}=await import("./workbox-window.prod.es5-DFjpnwFp.js");e=new W("/claims-sw.js",{scope:"/",type:"classic"}),m=async()=>{await e?.messageSkipWaiting()};{let s=!1;const h=()=>{s=!0,e?.addEventListener("controlling",r=>{r.isUpdate&&window.location.reload()}),a?.()};e.addEventListener("installed",r=>{typeof r.isUpdate>"u"?typeof r.isExternal<"u"?r.isExternal?h():!s&&i?.():r.isExternal?window.location.reload():!s&&i?.():r.isUpdate||i?.()}),e.addEventListener("waiting",h),e.addEventListener("externalwaiting",h)}e.register({immediate:p}).then(s=>{t?t("/claims-sw.js",s):R?.(s)}).catch(s=>{l?.(s)})}}return d=w(),y}function k(o={}){const{immediate:p=!0,onNeedRefresh:a,onOfflineReady:i,onRegistered:R,onRegisteredSW:t,onRegisterError:l}=o,[e,d]=b(!1),[m,y]=b(!1),w=v({immediate:p,onOfflineReady(){y(!0),i?.()},onNeedRefresh(){d(!0),a?.()},onRegistered:R,onRegisteredSW:t,onRegisterError:l});return{needRefresh:[e,d],offlineReady:[m,y],updateServiceWorker:w}}const T="_Container_18by0_1",E="_Toast_18by0_7",C="_ToastMessage_18by0_21",N="_ToastButton_18by0_24",g={Container:T,Toast:E,ToastMessage:C,ToastButton:N};var $=["<span",">App ready to work offline</span>"],x=["<button",">Reload</button>"],B=["<div","><div",">","</div><!--$-->","<!--/--><button",">Close</button></div>"],M=["<div",">","</div>"],O=["<span",">New content available, click on reload button to update.</span>"];const U=()=>{const{needRefresh:[o,p],offlineReady:[a,i],updateServiceWorker:R}=k({immediate:!0,onRegisteredSW(t,l){console.log(`Service Worker at: ${t}`),console.dir(l)},onRegisterError(t){console.trace("SW registration error",t)}});return f(M,c()+u("class",n(g.Container,!0),!1),n(_(S,{get when(){return a()||o()},get children(){return f(B,c()+u("class",n(g.Toast,!0),!1),u("class",n(g.Message,!0),!1),n(_(S,{get fallback(){return f(O,c())},get when(){return a()},get children(){return f($,c())}})),n(_(S,{get when(){return o()},get children(){return f(x,c()+u("class",n(g.ToastButton,!0),!1))}})),u("class",n(g.ToastButton,!0),!1))}})))};export{U as default};
//# sourceMappingURL=ReloadPrompt-B1ByR_aX.js.map

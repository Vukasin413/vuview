import{ssr as s,ssrHydrationKey as i,escape as f,createComponent as n}from"solid-js/web";import{createSignal as u,createEffect as g,For as w}from"solid-js";import{A as h,V as D,aq as y}from"./Toast.mjs";import"./index5.mjs";import"./index2.mjs";import"y-webrtc";import"yjs";import"solid-js/store";import"./Link.mjs";import"./routing.mjs";import"./components.mjs";import"lib0/observable";import"numeral";import"@solid-primitives/date";import"./index4.mjs";var x=["<h1",' class="text-xl">Downloads</h1>'],S=["<div",' class="flex flex-wrap justify-center">',"</div>"];function E(){const[l,c]=u([]);return h(),g(async()=>{const t=await navigator.storage.getDirectory();console.log(t,Object.keys(t));const p=JSON.parse(localStorage.getItem("downloaded")||"[]");for(const o of p){const e=await t.getDirectoryHandle(o,{create:!1});if(!e)continue;console.log(e);const a=await e.getFileHandle("streams.json",{create:!1});if(!a)continue;const m=await(await a.getFile()).text(),r=JSON.parse(m);console.log(r),c(d=>[...d,{...r,id:o}])}}),[s(x,i()),s(S,i(),f(n(w,{get each(){return l()},children:t=>n(D,{get v(){return{...t,url:`/watch?v=${y(t)}`,type:"stream",thumbnail:t.thumbnailUrl,uploaderName:t.uploader,uploadedDate:t.uploadDate,shortDescription:"",uploaded:new Date(t.uploadDate).getTime(),isShort:!1}}})})))]}export{E as default};
//# sourceMappingURL=downloads.mjs.map

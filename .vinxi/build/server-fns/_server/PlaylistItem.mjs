import{createComponent as n,ssr as l,ssrHydrationKey as i,escape as t,ssrAttribute as x}from"solid-js/web";import a from"numeral";import{createSignal as s,createRenderEffect as g,onMount as b,onCleanup as w}from"solid-js";import{E as h,A as y,aq as m}from"./Toast.mjs";import{createTimeAgo as $}from"@solid-primitives/date";import{L as d}from"./Link.mjs";var I=["<div",' class="','"></div>'],k=["<div",' class="flex max-w-full w-full @container"><div class="','">','</div><div class="shadow-xl my-auto w-0 min-w-[6rem] @[20rem]:min-w-[7rem] @[35rem]:min-w-[9rem] @[50rem]:min-w-[11rem]max-w-[6rem] @[20rem]:max-w-[7rem] @[35rem]:max-w-[9rem] @[50rem]:max-w-[11rem] aspect-video max-h-full rounded-lg "><img class="object-cover w-full h-full max-w-full max-h-full rounded-lg "',"><!--$-->",'<!--/--><div class="relative h-0 w-full bg-red-500 align-self-end"><div class="absolute bottom-1 right-1 text-xs @[20rem]:text-sm rounded bg-bg1/80 text-text1 px-1">','</div></div></div><div class="px-2 max-w-full min-w-0"><div class="max-h-10 min-w-0 font-bold max-w-full text-sm overflow-hidden overflow-ellipsis "><!--$-->','<!--/--> </div><div class="truncate text-xs text-text2"><!--$-->','<!--/--><div class="inline-block mr-1"><!--$-->','<!--/--> views •</div><div class="inline-block mr-1">',"</div></div></div></div>"],P=["<div",' class="self-center justify-self-end ml-2"></div>'],j=["<div",' class="relative h-0 w-full"><div style="','" class="absolute bottom-0 h-1 bg-highlight"></div></div>'];const A=e=>{const[r,o]=s(void 0),c=h();y(),g(async()=>{const v=c.store.playlists[e.list]?.relatedStreams?.find(f=>m(f)===m(e.v));o(v?.currentTime)}),b(()=>{console.log("effect"),import("long-press-event")}),w(()=>{}),s(!1);const[u]=$(e.v.uploaded,{interval:1e3*60});return n(d,{get href(){return`${e.v.url}&list=${e.list}&index=${e.index}`},class:"select-none relative min-h-[5rem] flex justify-between bg-bg2 hover:bg-bg1 px-1 focus-visible:ring-2 focus-visible:ring-accent1 outline-none mx-1 py-2 rounded-lg text-text1",get children(){return[l(I,i(),`${parseInt(e.active)===e.index?"bg-primary/50 ":""} absolute inset-0 w-full h-full bg-bg1/50 rounded-lg`),l(k,i(),`${parseInt(e.active)===e.index?"bg-primary text-text3 ":""} ${parseInt(e.active)!==e.index?"bg-bg2 text-text1":""} flex absolute aspect-square -top-2 -left-1  py-2 font-bold flex-col items-center justify-center h-4 rounded-md rounded-bl-none rounded-tr-none px-3 text-xs`,t(e.index),x("src",t(e.v.thumbnail,!0),!1),!!r()&&l(j,i(),`width:clamp(0%, ${t(r(),!0)/t(e.v.duration,!0)*100}%, 100%`),t(a(e.v.duration).format("00:00:00").replace(/^0:/,"")),t(e.v.title),t(n(d,{get href(){return e.v.uploaderUrl},class:"inline-block mr-1 link !text-text2",get children(){return[e.v.uploaderName," •"]}})),t(a(e.v.views).format("0a").toUpperCase()),t(u())),l(P,i())]}})},T=A;export{T as P};
//# sourceMappingURL=PlaylistItem.mjs.map

import{createComponent as r,ssr as y,ssrHydrationKey as h,escape as p}from"solid-js/web";import{createSignal as g,createEffect as u,Show as d,For as v}from"solid-js";import{E as w,A as x}from"./Toast.mjs";import{createQuery as P}from"@tanstack/solid-query";import{P as S}from"./PlaylistItem.mjs";import{T as q}from"./index3.mjs";import{h as b}from"./routing.mjs";import"./index5.mjs";import"./index2.mjs";import"y-webrtc";import"yjs";import"solid-js/store";import"./Link.mjs";import"./components.mjs";import"lib0/observable";import"numeral";import"@solid-primitives/date";import"./index4.mjs";var L=["<div",' class="max-w-5xl mx-auto"><h1 class="text-2xl font-bold mb-4">','</h1><div class="grid grid-cols-1 gap-4 ">',"</div></div>"];function G(){const[i,o]=g(),a=b(),n=()=>a.query.list?.startsWith("conduit-"),t=a.query.list,l=w(),[c]=x();u(async()=>{if(!t||!n())return;await new Promise(e=>setTimeout(e,100));const s=l.store.playlists[t];o(s)});const m=P(()=>({queryKey:["playlist"],queryFn:async()=>(await fetch(c.instance.api_url+"/playlists/"+t)).json(),enabled:!!(c.instance.api_url&&!n()&&t)}));return u(()=>{m.data&&o(m.data)}),[r(q,{get children(){return i()?i().name:"Playlist"}}),r(d,{get when(){return i()},keyed:!0,children:s=>y(L,h(),p(i().name),p(r(d,{get when(){return s.relatedStreams.length>0},get children(){return r(v,{get each(){return s.relatedStreams.filter(e=>!l.store.blocklist[e?.uploaderUrl?.split("/").pop()])},children:(e,f)=>r(S,{active:"",v:e,get index(){return f()+1},list:t})})}})))})]}export{G as default};
//# sourceMappingURL=playlist.mjs.map

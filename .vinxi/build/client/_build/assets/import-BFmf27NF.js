import{r as O,M as m,Z as A,O as J,y as _,j as v,K as S,w as $,e as T,x as F,F as L,l as P}from"./routing-BmD2xUmi.js";import{L as G}from"./syncStore-BssUQgBy.js";import"./Link-Dg-h0Eyu.js";import"./components-BMGKah2q.js";import"./index-BnPmuIsI.js";import"./index-DPECAXpK.js";import"./index-Cb4tY8hP.js";var M=_('<label class="flex cursor-pointer items-center "><div class="relative focus-within:ring-4 rounded-full ring-primary p-1"><input type=checkbox class="peer sr-only"><div class="peer-checked:ring-bg2 block h-8 w-14 rounded-full bg-bg1 ring-2 ring-bg3 focus:ring-4 focus:ring-primary peer-checked:bg-primary"></div><div class="absolute left-2 top-2 h-6 w-6 rounded-full bg-bg3 shadow shadow-black/50 transition duration-200 peer-checked:translate-x-full peer-checked:bg-accent1">');function z({label:a,onChange:t,checked:u}){return(()=>{var d=O(M),f=d.firstChild,r=f.firstChild;return m(d,"for",a),A(r,"change",t),J(r,"checked",u),m(r,"id",a),d})()}var U=_('<div class=text-center><form><div><input type=file></div><div><strong><!$><!/> </strong></div><div class="flex items-center justify-center my-2 gap-2">Override <!$><!/></div><div><button class="btn w-auto">Import</button></div></form><br><strong>Importing Subscriptions from YouTube</strong><br><div>Open<a href=https://takeout.google.com/takeout/custom/youtube>takeout.google.com/takeout/custom/youtube</a><br>In "Select data to include", click on "All YouTube data included" and select only "subscriptions".<br>Create the export and download the zip file.<br>Extract subscriptions.csv from the zip file.<br>Select and import the file above.</div><br><strong>Importing Subscriptions from Invidious</strong><br><div>Open<a href=https://invidio.us/data_control>invidiou.us/data_control</a><br>Click on any of the export options.<br>Select and import the file above.</div><br><strong>Importing Subscriptions from NewPipe</strong><br><div>Go to the Feed tab.<br>Click on the arrow on where it says "Subscriptions".<br>Save the file somewhere.<br>Select and import the file above.');function Q(){const[a,t]=v({}),[u,d]=v(!1),f=()=>Object.keys(a()).length,r=G();r.store.subscriptions;let b;function y(){if(console.log("fileChange",b?.files?.[0]?.name),!b?.files?.[0])return;const l=b.files[0];l.text().then(s=>{if(s.includes("Conduit")){console.log("Conduit");const i=JSON.parse(s);console.log(i),t(i.subscriptions),i.playlists&&i.playlists.forEach(e=>{r.setStore("playlists",e.id,e),r.setStore("playlists",e.id,"relatedStreams",e.relatedStreams)})}else if(s.indexOf("opml")!=-1)console.log("Invidious"),new DOMParser().parseFromString(s,"text/xml").querySelectorAll("outline[xmlUrl]").forEach(o=>{const c=o.getAttribute("xmlUrl")?.slice(-24);c&&t(p=>({...p,[c]:{subscribedAt:Date.now()}}))});else if(s.indexOf("localSubscriptions")!=-1)console.log("LibreTube"),JSON.parse(s).localSubscriptions.forEach(e=>{t(o=>({...o,[e.channelId]:{subscribedAt:Date.now()}}))});else if(s.indexOf("app_version")!=-1)console.log("NewPipe"),JSON.parse(s).subscriptions.filter(e=>e.service_id==0).forEach(e=>{const n=e.url.slice(-24);t(c=>({...c,[n]:{subscribedAt:Date.now()}}))});else if(s.indexOf("thin_mode")!=-1)console.log("Invidious JSON"),JSON.parse(s).subscriptions.forEach(e=>{t(o=>({...o,[e]:{subscribedAt:Date.now()}}))});else if(s.indexOf("allChannels")!=-1)console.log("FreeTube DB"),JSON.parse(s).subscriptions.forEach(e=>{t(o=>({...o,[e.id]:{subscribedAt:Date.now()}}))});else if(s.indexOf("subscriptions")!=-1)console.log("FreeTube JSON"),JSON.parse(s).subscriptions.forEach(e=>{t(o=>({...o,[e.id]:{subscribedAt:Date.now()}}))});else if(s.indexOf("contentDetails")!=-1)console.log("Google Takeout JSON"),JSON.parse(s).forEach(e=>{const o=e.snippet.resourceId.channelId;t(n=>({...n,[o]:{subscribedAt:Date.now()}}))});else if(l.name.length>=5&&l.name.slice(-4).toLowerCase()==".csv"){console.log("Google Takeout CSV");const i=s.split(`
`);for(let e=1;e<i.length;e++){const o=i[e],n=o.slice(0,o.indexOf(","));n.length===24&&t(c=>({...c,[n]:{subscribedAt:Date.now()}}))}}})}function k(l){l.preventDefault(),u()&&Object.keys(r.store.subscriptions).forEach(s=>{r.setStore("subscriptions",s,void 0)}),console.log("subs",a(),w());try{r.setStore("subscriptions",a())}catch{alert("Error saving subscriptions")}}function w(){try{return r.store.subscriptions}catch{return[]}}return(()=>{var l=O(U),s=l.firstChild,i=s.firstChild,e=i.firstChild,o=i.nextSibling,n=o.firstChild,c=n.firstChild,[p,C]=S(c.nextSibling);p.nextSibling;var g=o.nextSibling,x=g.firstChild,j=x.nextSibling,[E,D]=S(j.nextSibling),N=g.nextSibling,I=N.firstChild;e.$$input=y;var h=b;return typeof h=="function"?L(h,e):b=e,$(n,()=>`Selected Subscriptions: ${f()}`,p,C),$(g,T(z,{label:"Override",get checked(){return u()},onChange:()=>d(!u())}),E,D),I.$$click=k,F(),l})()}P(["input","click"]);export{Q as default};
//# sourceMappingURL=import-BFmf27NF.js.map

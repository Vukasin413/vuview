{"version":3,"mappings":"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","names":["ParseErrorCode","LoadFail","BadSignature","BadTimestamp","BadSettingValue","BadFormat","UnknownSetting","ParseError","Error","code","line","constructor","init","reason","LINE_TERMINATOR_RE","TextLineTransformStream","writable","readable","encoding","transformer","TextStreamLineIterator","WritableStream","write","chunk","transform","close","ReadableStream","start","controller","onLine","enqueue","onClose","x","y","TextDecoder","decode","stream","lines","split","pop","i","length","trim","parseText","text","options","parseTextStream","type","factory","__vitePreload","default","Promise","resolve","then","vttParser","result","reader","getReader","parser","errors","strict","cancel","done","value","read","parse","parseResponse","response","res","ok","body","metadata","cues","regions","error","contentType","headers","get","match","parseByteStream","textStream","pipeThrough","TextCue","EventTarget","id","startTime","endTime","pauseOnExit","addEventListener","listener","removeEventListener","IS_SERVER","document","CueBase","window","VTTCue","region","vertical","snapToLines","lineAlign","position","positionAlign","size","align","style","VTTRegion","width","regionAnchorX","regionAnchorY","viewportAnchorX","viewportAnchorY","scroll","COMMA$1","PERCENT_SIGN$1","toNumber","num","parseInt","Number","isNaN","toPercentage","replace","toCoords","includes","map","toFloat","parseFloat","HEADER_MAGIC","COMMA","PERCENT_SIGN","SETTING_SEP_RE","SETTING_LINE_RE","NOTE_BLOCK_START","REGION_BLOCK_START","REGION_BLOCK_START_RE","SPACE_RE","TIMESTAMP_SEP","TIMESTAMP_SEP_RE","ALIGN_RE","LINE_ALIGN_RE","POS_ALIGN_RE","TIMESTAMP_RE","VTTBlock","VTTBlock2","VTTParser","f","c","g","h","j","a","b","k","d","l","ParseErrorBuilder","lineCount","push","onCue","onRegion","onHeaderMetadata","hasText","test","m","n","startsWith","o","Object","values","key","e","p","startTimeText","trailingText","endTimeText","settingsText","parseVTTTimestamp","q","r","s","settings","badValue","name","viewport","t","u","linePos","percentage","number","colPos","colAlign","v","w","onError","timestamp","hours","minutes","seconds","milliseconds","padEnd","total","createVTTParser","freeze","__proto__","DIGIT_RE","MULTI_SPACE_RE","TAG_NAME","ruby","rt","lang","HTML_ENTITIES","HTML_ENTITY_RE","COLORS","Set","BLOCK_TYPES","keys","tokenizeVTTCue","cue","buffer","mode","stack","node","char","addText","addNode","addClass","class","voice","replaceHTMLEntities","time","has","parent","createBlockNode","children","color","data","tagName","entity","setCSSVar","el","setProperty","setDataAttr","setAttribute","setPartAttr","getLineHeight","getComputedStyle","lineHeight","createVTTCueTemplate","template","createElement","innerHTML","renderVTTCueString","content","currentTime","renderVTTTokensString","tokens","attrs","token","isTimestamp","title","bgColor","attributes","entries","filter","join","updateTimedVTTCueNodes","root","querySelectorAll","getAttribute","removeAttribute","debounce","fn","delay","timeout","args","run","clear","clearTimeout","debounce2","slice","call","arguments","setTimeout","STARTING_BOX","Symbol","createBox","box","HTMLElement","top","offsetTop","clientWidth","height","clientHeight","left","offsetLeft","right","bottom","moveBox","axis","delta","isBoxCollision","isAnyBoxCollision","boxes","isWithinBox","container","isBoxOutOfBounds","calcBoxIntersectPercentage","Math","max","min","createCSSBox","resolveRelativeBox","BOX_SIDES","setBoxCSSVars","prefix","cssBox","side","avoidBoxCollisions","positionedBox","startBox","intersection","POSITION_OVERRIDE","positionCue","displayEl","cueEl","firstElementChild","computeCueLine","displayBox","createStartingBox","step","round","maxPosition","initialAxis","abs","ceil","reverse","isHorizontal","posAxis","pos","getStyledPositions","positions","getPropertyValue","computeCuePosition","computeCuePositionAlignment","dir","REGION_AXIS","positionRegion","regionEl","Array","from","limit","offsetHeight","CaptionsRenderer","overlay","z","A","C","B","D","E","Map","update","G","ResizeObserver","I","bind","observe","changeTrack","reset","J","set","addCue","removeCue","delete","forceUpdate","H","textContent","destroy","disconnect","K","activeCues","cue2","sort","cueA","cueB","activeRegions","remove","L","F","hasAttribute","requestAnimationFrame","isConnected","append","seen","isRegion","add","M","display","positionAlignment","prop","maxSize"],"ignoreList":[0],"sources":["../../../../../node_modules/.pnpm/media-captions@1.0.3/node_modules/media-captions/dist/prod/index.js"],"sourcesContent":["const ParseErrorCode = {\n  LoadFail: 0,\n  BadSignature: 1,\n  BadTimestamp: 2,\n  BadSettingValue: 3,\n  BadFormat: 4,\n  UnknownSetting: 5\n};\nclass ParseError extends Error {\n  code;\n  line;\n  constructor(init) {\n    super(init.reason);\n    this.code = init.code;\n    this.line = init.line;\n  }\n}\n\nconst LINE_TERMINATOR_RE = /\\r?\\n|\\r/gm;\nclass TextLineTransformStream {\n  writable;\n  readable;\n  constructor(encoding) {\n    const transformer = new TextStreamLineIterator(encoding);\n    this.writable = new WritableStream({\n      write(chunk) {\n        transformer.transform(chunk);\n      },\n      close() {\n        transformer.close();\n      }\n    });\n    this.readable = new ReadableStream({\n      start(controller) {\n        transformer.onLine = (line) => controller.enqueue(line);\n        transformer.onClose = () => controller.close();\n      }\n    });\n  }\n}\nclass TextStreamLineIterator {\n  x = \"\";\n  y;\n  onLine;\n  onClose;\n  constructor(encoding) {\n    this.y = new TextDecoder(encoding);\n  }\n  transform(chunk) {\n    this.x += this.y.decode(chunk, { stream: true });\n    const lines = this.x.split(LINE_TERMINATOR_RE);\n    this.x = lines.pop() || \"\";\n    for (let i = 0; i < lines.length; i++)\n      this.onLine(lines[i].trim());\n  }\n  close() {\n    if (this.x)\n      this.onLine(this.x.trim());\n    this.x = \"\";\n    this.onClose();\n  }\n}\n\nasync function parseText(text, options) {\n  const stream = new ReadableStream({\n    start(controller) {\n      const lines = text.split(LINE_TERMINATOR_RE);\n      for (const line of lines)\n        controller.enqueue(line);\n      controller.close();\n    }\n  });\n  return parseTextStream(stream, options);\n}\nasync function parseTextStream(stream, options) {\n  const type = options?.type ?? \"vtt\";\n  let factory;\n  if (typeof type === \"string\") {\n    switch (type) {\n      case \"srt\":\n        factory = (await import('./srt-parser.js')).default;\n        break;\n      case \"ssa\":\n      case \"ass\":\n        factory = (await import('./ssa-parser.js')).default;\n        break;\n      default:\n        factory = (await Promise.resolve().then(function () { return vttParser; })).default;\n    }\n  } else {\n    factory = type;\n  }\n  let result;\n  const reader = stream.getReader(), parser = factory(), errors = !!options?.strict || !!options?.errors;\n  await parser.init({\n    strict: false,\n    ...options,\n    errors,\n    type,\n    cancel() {\n      reader.cancel();\n      result = parser.done(true);\n    }\n  });\n  let i = 1;\n  while (true) {\n    const { value, done } = await reader.read();\n    if (done) {\n      parser.parse(\"\", i);\n      result = parser.done(false);\n      break;\n    }\n    parser.parse(value, i);\n    i++;\n  }\n  return result;\n}\n\nasync function parseResponse(response, options) {\n  const res = await response;\n  if (!res.ok || !res.body) {\n    let error;\n    return {\n      metadata: {},\n      cues: [],\n      regions: [],\n      errors: [error]\n    };\n  }\n  const contentType = res.headers.get(\"content-type\") || \"\", type = contentType.match(/text\\/(.*?)(?:;|$)/)?.[1], encoding = contentType.match(/charset=(.*?)(?:;|$)/)?.[1];\n  return parseByteStream(res.body, { type, encoding, ...options });\n}\nasync function parseByteStream(stream, { encoding = \"utf-8\", ...options } = {}) {\n  const textStream = stream.pipeThrough(new TextLineTransformStream(encoding));\n  return parseTextStream(textStream, options);\n}\n\nclass TextCue extends EventTarget {\n  /**\n   * A string that identifies the cue.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/TextTrackCue/id}\n   */\n  id = \"\";\n  /**\n   * A `double` that represents the video time that the cue will start being displayed, in seconds.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/TextTrackCue/startTime}\n   */\n  startTime;\n  /**\n   * A `double` that represents the video time that the cue will stop being displayed, in seconds.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/TextTrackCue/endTime}\n   */\n  endTime;\n  /**\n   * Returns a string with the contents of the cue.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/VTTCue/text}\n   */\n  text;\n  /**\n   * A `boolean` for whether the video will pause when this cue stops being displayed.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/TextTrackCue/pauseOnExit}\n   */\n  pauseOnExit = false;\n  constructor(startTime, endTime, text) {\n    super();\n    this.startTime = startTime;\n    this.endTime = endTime;\n    this.text = text;\n  }\n  addEventListener(type, listener, options) {\n    super.addEventListener(type, listener, options);\n  }\n  removeEventListener(type, listener, options) {\n    super.removeEventListener(type, listener, options);\n  }\n}\n\nconst IS_SERVER = typeof document === \"undefined\";\n\nconst CueBase = IS_SERVER ? TextCue : window.VTTCue;\nclass VTTCue extends CueBase {\n  /**\n   * A `VTTRegion` object describing the video's sub-region that the cue will be drawn onto,\n   * or `null` if none is assigned.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/VTTCue/region}\n   */\n  region = null;\n  /**\n   * The cue writing direction.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/VTTCue/vertical}\n   */\n  vertical = \"\";\n  /**\n   * Returns `true` if the `VTTCue.line` attribute is an integer number of lines or a percentage\n   * of the video size.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/VTTCue/snapToLines}\n   */\n  snapToLines = true;\n  /**\n   * Returns the line positioning of the cue. This can be the string `'auto'` or a number whose\n   * interpretation depends on the value of `VTTCue.snapToLines`.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/VTTCue/line}\n   */\n  line = \"auto\";\n  /**\n   * Returns an enum representing the alignment of the `VTTCue.line`.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/VTTCue/lineAlign}\n   */\n  lineAlign = \"start\";\n  /**\n   * Returns the indentation of the cue within the line. This can be the string `'auto'` or a\n   * number representing the percentage of the `VTTCue.region`, or the video size if `VTTCue`.region`\n   * is `null`.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/VTTCue/position}\n   */\n  position = \"auto\";\n  /**\n   * Returns an enum representing the alignment of the cue. This is used to determine what\n   * the `VTTCue.position` is anchored to. The default is `'auto'`.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/VTTCue/positionAlign}\n   */\n  positionAlign = \"auto\";\n  /**\n   * Returns a double representing the size of the cue, as a percentage of the video size.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/VTTCue/size}\n   */\n  size = 100;\n  /**\n   * Returns an enum representing the alignment of all the lines of text within the cue box.\n   *\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/VTTCue/align}\n   */\n  align = \"center\";\n  /**\n   * Additional styles associated with the cue.\n   */\n  style;\n}\n\nclass VTTRegion {\n  /**\n   * A string that identifies the region.\n   */\n  id = \"\";\n  /**\n   * A `double` representing the width of the region, as a percentage of the video.\n   */\n  width = 100;\n  /**\n   * A `double` representing the height of the region, in number of lines.\n   */\n  lines = 3;\n  /**\n   * A `double` representing the region anchor X offset, as a percentage of the region.\n   */\n  regionAnchorX = 0;\n  /**\n   * A `double` representing the region anchor Y offset, as a percentage of the region.\n   */\n  regionAnchorY = 100;\n  /**\n   * A `double` representing the viewport anchor X offset, as a percentage of the video.\n   */\n  viewportAnchorX = 0;\n  /**\n   * A `double` representing the viewport anchor Y offset, as a percentage of the video.\n   */\n  viewportAnchorY = 100;\n  /**\n   * An enum representing how adding new cues will move existing cues.\n   */\n  scroll = \"\";\n}\n\nconst COMMA$1 = \",\", PERCENT_SIGN$1 = \"%\";\nfunction toNumber(text) {\n  const num = parseInt(text, 10);\n  return !Number.isNaN(num) ? num : null;\n}\nfunction toPercentage(text) {\n  const num = parseInt(text.replace(PERCENT_SIGN$1, \"\"), 10);\n  return !Number.isNaN(num) && num >= 0 && num <= 100 ? num : null;\n}\nfunction toCoords(text) {\n  if (!text.includes(COMMA$1))\n    return null;\n  const [x, y] = text.split(COMMA$1).map(toPercentage);\n  return x !== null && y !== null ? [x, y] : null;\n}\nfunction toFloat(text) {\n  const num = parseFloat(text);\n  return !Number.isNaN(num) ? num : null;\n}\n\nconst HEADER_MAGIC = \"WEBVTT\", COMMA = \",\", PERCENT_SIGN = \"%\", SETTING_SEP_RE = /[:=]/, SETTING_LINE_RE = /^[\\s\\t]*(region|vertical|line|position|size|align)[:=]/, NOTE_BLOCK_START = \"NOTE\", REGION_BLOCK_START = \"REGION\", REGION_BLOCK_START_RE = /^REGION:?[\\s\\t]+/, SPACE_RE = /[\\s\\t]+/, TIMESTAMP_SEP = \"-->\", TIMESTAMP_SEP_RE = /[\\s\\t]*-->[\\s\\t]+/, ALIGN_RE = /start|center|end|left|right/, LINE_ALIGN_RE = /start|center|end/, POS_ALIGN_RE = /line-(?:left|right)|center|auto/, TIMESTAMP_RE = /^(?:(\\d{1,2}):)?(\\d{2}):(\\d{2})(?:\\.(\\d{1,3}))?$/;\nvar VTTBlock = /* @__PURE__ */ ((VTTBlock2) => {\n  VTTBlock2[VTTBlock2[\"None\"] = 0] = \"None\";\n  VTTBlock2[VTTBlock2[\"Header\"] = 1] = \"Header\";\n  VTTBlock2[VTTBlock2[\"Cue\"] = 2] = \"Cue\";\n  VTTBlock2[VTTBlock2[\"Region\"] = 3] = \"Region\";\n  VTTBlock2[VTTBlock2[\"Note\"] = 4] = \"Note\";\n  return VTTBlock2;\n})(VTTBlock || {});\nclass VTTParser {\n  f;\n  c = 0;\n  g = {};\n  h = {};\n  j = [];\n  a = null;\n  b = null;\n  k = [];\n  d;\n  l = \"\";\n  async init(init) {\n    this.f = init;\n    if (init.strict)\n      this.c = 1;\n    if (init.errors)\n      this.d = (await import('./errors.js')).ParseErrorBuilder;\n  }\n  parse(line, lineCount) {\n    if (line === \"\") {\n      if (this.a) {\n        this.j.push(this.a);\n        this.f.onCue?.(this.a);\n        this.a = null;\n      } else if (this.b) {\n        this.h[this.b.id] = this.b;\n        this.f.onRegion?.(this.b);\n        this.b = null;\n      } else if (this.c === 1) {\n        this.i(line, lineCount);\n        this.f.onHeaderMetadata?.(this.g);\n      }\n      this.c = 0;\n    } else if (this.c) {\n      switch (this.c) {\n        case 1:\n          this.i(line, lineCount);\n          break;\n        case 2:\n          if (this.a) {\n            const hasText = this.a.text.length > 0;\n            if (!hasText && SETTING_LINE_RE.test(line)) {\n              this.m(line.split(SPACE_RE), lineCount);\n            } else {\n              this.a.text += (hasText ? \"\\n\" : \"\") + line;\n            }\n          }\n          break;\n        case 3:\n          this.n(line.split(SPACE_RE), lineCount);\n          break;\n      }\n    } else if (line.startsWith(NOTE_BLOCK_START)) {\n      this.c = 4;\n    } else if (line.startsWith(REGION_BLOCK_START)) {\n      this.c = 3;\n      this.b = new VTTRegion();\n      this.n(line.replace(REGION_BLOCK_START_RE, \"\").split(SPACE_RE), lineCount);\n    } else if (line.includes(TIMESTAMP_SEP)) {\n      const result = this.o(line, lineCount);\n      if (result) {\n        this.a = new VTTCue(result[0], result[1], \"\");\n        this.a.id = this.l;\n        this.m(result[2], lineCount);\n      }\n      this.c = 2;\n    } else if (lineCount === 1) {\n      this.i(line, lineCount);\n    }\n    this.l = line;\n  }\n  done() {\n    return {\n      metadata: this.g,\n      cues: this.j,\n      regions: Object.values(this.h),\n      errors: this.k\n    };\n  }\n  i(line, lineCount) {\n    if (lineCount > 1) {\n      if (SETTING_SEP_RE.test(line)) {\n        const [key, value] = line.split(SETTING_SEP_RE);\n        if (key)\n          this.g[key] = (value || \"\").replace(SPACE_RE, \"\");\n      }\n    } else if (line.startsWith(HEADER_MAGIC)) {\n      this.c = 1;\n    } else {\n      this.e(this.d?.p());\n    }\n  }\n  o(line, lineCount) {\n    const [startTimeText, trailingText = \"\"] = line.split(TIMESTAMP_SEP_RE), [endTimeText, ...settingsText] = trailingText.split(SPACE_RE), startTime = parseVTTTimestamp(startTimeText), endTime = parseVTTTimestamp(endTimeText);\n    if (startTime !== null && endTime !== null && endTime > startTime) {\n      return [startTime, endTime, settingsText];\n    } else {\n      if (startTime === null) {\n        this.e(this.d?.q(startTimeText, lineCount));\n      }\n      if (endTime === null) {\n        this.e(this.d?.r(endTimeText, lineCount));\n      }\n      if (startTime != null && endTime !== null && endTime > startTime) {\n        this.e(this.d?.s(startTime, endTime, lineCount));\n      }\n    }\n  }\n  /**\n   * @see {@link https://www.w3.org/TR/webvtt1/#region-settings-parsing}\n   */\n  n(settings, line) {\n    let badValue;\n    for (let i = 0; i < settings.length; i++) {\n      if (SETTING_SEP_RE.test(settings[i])) {\n        badValue = false;\n        const [name, value] = settings[i].split(SETTING_SEP_RE);\n        switch (name) {\n          case \"id\":\n            this.b.id = value;\n            break;\n          case \"width\":\n            const width = toPercentage(value);\n            if (width !== null)\n              this.b.width = width;\n            else\n              badValue = true;\n            break;\n          case \"lines\":\n            const lines = toNumber(value);\n            if (lines !== null)\n              this.b.lines = lines;\n            else\n              badValue = true;\n            break;\n          case \"regionanchor\":\n            const region = toCoords(value);\n            if (region !== null) {\n              this.b.regionAnchorX = region[0];\n              this.b.regionAnchorY = region[1];\n            } else\n              badValue = true;\n            break;\n          case \"viewportanchor\":\n            const viewport = toCoords(value);\n            if (viewport !== null) {\n              this.b.viewportAnchorX = viewport[0];\n              this.b.viewportAnchorY = viewport[1];\n            } else\n              badValue = true;\n            break;\n          case \"scroll\":\n            if (value === \"up\")\n              this.b.scroll = \"up\";\n            else\n              badValue = true;\n            break;\n          default:\n            this.e(this.d?.t(name, value, line));\n        }\n        if (badValue) {\n          this.e(this.d?.u(name, value, line));\n        }\n      }\n    }\n  }\n  /**\n   * @see {@link https://www.w3.org/TR/webvtt1/#cue-timings-and-settings-parsing}\n   */\n  m(settings, line) {\n    let badValue;\n    for (let i = 0; i < settings.length; i++) {\n      badValue = false;\n      if (SETTING_SEP_RE.test(settings[i])) {\n        const [name, value] = settings[i].split(SETTING_SEP_RE);\n        switch (name) {\n          case \"region\":\n            const region = this.h[value];\n            if (region)\n              this.a.region = region;\n            break;\n          case \"vertical\":\n            if (value === \"lr\" || value === \"rl\") {\n              this.a.vertical = value;\n              this.a.region = null;\n            } else\n              badValue = true;\n            break;\n          case \"line\":\n            const [linePos, lineAlign] = value.split(COMMA);\n            if (linePos.includes(PERCENT_SIGN)) {\n              const percentage = toPercentage(linePos);\n              if (percentage !== null) {\n                this.a.line = percentage;\n                this.a.snapToLines = false;\n              } else\n                badValue = true;\n            } else {\n              const number = toFloat(linePos);\n              if (number !== null)\n                this.a.line = number;\n              else\n                badValue = true;\n            }\n            if (LINE_ALIGN_RE.test(lineAlign)) {\n              this.a.lineAlign = lineAlign;\n            } else if (lineAlign) {\n              badValue = true;\n            }\n            if (this.a.line !== \"auto\")\n              this.a.region = null;\n            break;\n          case \"position\":\n            const [colPos, colAlign] = value.split(COMMA), position = toPercentage(colPos);\n            if (position !== null)\n              this.a.position = position;\n            else\n              badValue = true;\n            if (colAlign && POS_ALIGN_RE.test(colAlign)) {\n              this.a.positionAlign = colAlign;\n            } else if (colAlign) {\n              badValue = true;\n            }\n            break;\n          case \"size\":\n            const size = toPercentage(value);\n            if (size !== null) {\n              this.a.size = size;\n              if (size < 100)\n                this.a.region = null;\n            } else {\n              badValue = true;\n            }\n            break;\n          case \"align\":\n            if (ALIGN_RE.test(value)) {\n              this.a.align = value;\n            } else {\n              badValue = true;\n            }\n            break;\n          default:\n            this.e(this.d?.v(name, value, line));\n        }\n        if (badValue) {\n          this.e(this.d?.w(name, value, line));\n        }\n      }\n    }\n  }\n  e(error) {\n    if (!error)\n      return;\n    this.k.push(error);\n    if (this.f.strict) {\n      this.f.cancel();\n      throw error;\n    } else {\n      this.f.onError?.(error);\n    }\n  }\n}\nfunction parseVTTTimestamp(timestamp) {\n  const match = timestamp.match(TIMESTAMP_RE);\n  if (!match)\n    return null;\n  const hours = match[1] ? parseInt(match[1], 10) : 0, minutes = parseInt(match[2], 10), seconds = parseInt(match[3], 10), milliseconds = match[4] ? parseInt(match[4].padEnd(3, \"0\"), 10) : 0, total = hours * 3600 + minutes * 60 + seconds + milliseconds / 1e3;\n  if (hours < 0 || minutes < 0 || seconds < 0 || milliseconds < 0 || minutes > 59 || seconds > 59) {\n    return null;\n  }\n  return total;\n}\nfunction createVTTParser() {\n  return new VTTParser();\n}\n\nvar vttParser = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  VTTBlock: VTTBlock,\n  VTTParser: VTTParser,\n  default: createVTTParser,\n  parseVTTTimestamp: parseVTTTimestamp\n});\n\nconst DIGIT_RE = /[0-9]/, MULTI_SPACE_RE = /[\\s\\t]+/, TAG_NAME = {\n  c: \"span\",\n  i: \"i\",\n  b: \"b\",\n  u: \"u\",\n  ruby: \"ruby\",\n  rt: \"rt\",\n  v: \"span\",\n  lang: \"span\",\n  timestamp: \"span\"\n}, HTML_ENTITIES = {\n  \"&amp;\": \"&\",\n  \"&lt;\": \"<\",\n  \"&gt;\": \">\",\n  \"&quot;\": '\"',\n  \"&#39;\": \"'\",\n  \"&nbsp;\": \"\\xA0\",\n  \"&lrm;\": \"\\u200E\",\n  \"&rlm;\": \"\\u200F\"\n}, HTML_ENTITY_RE = /&(?:amp|lt|gt|quot|#(0+)?39|nbsp|lrm|rlm);/g, COLORS = /* @__PURE__ */ new Set([\n  \"white\",\n  \"lime\",\n  \"cyan\",\n  \"red\",\n  \"yellow\",\n  \"magenta\",\n  \"blue\",\n  \"black\"\n]), BLOCK_TYPES = /* @__PURE__ */ new Set(Object.keys(TAG_NAME));\nfunction tokenizeVTTCue(cue) {\n  let buffer = \"\", mode = 1, result = [], stack = [], node;\n  for (let i = 0; i < cue.text.length; i++) {\n    const char = cue.text[i];\n    switch (mode) {\n      case 1:\n        if (char === \"<\") {\n          addText();\n          mode = 2;\n        } else {\n          buffer += char;\n        }\n        break;\n      case 2:\n        switch (char) {\n          case \"\\n\":\n          case \"\t\":\n          case \" \":\n            addNode();\n            mode = 4;\n            break;\n          case \".\":\n            addNode();\n            mode = 3;\n            break;\n          case \"/\":\n            mode = 5;\n            break;\n          case \">\":\n            addNode();\n            mode = 1;\n            break;\n          default:\n            if (!buffer && DIGIT_RE.test(char))\n              mode = 6;\n            buffer += char;\n            break;\n        }\n        break;\n      case 3:\n        switch (char) {\n          case \"\t\":\n          case \" \":\n          case \"\\n\":\n            addClass();\n            if (node)\n              node.class?.trim();\n            mode = 4;\n            break;\n          case \".\":\n            addClass();\n            break;\n          case \">\":\n            addClass();\n            if (node)\n              node.class?.trim();\n            mode = 1;\n            break;\n          default:\n            buffer += char;\n        }\n        break;\n      case 4:\n        if (char === \">\") {\n          buffer = buffer.replace(MULTI_SPACE_RE, \" \");\n          if (node?.type === \"v\")\n            node.voice = replaceHTMLEntities(buffer);\n          else if (node?.type === \"lang\")\n            node.lang = replaceHTMLEntities(buffer);\n          buffer = \"\";\n          mode = 1;\n        } else {\n          buffer += char;\n        }\n        break;\n      case 5:\n        if (char === \">\") {\n          buffer = \"\";\n          node = stack.pop();\n          mode = 1;\n        }\n        break;\n      case 6:\n        if (char === \">\") {\n          const time = parseVTTTimestamp(buffer);\n          if (time !== null && time >= cue.startTime && time <= cue.endTime) {\n            buffer = \"timestamp\";\n            addNode();\n            node.time = time;\n          }\n          buffer = \"\";\n          mode = 1;\n        } else {\n          buffer += char;\n        }\n        break;\n    }\n  }\n  function addNode() {\n    if (BLOCK_TYPES.has(buffer)) {\n      const parent = node;\n      node = createBlockNode(buffer);\n      if (parent) {\n        if (stack[stack.length - 1] !== parent)\n          stack.push(parent);\n        parent.children.push(node);\n      } else\n        result.push(node);\n    }\n    buffer = \"\";\n    mode = 1;\n  }\n  function addClass() {\n    if (node && buffer) {\n      const color = buffer.replace(\"bg_\", \"\");\n      if (COLORS.has(color)) {\n        node[buffer.startsWith(\"bg_\") ? \"bgColor\" : \"color\"] = color;\n      } else {\n        node.class = !node.class ? buffer : node.class + \" \" + buffer;\n      }\n    }\n    buffer = \"\";\n  }\n  function addText() {\n    if (!buffer)\n      return;\n    const text = { type: \"text\", data: replaceHTMLEntities(buffer) };\n    node ? node.children.push(text) : result.push(text);\n    buffer = \"\";\n  }\n  if (mode === 1)\n    addText();\n  return result;\n}\nfunction createBlockNode(type) {\n  return {\n    tagName: TAG_NAME[type],\n    type,\n    children: []\n  };\n}\nfunction replaceHTMLEntities(text) {\n  return text.replace(HTML_ENTITY_RE, (entity) => HTML_ENTITIES[entity] || \"'\");\n}\n\nfunction setCSSVar(el, name, value) {\n  el.style.setProperty(`--${name}`, value + \"\");\n}\nfunction setDataAttr(el, name, value = true) {\n  el.setAttribute(`data-${name}`, value === true ? \"\" : value + \"\");\n}\nfunction setPartAttr(el, name) {\n  el.setAttribute(\"data-part\", name);\n}\nfunction getLineHeight(el) {\n  return parseFloat(getComputedStyle(el).lineHeight) || 0;\n}\n\nfunction createVTTCueTemplate(cue) {\n  if (IS_SERVER) {\n    throw Error(\n      \"[media-captions] called `createVTTCueTemplate` on the server - use `renderVTTCueString`\"\n    );\n  }\n  const template = document.createElement(\"template\");\n  template.innerHTML = renderVTTCueString(cue);\n  return { cue, content: template.content };\n}\nfunction renderVTTCueString(cue, currentTime = 0) {\n  return renderVTTTokensString(tokenizeVTTCue(cue), currentTime);\n}\nfunction renderVTTTokensString(tokens, currentTime = 0) {\n  let attrs, result = \"\";\n  for (const token of tokens) {\n    if (token.type === \"text\") {\n      result += token.data;\n    } else {\n      const isTimestamp = token.type === \"timestamp\";\n      attrs = {};\n      attrs.class = token.class;\n      attrs.title = token.type === \"v\" && token.voice;\n      attrs.lang = token.type === \"lang\" && token.lang;\n      attrs[\"data-part\"] = token.type === \"v\" && \"voice\";\n      if (isTimestamp) {\n        attrs[\"data-part\"] = \"timed\";\n        attrs[\"data-time\"] = token.time;\n        attrs[\"data-future\"] = token.time > currentTime;\n        attrs[\"data-past\"] = token.time < currentTime;\n      }\n      attrs.style = `${token.color ? `color: ${token.color};` : \"\"}${token.bgColor ? `background-color: ${token.bgColor};` : \"\"}`;\n      const attributes = Object.entries(attrs).filter((v) => v[1]).map((v) => `${v[0]}=\"${v[1] === true ? \"\" : v[1]}\"`).join(\" \");\n      result += `<${token.tagName}${attributes ? \" \" + attributes : \"\"}>${renderVTTTokensString(\n        token.children\n      )}</${token.tagName}>`;\n    }\n  }\n  return result;\n}\nfunction updateTimedVTTCueNodes(root, currentTime) {\n  if (IS_SERVER)\n    return;\n  for (const el of root.querySelectorAll('[data-part=\"timed\"]')) {\n    const time = Number(el.getAttribute(\"data-time\"));\n    if (Number.isNaN(time))\n      continue;\n    if (time > currentTime)\n      setDataAttr(el, \"future\");\n    else\n      el.removeAttribute(\"data-future\");\n    if (time < currentTime)\n      setDataAttr(el, \"past\");\n    else\n      el.removeAttribute(\"data-past\");\n  }\n}\n\nfunction debounce(fn, delay) {\n  let timeout = null, args;\n  function run() {\n    clear();\n    fn(...args);\n    args = void 0;\n  }\n  function clear() {\n    clearTimeout(timeout);\n    timeout = null;\n  }\n  function debounce2() {\n    args = [].slice.call(arguments);\n    clear();\n    timeout = setTimeout(run, delay);\n  }\n  return debounce2;\n}\n\nconst STARTING_BOX = Symbol(0);\nfunction createBox(box) {\n  if (box instanceof HTMLElement) {\n    return {\n      top: box.offsetTop,\n      width: box.clientWidth,\n      height: box.clientHeight,\n      left: box.offsetLeft,\n      right: box.offsetLeft + box.clientWidth,\n      bottom: box.offsetTop + box.clientHeight\n    };\n  }\n  return { ...box };\n}\nfunction moveBox(box, axis, delta) {\n  switch (axis) {\n    case \"+x\":\n      box.left += delta;\n      box.right += delta;\n      break;\n    case \"-x\":\n      box.left -= delta;\n      box.right -= delta;\n      break;\n    case \"+y\":\n      box.top += delta;\n      box.bottom += delta;\n      break;\n    case \"-y\":\n      box.top -= delta;\n      box.bottom -= delta;\n      break;\n  }\n}\nfunction isBoxCollision(a, b) {\n  return a.left <= b.right && a.right >= b.left && a.top <= b.bottom && a.bottom >= b.top;\n}\nfunction isAnyBoxCollision(box, boxes) {\n  for (let i = 0; i < boxes.length; i++)\n    if (isBoxCollision(box, boxes[i]))\n      return boxes[i];\n  return null;\n}\nfunction isWithinBox(container, box) {\n  return box.top >= 0 && box.bottom <= container.height && box.left >= 0 && box.right <= container.width;\n}\nfunction isBoxOutOfBounds(container, box, axis) {\n  switch (axis) {\n    case \"+x\":\n      return box.left < 0;\n    case \"-x\":\n      return box.right > container.width;\n    case \"+y\":\n      return box.top < 0;\n    case \"-y\":\n      return box.bottom > container.height;\n  }\n}\nfunction calcBoxIntersectPercentage(container, box) {\n  const x = Math.max(0, Math.min(container.width, box.right) - Math.max(0, box.left)), y = Math.max(0, Math.min(container.height, box.bottom) - Math.max(0, box.top)), intersectArea = x * y;\n  return intersectArea / (container.height * container.width);\n}\nfunction createCSSBox(container, box) {\n  return {\n    top: box.top / container.height,\n    left: box.left / container.width,\n    right: (container.width - box.right) / container.width,\n    bottom: (container.height - box.bottom) / container.height\n  };\n}\nfunction resolveRelativeBox(container, box) {\n  box.top = box.top * container.height;\n  box.left = box.left * container.width;\n  box.right = container.width - box.right * container.width;\n  box.bottom = container.height - box.bottom * container.height;\n  return box;\n}\nconst BOX_SIDES = [\"top\", \"left\", \"right\", \"bottom\"];\nfunction setBoxCSSVars(el, container, box, prefix) {\n  const cssBox = createCSSBox(container, box);\n  for (const side of BOX_SIDES) {\n    setCSSVar(el, `${prefix}-${side}`, cssBox[side] * 100 + \"%\");\n  }\n}\nfunction avoidBoxCollisions(container, box, boxes, axis) {\n  let percentage = 1, positionedBox, startBox = { ...box };\n  for (let i = 0; i < axis.length; i++) {\n    while (isBoxOutOfBounds(container, box, axis[i]) || isWithinBox(container, box) && isAnyBoxCollision(box, boxes)) {\n      moveBox(box, axis[i], 1);\n    }\n    if (isWithinBox(container, box))\n      return box;\n    const intersection = calcBoxIntersectPercentage(container, box);\n    if (percentage > intersection) {\n      positionedBox = { ...box };\n      percentage = intersection;\n    }\n    box = { ...startBox };\n  }\n  return positionedBox || startBox;\n}\n\nconst POSITION_OVERRIDE = Symbol(0);\nfunction positionCue(container, cue, displayEl, boxes) {\n  let cueEl = displayEl.firstElementChild, line = computeCueLine(cue), displayBox, axis = [];\n  if (!displayEl[STARTING_BOX]) {\n    displayEl[STARTING_BOX] = createStartingBox(container, displayEl);\n  }\n  displayBox = resolveRelativeBox(container, { ...displayEl[STARTING_BOX] });\n  if (displayEl[POSITION_OVERRIDE]) {\n    axis = [displayEl[POSITION_OVERRIDE] === \"top\" ? \"+y\" : \"-y\", \"+x\", \"-x\"];\n  } else if (cue.snapToLines) {\n    let size;\n    switch (cue.vertical) {\n      case \"\":\n        axis = [\"+y\", \"-y\"];\n        size = \"height\";\n        break;\n      case \"rl\":\n        axis = [\"+x\", \"-x\"];\n        size = \"width\";\n        break;\n      case \"lr\":\n        axis = [\"-x\", \"+x\"];\n        size = \"width\";\n        break;\n    }\n    let step = getLineHeight(cueEl), position = step * Math.round(line), maxPosition = container[size] + step, initialAxis = axis[0];\n    if (Math.abs(position) > maxPosition) {\n      position = position < 0 ? -1 : 1;\n      position *= Math.ceil(maxPosition / step) * step;\n    }\n    if (line < 0) {\n      position += cue.vertical === \"\" ? container.height : container.width;\n      axis = axis.reverse();\n    }\n    moveBox(displayBox, initialAxis, position);\n  } else {\n    const isHorizontal = cue.vertical === \"\", posAxis = isHorizontal ? \"+y\" : \"+x\", size = isHorizontal ? displayBox.height : displayBox.width;\n    moveBox(\n      displayBox,\n      posAxis,\n      (isHorizontal ? container.height : container.width) * line / 100\n    );\n    moveBox(\n      displayBox,\n      posAxis,\n      cue.lineAlign === \"center\" ? size / 2 : cue.lineAlign === \"end\" ? size : 0\n    );\n    axis = isHorizontal ? [\"-y\", \"+y\", \"-x\", \"+x\"] : [\"-x\", \"+x\", \"-y\", \"+y\"];\n  }\n  displayBox = avoidBoxCollisions(container, displayBox, boxes, axis);\n  setBoxCSSVars(displayEl, container, displayBox, \"cue\");\n  return displayBox;\n}\nfunction createStartingBox(container, cueEl) {\n  const box = createBox(cueEl), pos = getStyledPositions(cueEl);\n  cueEl[POSITION_OVERRIDE] = false;\n  if (pos.top) {\n    box.top = pos.top;\n    box.bottom = pos.top + box.height;\n    cueEl[POSITION_OVERRIDE] = \"top\";\n  }\n  if (pos.bottom) {\n    const bottom = container.height - pos.bottom;\n    box.top = bottom - box.height;\n    box.bottom = bottom;\n    cueEl[POSITION_OVERRIDE] = \"bottom\";\n  }\n  if (pos.left)\n    box.left = pos.left;\n  if (pos.right)\n    box.right = container.width - pos.right;\n  return createCSSBox(container, box);\n}\nfunction getStyledPositions(el) {\n  const positions = {};\n  for (const side of BOX_SIDES) {\n    positions[side] = parseFloat(el.style.getPropertyValue(`--cue-${side}`));\n  }\n  return positions;\n}\nfunction computeCueLine(cue) {\n  if (cue.line === \"auto\") {\n    if (!cue.snapToLines) {\n      return 100;\n    } else {\n      return -1;\n    }\n  }\n  return cue.line;\n}\nfunction computeCuePosition(cue) {\n  if (cue.position === \"auto\") {\n    switch (cue.align) {\n      case \"start\":\n      case \"left\":\n        return 0;\n      case \"right\":\n      case \"end\":\n        return 100;\n      default:\n        return 50;\n    }\n  }\n  return cue.position;\n}\nfunction computeCuePositionAlignment(cue, dir) {\n  if (cue.positionAlign === \"auto\") {\n    switch (cue.align) {\n      case \"start\":\n        return dir === \"ltr\" ? \"line-left\" : \"line-right\";\n      case \"end\":\n        return dir === \"ltr\" ? \"line-right\" : \"line-left\";\n      case \"center\":\n        return \"center\";\n      default:\n        return `line-${cue.align}`;\n    }\n  }\n  return cue.positionAlign;\n}\n\nconst REGION_AXIS = [\"-y\", \"+y\", \"-x\", \"+x\"];\nfunction positionRegion(container, region, regionEl, boxes) {\n  let cues = Array.from(regionEl.querySelectorAll('[data-part=\"cue-display\"]')), height = 0, limit = Math.max(0, cues.length - region.lines);\n  for (let i = cues.length - 1; i >= limit; i--) {\n    height += cues[i].offsetHeight;\n  }\n  setCSSVar(regionEl, \"region-height\", height + \"px\");\n  if (!regionEl[STARTING_BOX]) {\n    regionEl[STARTING_BOX] = createCSSBox(container, createBox(regionEl));\n  }\n  let box = { ...regionEl[STARTING_BOX] };\n  box = resolveRelativeBox(container, box);\n  box.width = regionEl.clientWidth;\n  box.height = height;\n  box.right = box.left + box.width;\n  box.bottom = box.top + height;\n  box = avoidBoxCollisions(container, box, boxes, REGION_AXIS);\n  setBoxCSSVars(regionEl, container, box, \"region\");\n  return box;\n}\n\nclass CaptionsRenderer {\n  overlay;\n  z;\n  A = 0;\n  C = \"ltr\";\n  B = [];\n  D = false;\n  E;\n  h = /* @__PURE__ */ new Map();\n  j = /* @__PURE__ */ new Map();\n  /* Text direction. */\n  get dir() {\n    return this.C;\n  }\n  set dir(dir) {\n    this.C = dir;\n    setDataAttr(this.overlay, \"dir\", dir);\n  }\n  get currentTime() {\n    return this.A;\n  }\n  set currentTime(time) {\n    this.A = time;\n    this.update();\n  }\n  constructor(overlay, init) {\n    this.overlay = overlay;\n    this.dir = init?.dir ?? \"ltr\";\n    overlay.setAttribute(\"translate\", \"yes\");\n    overlay.setAttribute(\"aria-live\", \"off\");\n    overlay.setAttribute(\"aria-atomic\", \"true\");\n    setPartAttr(overlay, \"captions\");\n    this.G();\n    this.E = new ResizeObserver(this.I.bind(this));\n    this.E.observe(overlay);\n  }\n  changeTrack({ regions, cues }) {\n    this.reset();\n    this.J(regions);\n    for (const cue of cues)\n      this.j.set(cue, null);\n    this.update();\n  }\n  addCue(cue) {\n    this.j.set(cue, null);\n    this.update();\n  }\n  removeCue(cue) {\n    this.j.delete(cue);\n    this.update();\n  }\n  update(forceUpdate = false) {\n    this.H(forceUpdate);\n  }\n  reset() {\n    this.j.clear();\n    this.h.clear();\n    this.B = [];\n    this.overlay.textContent = \"\";\n  }\n  destroy() {\n    this.reset();\n    this.E.disconnect();\n  }\n  I() {\n    this.D = true;\n    this.K();\n  }\n  K = debounce(() => {\n    this.D = false;\n    this.G();\n    for (const el of this.h.values()) {\n      el[STARTING_BOX] = null;\n    }\n    for (const el of this.j.values()) {\n      if (el)\n        el[STARTING_BOX] = null;\n    }\n    this.H(true);\n  }, 50);\n  G() {\n    this.z = createBox(this.overlay);\n    setCSSVar(this.overlay, \"overlay-width\", this.z.width + \"px\");\n    setCSSVar(this.overlay, \"overlay-height\", this.z.height + \"px\");\n  }\n  H(forceUpdate = false) {\n    if (!this.j.size || this.D)\n      return;\n    let cue, activeCues = [...this.j.keys()].filter((cue2) => this.A >= cue2.startTime && this.A <= cue2.endTime).sort(\n      (cueA, cueB) => cueA.startTime !== cueB.startTime ? cueA.startTime - cueB.startTime : cueA.endTime - cueB.endTime\n    ), activeRegions = activeCues.map((cue2) => cue2.region);\n    for (let i = 0; i < this.B.length; i++) {\n      cue = this.B[i];\n      if (activeCues[i] === cue)\n        continue;\n      if (cue.region && !activeRegions.includes(cue.region)) {\n        const regionEl = this.h.get(cue.region.id);\n        if (regionEl) {\n          regionEl.removeAttribute(\"data-active\");\n          forceUpdate = true;\n        }\n      }\n      const cueEl = this.j.get(cue);\n      if (cueEl) {\n        cueEl.remove();\n        forceUpdate = true;\n      }\n    }\n    for (let i = 0; i < activeCues.length; i++) {\n      cue = activeCues[i];\n      let cueEl = this.j.get(cue);\n      if (!cueEl)\n        this.j.set(cue, cueEl = this.L(cue));\n      const regionEl = this.F(cue) && this.h.get(cue.region.id);\n      if (regionEl && !regionEl.hasAttribute(\"data-active\")) {\n        requestAnimationFrame(() => setDataAttr(regionEl, \"active\"));\n        forceUpdate = true;\n      }\n      if (!cueEl.isConnected) {\n        (regionEl || this.overlay).append(cueEl);\n        forceUpdate = true;\n      }\n    }\n    if (forceUpdate) {\n      const boxes = [], seen = /* @__PURE__ */ new Set();\n      for (let i = activeCues.length - 1; i >= 0; i--) {\n        cue = activeCues[i];\n        if (seen.has(cue.region || cue))\n          continue;\n        const isRegion = this.F(cue), el = isRegion ? this.h.get(cue.region.id) : this.j.get(cue);\n        if (isRegion) {\n          boxes.push(positionRegion(this.z, cue.region, el, boxes));\n        } else {\n          boxes.push(positionCue(this.z, cue, el, boxes));\n        }\n        seen.add(isRegion ? cue.region : cue);\n      }\n    }\n    updateTimedVTTCueNodes(this.overlay, this.A);\n    this.B = activeCues;\n  }\n  J(regions) {\n    if (!regions)\n      return;\n    for (const region of regions) {\n      const el = this.M(region);\n      this.h.set(region.id, el);\n      this.overlay.append(el);\n    }\n  }\n  M(region) {\n    const el = document.createElement(\"div\");\n    setPartAttr(el, \"region\");\n    setDataAttr(el, \"id\", region.id);\n    setDataAttr(el, \"scroll\", region.scroll);\n    setCSSVar(el, \"region-width\", region.width + \"%\");\n    setCSSVar(el, \"region-anchor-x\", region.regionAnchorX);\n    setCSSVar(el, \"region-anchor-y\", region.regionAnchorY);\n    setCSSVar(el, \"region-viewport-anchor-x\", region.viewportAnchorX);\n    setCSSVar(el, \"region-viewport-anchor-y\", region.viewportAnchorY);\n    setCSSVar(el, \"region-lines\", region.lines);\n    return el;\n  }\n  L(cue) {\n    const display = document.createElement(\"div\"), position = computeCuePosition(cue), positionAlignment = computeCuePositionAlignment(cue, this.C);\n    setPartAttr(display, \"cue-display\");\n    if (cue.vertical !== \"\")\n      setDataAttr(display, \"vertical\");\n    setCSSVar(display, \"cue-text-align\", cue.align);\n    if (cue.style) {\n      for (const prop of Object.keys(cue.style)) {\n        display.style.setProperty(prop, cue.style[prop]);\n      }\n    }\n    if (!this.F(cue)) {\n      setCSSVar(\n        display,\n        \"cue-writing-mode\",\n        cue.vertical === \"\" ? \"horizontal-tb\" : cue.vertical === \"lr\" ? \"vertical-lr\" : \"vertical-rl\"\n      );\n      if (!cue.style?.[\"--cue-width\"]) {\n        let maxSize = position;\n        if (positionAlignment === \"line-left\") {\n          maxSize = 100 - position;\n        } else if (positionAlignment === \"center\" && position <= 50) {\n          maxSize = position * 2;\n        } else if (positionAlignment === \"center\" && position > 50) {\n          maxSize = (100 - position) * 2;\n        }\n        const size = cue.size < maxSize ? cue.size : maxSize;\n        if (cue.vertical === \"\")\n          setCSSVar(display, \"cue-width\", size + \"%\");\n        else\n          setCSSVar(display, \"cue-height\", size + \"%\");\n      }\n    } else {\n      setCSSVar(\n        display,\n        \"cue-offset\",\n        `${position - (positionAlignment === \"line-right\" ? 100 : positionAlignment === \"center\" ? 50 : 0)}%`\n      );\n    }\n    const el = document.createElement(\"div\");\n    setPartAttr(el, \"cue\");\n    if (cue.id)\n      setDataAttr(el, \"id\", cue.id);\n    el.innerHTML = renderVTTCueString(cue);\n    display.append(el);\n    return display;\n  }\n  F(cue) {\n    return cue.region && cue.size === 100 && cue.vertical === \"\" && cue.line === \"auto\";\n  }\n}\n\nexport { CaptionsRenderer as C, ParseError as P, TextCue as T, VTTParser as V, VTTBlock as a, VTTCue as b, ParseErrorCode as c, parseResponse as d, parseByteStream as e, parseText as f, parseTextStream as g, VTTRegion as h, createVTTCueTemplate as i, renderVTTTokensString as j, parseVTTTimestamp as p, renderVTTCueString as r, tokenizeVTTCue as t, updateTimedVTTCueNodes as u };\n"],"file":"assets/prod-xF6WKuRG.js"}
{"version":3,"mappings":"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","names":["api","fetchVideo","videoId","api_url","Error","res","fetch","ok","json","DownloadModal","props","video","setVideo","createSignal","preview","setPreview","qualities","setQualities","preferences","usePreferences","createEffect","isOpen","data","instance","id","title","thumbnail","thumbnailUrl","duration","type","url","uploaderName","uploader","uploaderUrl","uploaderAvatar","uploaderVerified","views","uploaded","Date","uploadDate","getTime","Array","isArray","videoStreams","map","v","quality","codec","bitrate","fps","contentLength","_$createComponent","Modal","setIsOpen","children","_el$","_$getNextElement","_tmpl$2","_el$3","firstChild","_el$4","_co$","_$getNextMarker","nextSibling","_el$5","_el$6","_co$2","Show","when","VideoCard","_$memo","length","_el$2","_tmpl$","For","each","_el$7","_tmpl$3","_el$8","_el$9","_el$10","_el$11","_el$12","_el$13","_co$3","_el$14","_el$15","_el$16","_el$17","_el$18","_co$4","_el$19","_el$20","_el$22","_el$23","_co$5","_el$24","_el$25","_el$26","_el$27","_el$28","_co$6","_el$29","_el$30","_el$31","_el$33","_el$34","_co$7","_el$35","_$insert","toFixed","$$click","_$runHydrationEvents","_$delegateEvents","SubscribeButton","sync","useSyncStore","appState","setAppState","useAppState","isSubscribed","store","subscriptions","Button","appearance","class","onClick","toggleSubscribed","setStore","undefined","subscribedAt","now","name","isSelected","label","isLoading","providers","opfs","isDisabled","webrtc","handleTimestamp","t","extraQueryParams","player","document","querySelector","currentTime","parseInt","newUrl","URL","window","location","origin","searchParams","URLSearchParams","set","search","toString","history","pushState","globalThis","sanitizeText","text","sanitize","__vitePreload","default","replaceAll","replace","_","params","textContent","existingParams","timestamp","get","allParams","forEach","value","key","Description","useSearchParams","setV","videoQuery","createQuery","queryKey","queryFn","enabled","refetchOnReconnect","refetchOnMount","cacheTime","Infinity","staleTime","deferStream","expanded","setExpanded","downloadModalOpen","setDownloadModalOpen","deleteVideo","root","navigator","storage","getDirectory","removeEntry","recursive","e","console","error","debugInfoOpen","setDebugInfoOpen","date","setDate","createDate","createTimeAgo","interval","sanitizedDescription","setSanitizedDescription","description","Tooltip","contentSlot","triggerSlot","as","icon","FaSolidCopy","clipboard","writeText","JSON","stringify","fallback","_tmpl$8","JSONViewer","folded","getVideoId","_tmpl$7","_el$21","_el$45","_el$46","_co$11","_el$47","_el$48","_co$12","_el$56","_el$57","_co$14","_tmpl$9","_tmpl$10","_tmpl$4","Link","href","_$effect","_p$","_v$","_v$2","_$setAttribute","Checkmark","numeral","uploaderSubscriberCount","format","toUpperCase","split","ActionsContainerFallback","ActionsContainer","downloaded","refetch","_tmpl$11","_tmpl$5","_el$32","_el$36","_el$37","_co$8","_el$38","_el$39","_el$40","_co$9","_el$41","_el$42","_co$10","_el$43","_el$44","substr","time","slice","_c$","TbThumbUpFilled","_c$2","likes","TbThumbDownFilled","fill","_c$3","dislikes","_v$3","_v$4","_v$5","_v$6","a","o","style","setProperty","removeProperty","_tmpl$12","_el$49","_tmpl$6","_el$50","_el$51","_el$52","_el$53","_el$54","_el$55","_co$13","_v$7","_v$8","_v$9","_v$10","_$className","_$setProperty","classList","toggle","_tmpl$13","setFolded","isObject","_el$64","_tmpl$14","_el$65","_tmpl$15","_el$66","_el$67","_el$69","_el$70","_co$15","_el$68","_c$4","FaSolidChevronRight","FaSolidChevronDown","_c$5","_el$71","_tmpl$16","Object","entries","index","_el$72","_tmpl$17","_el$73","_el$75","_el$76","_co$16","_el$77","_el$78","_el$79","_co$17","level","_el$80","_tmpl$18","_el$81","_tmpl$19","_el$82","_el$83","_co$18","_el$84","_el$85","_co$19","_el$86","_el$87","_co$20","_el$88","_el$89","_co$21","_el$90","_el$91","_co$22","Switch","Match","FaSolidTrashCan","FaSolidDownload","FaSolidShare","toast","show","FaSolidBookmark","FaSolidBug","FaSolidArrowsRotate","_tmpl$20"],"ignoreList":[],"sources":["../../../../../src/utils/api.ts","../../../../../src/components/DownloadModal.tsx","../../../../../src/components/SubscribeButton.tsx","../../../../../src/components/Description.tsx"],"sourcesContent":["import { PipedVideo } from \"~/types\";\n\nconst api = {\n  fetchVideo: async (videoId: string | undefined, api_url: string): Promise<PipedVideo> => {\n    if (!videoId) throw new Error(\"videoId is undefined\");\n    let res = await fetch(\n      api_url + \"/streams/\" + videoId\n    )\n    if (!res.ok) throw new Error(\"video not found\");\n    return res.json();\n\n  },\n}\n\nexport default api;\n","\nimport { toaster } from \"@kobalte/core\";\nimport { createEffect, createSignal, For, Show } from \"solid-js\";\nimport { usePreferences } from \"~/stores/preferencesStore\";\nimport Field from \"./Field\";\nimport Modal from \"./Modal\";\nimport { PipedVideo, RelatedStream } from \"~/types\";\nimport VideoCard from \"./content/stream/VideoCard\";\n\ntype Quality = {\n  quality: string;\n  codec: string | undefined;\n  bitrate: number;\n  fps: number;\n  contentLength: number;\n}\nexport default function DownloadModal(props: {\n  isOpen: boolean;\n  setIsOpen: (isOpen: boolean) => void;\n  id: string;\n}) {\n\n  const [video, setVideo] = createSignal<PipedVideo | null>(null);\n  const [preview, setPreview] = createSignal<RelatedStream | undefined>();\n  const [qualities, setQualities] = createSignal<Quality[] | null>(null);\n  const [preferences] = usePreferences();\n  createEffect(async () => {\n    if (!props.isOpen) return;\n    const res = await fetch(`${preferences.instance.api_url}/streams/${props.id}`);\n    const data = await res.json() as PipedVideo;\n    setVideo(data);\n    setPreview({\n      title: data.title,\n      thumbnail: data.thumbnailUrl,\n      duration: data.duration,\n      type: \"stream\",\n      url: `/watch?v=${props.id}`,\n      uploaderName: data.uploader,\n      uploaderUrl: data.uploaderUrl,\n      uploaderAvatar: data.uploaderAvatar,\n      uploaderVerified: data.uploaderVerified,\n      views: data.views,\n      uploaded: new Date(data.uploadDate).getTime(),\n    } as RelatedStream)\n    if (!Array.isArray(data.videoStreams)) throw new Error(\"No video streams\");\n    setQualities(data.videoStreams.map((v) => ({\n      quality: v.quality,\n      codec: v.codec,\n      bitrate: v.bitrate,\n      fps: v.fps,\n      contentLength: v.contentLength,\n    })));\n\n\n  });\n\n  return (\n    <Modal\n      title=\"Download\"\n      isOpen={props.isOpen}\n      setIsOpen={props.setIsOpen}\n    >\n      <div class=\"flex flex-col gap-2 items-center justify-center w-[90vw] max-w-3xl\">\n        <Show when={preview()}>\n          <VideoCard v={preview()} />\n        </Show>\n        <Show when={qualities() && qualities()!.length > 0}>\n          <div class=\"flex flex-col gap-2 items-center justify-center overflow-auto w-full\">\n            <For each={qualities()}>\n              {(quality) => (\n                  <div class=\"flex gap-2 justify-between mb-2 w-full even:bg-bg2 p-2\">\n                    <div class=\"flex flex-col gap-2 items-start justify-center text-sm\">\n                      <div><span class=\"text-text2\">Quality: </span> {quality.quality}</div>\n                      <div> <span class=\"text-text2\">Codec: </span>{quality.codec}</div>\n                      <div><span class=\"text-text2\">Bitrate: </span>{(quality.bitrate / 1000).toFixed(2)} kbps</div>\n                      <div> <span class=\"text-text2\">FPS: </span>{quality.fps}</div>\n                      <div> <span class=\"text-text2\">Size: </span>{(quality.contentLength / 1000000).toFixed(2)} MB</div>\n                    </div>\n                    <button class=\"btn btn-primary\" onClick={() => { }}>Download</button>\n                  </div>\n              )}\n            </For>\n          </div>\n        </Show>\n      </div>\n\n\n\n    </Modal>\n  )\n}\n","import { createSignal } from \"solid-js\";\nimport Button from \"./Button\";\nimport { getStorageValue, setStorageValue } from \"~/utils/storage\";\nimport { useSyncStore } from \"~/stores/syncStore\";\nimport { useAppState } from \"~/stores/appStateStore\";\n\nconst SubscribeButton = (props: { id: string; name:string; class?: string }) => {\n  const sync = useSyncStore();\n  const [appState, setAppState] = useAppState();\n  const isSubscribed = () => !!sync.store.subscriptions[props.id];\n  const toggleSubscribed = () => {\n    if (!isSubscribed()) {\n      sync.setStore(\"subscriptions\", props.id, {\n        subscribedAt: Date.now(),\n        name: props.name,\n      });\n    } else {\n      sync.setStore(\n        \"subscriptions\",\n        props.id,\n        undefined!,\n      );\n    }\n  };\n\n  return (\n    <Button\n      appearance=\"primary\"\n      class={props.class}\n      onClick={toggleSubscribed}\n      isSelected={isSubscribed()}\n      label={`Subscribe${isSubscribed() ? \"d\" : \"\"}`}\n      isLoading={appState.sync.providers.opfs === \"connecting\"}\n      isDisabled={appState.sync.providers.opfs !== \"connected\" && appState.sync.providers.webrtc !== \"connected\"}\n    />\n  );\n};\nexport default SubscribeButton;\n","import numeral from \"numeral\";\nimport type { PipedVideo } from \"../types\";\nimport { For, Match, Show, Switch, createEffect, createSignal } from \"solid-js\";\nimport { usePreferences } from \"~/stores/preferencesStore\";\nimport {\n  FaSolidArrowsRotate,\n  FaSolidBookmark,\n  FaSolidBug,\n  FaSolidChevronDown,\n  FaSolidChevronRight,\n  FaSolidCopy,\n  FaSolidDownload,\n  FaSolidShare,\n  FaSolidThumbsDown,\n  FaSolidThumbsUp,\n  FaSolidTrashCan,\n} from \"solid-icons/fa\";\nimport Modal from \"./Modal\";\nimport { createQuery } from \"@tanstack/solid-query\";\nimport { MediaPlayerElement } from \"vidstack/elements\";\nimport { createDate, createTimeAgo } from \"@solid-primitives/date\";\nimport DownloadModal from \"./DownloadModal\";\nimport { getVideoId, isMobile } from \"~/utils/helpers\";\nimport api from \"~/utils/api\";\nimport { isServer } from \"solid-js/web\";\nimport SubscribeButton from \"./SubscribeButton\";\nimport { Tooltip } from \"./Tooltip\";\nimport Button from \"./Button\";\nimport {\n  TbThumbDown,\n  TbThumbDownFilled,\n  TbThumbUp,\n  TbThumbUpFilled,\n} from \"solid-icons/tb\";\nimport { toast } from \"./Toast\";\nimport { useSearchParams } from \"@solidjs/router\";\nimport Link from \"./Link\";\n\nfunction handleTimestamp(videoId: string, t: string, extraQueryParams: string) {\n  const player = document.querySelector(\"media-player\") as MediaPlayerElement;\n  player.currentTime = parseInt(t, 10);\n\n  const newUrl = new URL(`/watch?v=${videoId}`, window.location.origin);\n  const searchParams = new URLSearchParams(extraQueryParams);\n\n  searchParams.set(\"t\", t);\n\n  newUrl.search = searchParams.toString();\n\n  history.pushState({}, \"\", newUrl.toString());\n}\n\n(globalThis as any).handleTimestamp = handleTimestamp;\n\nexport async function sanitizeText(text: string) {\n  const dompurify = await import(\"dompurify\");\n  const sanitize = dompurify.default().sanitize;\n  const t = sanitize(text)\n    .replaceAll(\n      /(?:http(?:s)?:\\/\\/)?(?:www\\.)?youtube\\.com(\\/[/a-zA-Z0-9_?=&-]*)/gm,\n      \"$1\"\n    )\n    .replaceAll(\n      /(?:http(?:s)?:\\/\\/)?(?:www\\.)?youtu\\.be\\/(?:watch\\?v=)?([/a-zA-Z0-9_?=&-]*)/gm,\n      \"/watch?v=$1\"\n    )\n    .replaceAll(\"\\n\", \"<br>\")\n    .replace(\n      /<a href=\"\\/watch\\?v=([a-zA-Z0-9_?=&-]*)&amp;([^\"]*)\">([a-zA-Z0-9_?=&-:]*)<\\/a>/gm,\n      (_, videoId, params, textContent) => {\n        const url = new URL(`https://youtube.com/watch?v=${videoId}`);\n        const searchParams = new URLSearchParams(params);\n        const existingParams = new URLSearchParams(window.location.search);\n\n        const timestamp = searchParams.get(\"t\") || \"0\";\n\n        const allParams = new URLSearchParams();\n        searchParams.forEach((value, key) => {\n          allParams.set(key, value);\n        });\n        existingParams.forEach((value, key) => {\n          allParams.set(key, value);\n        });\n\n        allParams.forEach((value, key) => {\n          url.searchParams.set(key, value);\n        });\n\n        return `<button class=\"link\" onclick=\"handleTimestamp('${videoId}','${timestamp}', '${url.search}')\">${textContent}</button>`;\n      }\n    )\n    .replaceAll(/<a href/gm, '<a class=\"link\" href');\n  return t;\n}\n\nconst Description = (props: { downloaded: boolean }) => {\n  const [preferences] = usePreferences();\n\n  const [searchParams] = useSearchParams();\n  const [v, setV] = createSignal<string | undefined>(undefined);\n  createEffect(() => {\n    if (!searchParams.v) return;\n    setV(searchParams.v);\n  });\n\n  const videoQuery = createQuery(() => ({\n    queryKey: [\"streams\", v(), preferences.instance.api_url],\n    queryFn: () => api.fetchVideo(v(), preferences.instance.api_url),\n    enabled: v() && preferences.instance.api_url ? true : false,\n    refetchOnReconnect: false,\n    refetchOnMount: false,\n    cacheTime: Infinity,\n    staleTime: 100 * 60 * 1000,\n    deferStream: true,\n  }));\n\n  const [expanded, setExpanded] = createSignal(false);\n\n  const [downloadModalOpen, setDownloadModalOpen] = createSignal(false);\n\n  async function deleteVideo(id: string) {\n    try {\n      const root = await navigator.storage.getDirectory();\n      await root.removeEntry(id, { recursive: true });\n    } catch (e) {\n      console.error(`Failed to delete ${id}`, e);\n    }\n  }\n  const [debugInfoOpen, setDebugInfoOpen] = createSignal(false);\n  const [date, setDate] = createDate(videoQuery.data?.uploadDate ?? new Date());\n  createEffect(() => {\n    setDate(videoQuery.data?.uploadDate ?? new Date());\n  });\n  const [timeAgo] = createTimeAgo(date, { interval: 1000 * 60 });\n  const [sanitizedDescription, setSanitizedDescription] = createSignal<\n    string | undefined\n  >(undefined);\n  createEffect(async () => {\n    if (!videoQuery.data) return;\n    setSanitizedDescription(await sanitizeText(videoQuery.data.description));\n  });\n\n  return (\n    <>\n      <Modal\n        isOpen={debugInfoOpen()}\n        setIsOpen={setDebugInfoOpen}\n        title=\"Debug info\"\n      >\n        <Tooltip\n          contentSlot=\"Copy to clipboard\"\n          triggerSlot={\n            <Button\n              as=\"div\"\n              appearance=\"subtle\"\n              icon={<FaSolidCopy class=\"w-4 h-4\" />}\n            />\n          }\n          onClick={() => {\n            navigator.clipboard.writeText(\n              JSON.stringify(videoQuery.data, null, 2)\n            );\n          }}\n        />\n        <Show\n          when={videoQuery.data}\n          fallback={<div class=\"w-full h-96 bg-bg1 animate-pulse\" />}\n        >\n          <div class=\"max-w-screen-sm max-h-[80vh] overflow-auto\">\n            <JSONViewer data={videoQuery.data} folded={false} />\n          </div>\n        </Show>\n      </Modal>\n      <DownloadModal\n        id={getVideoId(videoQuery.data)!}\n        isOpen={downloadModalOpen()}\n        setIsOpen={setDownloadModalOpen}\n      />\n      <div class=\"bg-bg1 p-4 @container\">\n        <div class=\"flex flex-col gap-2\">\n          <div class=\"flex flex-col gap-2 \">\n            <div class=\"flex items-start justify-between h-full\">\n              <Show\n                when={videoQuery.data}\n                fallback={\n                  <div class=\"w-full h-6 bg-bg2 rounded animate-pulse\" />\n                }\n              >\n                <h1 class=\"text-lg leading-tight font-bold sm:text-xl \">\n                  {videoQuery.data!.title}\n                </h1>\n              </Show>\n            </div>\n            <Show\n              when={videoQuery.data}\n              fallback={\n                <div class=\"w-full h-12 flex sm:justify-start justify-between gap-2\">\n                  <div class=\"w-44 flex items-center gap-2\">\n                    <div class=\"w-12 h-12 aspect-square bg-bg2 animate-pulse rounded-full\" />\n                    <div class=\"flex flex-col justify-between py-1 gap-1 h-full w-full \">\n                      <div class=\"w-full h-4  bg-bg2 animate-pulse rounded\" />\n                      <div class=\"w-3/4 h-4 bg-bg2 animate-pulse rounded\" />\n                    </div>\n                  </div>\n                  <div class=\"w-32 h-10  bg-bg2 animate-pulse rounded-full\" />\n                </div>\n              }\n            >\n              <div class=\"my-1 flex justify-between items-center gap-4 sm:justify-start \">\n                <div class=\"flex max-w-max items-center gap-2 text-sm sm:text-base\">\n                  <Link class=\"link\" href={`${videoQuery.data!.uploaderUrl}`}>\n                    <img\n                      src={videoQuery.data!.uploaderAvatar}\n                      width={42}\n                      height={42}\n                      alt={videoQuery.data!.uploader}\n                      class=\"rounded-full\"\n                    />\n                  </Link>\n                  <div class=\"flex flex-col items-start justify-start\">\n                    <Link\n                      href={`${videoQuery.data!.uploaderUrl}`}\n                      class=\"link flex w-fit items-center gap-2\"\n                    >\n                      {videoQuery.data!.uploader}{\" \"}\n                      {videoQuery.data!.uploaderVerified && <Checkmark />}\n                    </Link>\n                    <div\n                      title={`${\n                        videoQuery.data!.uploaderSubscriberCount\n                      } subscribers`}\n                      class=\"flex w-full items-center text-start text-xs text-text2 sm:text-sm\"\n                    >\n                      {numeral(videoQuery.data!.uploaderSubscriberCount)\n                        .format(\"0a\")\n                        .toUpperCase()}{\" \"}\n                      subscribers\n                    </div>\n                  </div>\n                </div>\n\n                <SubscribeButton\n                  name={videoQuery.data!.uploader}\n                  id={\n                    (() =>\n                      videoQuery.data?.uploaderUrl?.split(\"/channel/\")[1])() ??\n                    \"\"\n                  }\n                />\n              </div>\n            </Show>\n          </div>\n          <Show when={videoQuery.data} fallback={<ActionsContainerFallback />}>\n            <ActionsContainer\n              downloaded={props.downloaded}\n              deleteVideo={() => deleteVideo(getVideoId(videoQuery.data)!)}\n              setDownloadModalOpen={() => setDownloadModalOpen(true)}\n              refetch={videoQuery.refetch}\n              setDebugInfoOpen={() => setDebugInfoOpen(true)}\n            />\n          </Show>\n          <Show\n            when={videoQuery.data}\n            fallback={\n              <div class=\"w-full h-8 flex flex-wrap gap-2 mb-2 items-end justify-between \">\n                <div class=\"w-64 h-4 bg-bg2 animate-pulse rounded-lg\" />\n                <div class=\"w-full @sm:w-36 h-4 bg-bg2 animate-pulse rounded-lg\" />\n              </div>\n            }\n          >\n            <div\n              title={`Published ${(() => {\n                const substr = date().toString().split(\":\")[0];\n                return substr.slice(0, substr.length - 3);\n              })()} • ${numeral(videoQuery.data!.views).format(\"0,0\")} views`}\n              class=\"flex flex-col @sm:flex-row items-start @sm:items-center justify-between gap-1 my-1 text-sm \"\n            >\n              <div class=\"flex items-center gap-1 @sm:max-w-[16rem] @md:max-w-full\">\n                <p class=\"truncate\">\n                  {(() => {\n                    const substr = date().toString().split(\":\")[0];\n                    const time = date().toString().split(\" \")[4];\n                    return `${substr.slice(0, substr.length - 3)} ${time.slice(0, time.length - 3)}`;\n                  })()}\n                </p>\n                •\n                <p class=\"truncate\">\n                  {videoQuery.data!.views > 10000\n                    ? numeral(videoQuery.data!.views)\n                        .format(\"0.00a\")\n                        .toUpperCase()\n                    : numeral(videoQuery.data!.views)\n                        .format(\"0,0\")\n                        .toUpperCase()}{\" \"}\n                  views\n                </p>\n              </div>\n              <div class=\"flex flex-col w-full @sm:w-36 \">\n                <div class=\"flex items-center justify-between\">\n                  <span\n                    title={`${numeral(videoQuery.data!.likes).format(\"0,0\")} likes`}\n                    class=\"flex items-center gap-1 \"\n                  >\n                    <TbThumbUpFilled class=\"w-5 h-5 text-text2\" />\n                    {videoQuery.data!.likes > 1000\n                      ? numeral(videoQuery.data!.likes)\n                          .format(\"0.0a\")\n                          .toUpperCase()\n                      : numeral(videoQuery.data!.likes)\n                          .format(\"0,0\")\n                          .toUpperCase()}\n                  </span>\n                  <span\n                    title={`${numeral(videoQuery.data!.dislikes).format(\n                      \"0,0\"\n                    )} likes`}\n                    class=\"flex items-center gap-1\"\n                  >\n                    <TbThumbDownFilled\n                      class=\"h-5 w-5 text-text2 \"\n                      fill=\"currentColor\"\n                    />\n                    {videoQuery.data!.dislikes > 1000\n                      ? numeral(videoQuery.data!.dislikes)\n                          .format(\"0.0a\")\n                          .toUpperCase()\n                      : numeral(videoQuery.data!.dislikes)\n                          .format(\"0,0\")\n                          .toUpperCase()}\n                  </span>\n                </div>\n                <div class=\"w-full h-1 bg-primary rounded mt-2 flex justify-end\">\n                  <div\n                    class=\"h-full bg-bg3 rounded-r\"\n                    style={{\n                      width: `${\n                        (videoQuery.data!.dislikes /\n                          (videoQuery.data!.likes +\n                            videoQuery.data!.dislikes)) *\n                        100\n                      }%`,\n                    }}\n                  />\n                </div>\n              </div>\n            </div>\n          </Show>\n        </div>\n        <Show\n          when={videoQuery.data}\n          fallback={\n            <div class=\"mt-1 rounded-lg w-full h-24 bg-bg2 animate-pulse\" />\n          }\n        >\n          <div class=\"mt-1 flex flex-col rounded-lg bg-bg2 p-2\">\n            <div\n              tabIndex={0}\n              id=\"description\"\n              aria-expanded={expanded()}\n              class={`min-w-0 max-w-full overflow-hidden ${\n                expanded() ? \"\" : \"max-h-20\"\n              }`}\n              innerHTML={sanitizedDescription()!}\n            />\n            <div classList={{ hidden: expanded() }} class=\"w-full h-0 relative\">\n              <div class=\"absolute bottom-full w-full h-5 bg-gradient-to-t from-bg2 to-transparent pointer-events-none\" />\n            </div>\n            <button\n              aria-controls=\"description\"\n              onClick={() => {\n                setExpanded(!expanded());\n              }}\n              class=\"text-center text-sm text-accent1 hover:underline \"\n            >\n              Show {expanded() ? \"less\" : \"more\"}\n            </button>\n          </div>\n        </Show>\n      </div>\n    </>\n  );\n};\n\nexport const Checkmark = () => (\n  <svg\n    class=\"h-4 w-4 \"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    fill=\"currentColor\"\n    viewBox=\"0 0 24 24\"\n  >\n    <path d=\"M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-1.25 17.292l-4.5-4.364 1.857-1.858 2.643 2.506 5.643-5.784 1.857 1.857-7.5 7.643z\" />\n  </svg>\n);\n\ntype JSONViewerProps = {\n  data: any;\n  folded: boolean;\n  level?: number;\n};\n\nconst JSONViewer: any = (props: JSONViewerProps) => {\n  const [folded, setFolded] = createSignal(props.folded);\n  const isObject = typeof props.data === \"object\" && props.data !== null;\n\n  return (\n    <div class={`pl-${props.level || 1} flex text-xs font-mono`}>\n      {isObject ? (\n        <div class=\"flex gap-2 justify-between\">\n          <span class=\"cursor-pointer\" onClick={() => setFolded(!folded())}>\n            {folded() ? <FaSolidChevronRight /> : <FaSolidChevronDown />}\n          </span>\n          <span>{Array.isArray(props.data) ? \"[\" : \"{\"}</span>\n          {!folded() ? (\n            <pre>\n              {Object.entries(props.data).map(([key, value], index) => (\n                <pre class=\"flex gap-2\">\n                  <span class=\"font-bold\">{key}:</span>{\" \"}\n                  <JSONViewer\n                    data={value}\n                    level={(props.level || 0) + 1}\n                    folded={true}\n                  />\n                </pre>\n              ))}\n            </pre>\n          ) : (\n            \"...\"\n          )}\n          <span>{Array.isArray(props.data) ? \"]\" : \"}\"}</span>\n        </div>\n      ) : (\n        <span>{props.data}</span>\n      )}\n    </div>\n  );\n};\n\nexport default Description;\n\nconst ActionsContainer = (props: {\n  downloaded: boolean;\n  deleteVideo: () => void;\n  setDownloadModalOpen: () => void;\n  refetch: () => void;\n  setDebugInfoOpen: () => void;\n}) => {\n  return (\n    <div class=\"flex items-center justify-evenly rounded-full p-2 bg-bg2\">\n      <Switch>\n        <Match when={props.downloaded}>\n          <Tooltip\n            as=\"div\"\n            contentSlot=\"Delete\"\n            triggerSlot={\n              <Button\n                icon={<FaSolidTrashCan class=\"h-6 w-6\" />}\n                appearance=\"subtle\"\n                onClick={props.deleteVideo}\n              />\n            }\n          />\n        </Match>\n        <Match when={!props.downloaded}>\n          <Tooltip\n            as=\"div\"\n            contentSlot=\"Download\"\n            triggerSlot={\n              <Button\n                icon={<FaSolidDownload class=\"h-6 w-6\" />}\n                appearance=\"subtle\"\n                onClick={props.setDownloadModalOpen}\n              />\n            }\n          />\n        </Match>\n      </Switch>\n      <Tooltip\n        as=\"div\"\n        contentSlot={\"Share\"}\n        triggerSlot={\n          <Button\n            icon={<FaSolidShare class=\"h-6 w-6\" />}\n            appearance=\"subtle\"\n            onClick={() => {\n              toast.show(\"Not implemented\");\n            }}\n          />\n        }\n      />\n      <Tooltip\n        as=\"div\"\n        contentSlot=\"Save\"\n        triggerSlot={\n          <Button\n            icon={<FaSolidBookmark class=\"h-6 w-6\" />}\n            appearance=\"subtle\"\n            onClick={() => {\n              toast.show(\"Not implemented\");\n            }}\n          />\n        }\n      />\n      <Tooltip\n        as=\"div\"\n        contentSlot=\"Debug info\"\n        triggerSlot={\n          <Button\n            icon={<FaSolidBug class=\"h-6 w-6\" />}\n            appearance=\"subtle\"\n            onClick={props.setDebugInfoOpen}\n          />\n        }\n      />\n      <Tooltip\n        as=\"div\"\n        contentSlot=\"Soft Refresh (Shift+R)\"\n        triggerSlot={\n          <Button\n            icon={<FaSolidArrowsRotate class=\"h-6 w-6\" />}\n            appearance=\"subtle\"\n            onClick={props.refetch}\n          />\n        }\n      />\n    </div>\n  );\n};\n\nconst ActionsContainerFallback = () => (\n  <div class=\"flex items-center bg-bg2 justify-evenly rounded-full p-2 \">\n    <div class=\"w-10 h-10 bg-bg1 rounded-full animate-pulse\" />\n    <div class=\"w-10 h-10 bg-bg1 rounded-full animate-pulse\" />\n    <div class=\"w-10 h-10 bg-bg1 rounded-full animate-pulse\" />\n    <div class=\"w-10 h-10 bg-bg1 rounded-full animate-pulse\" />\n    <div class=\"w-10 h-10 bg-bg1 rounded-full animate-pulse\" />\n  </div>\n);\n"],"file":"assets/Description-BLDREoDG.js"}
{"version":3,"mappings":"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","names":["getCastFrameworkURL","hasLoadedCastFramework","window","cast","framework","isCastAvailable","chrome","isAvailable","isCastConnected","getCastContext","getCastState","CastState","CONNECTED","CastContext","getInstance","getCastSession","getCurrentSession","getCastSessionMedia","getSessionObj","media","hasActiveCastSession","src","contentId","getDefaultCastOptions","language","autoJoinPolicy","AutoJoinPolicy","ORIGIN_SCOPED","receiverApplicationId","DEFAULT_MEDIA_RECEIVER_APP_ID","resumeSavedSession","androidReceiverCompatible","getCastErrorMessage","code","listenCastContextEvent","type","handler","listen","GoogleCastLoader","constructor","name","mediaType","canPlay","IS_CHROME","IS_IOS","canGoogleCastSrc","prompt","ctx","loadEvent","openEvent","errorEvent","Pl","aa","RemotePlayer","RemotePlayerController","player","createEvent","trigger","dispatchEvent","pm","Rl","peek","$props","googleCast","$state","remotePlaybackInfo","set","deviceName","getCastDevice","friendlyName","error","Error","Oo","toUpperCase","detail","cancelable","dispatch","load","__vitePreload","GoogleCastProvider","loadStartEvent","loadScript","customElements","whenDefined","loadedEvent","options","Tl","errorCode","requestSession","setOptions","state","delegate","c","message"],"ignoreList":[0,1],"sources":["../../../../../node_modules/.pnpm/vidstack@1.11.13/node_modules/vidstack/prod/chunks/vidstack-DjDpNi5w.js","../../../../../node_modules/.pnpm/vidstack@1.11.13/node_modules/vidstack/prod/chunks/vidstack-DZeWSaI_.js"],"sourcesContent":["import { l as listen } from './vidstack-DeDYMHjY.js';\n\nfunction getCastFrameworkURL() {\n  return \"https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1\";\n}\nfunction hasLoadedCastFramework() {\n  return !!window.cast?.framework;\n}\nfunction isCastAvailable() {\n  return !!window.chrome?.cast?.isAvailable;\n}\nfunction isCastConnected() {\n  return getCastContext().getCastState() === cast.framework.CastState.CONNECTED;\n}\nfunction getCastContext() {\n  return window.cast.framework.CastContext.getInstance();\n}\nfunction getCastSession() {\n  return getCastContext().getCurrentSession();\n}\nfunction getCastSessionMedia() {\n  return getCastSession()?.getSessionObj().media[0];\n}\nfunction hasActiveCastSession(src) {\n  const contentId = getCastSessionMedia()?.media.contentId;\n  return contentId === src?.src;\n}\nfunction getDefaultCastOptions() {\n  return {\n    language: \"en-US\",\n    autoJoinPolicy: chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,\n    receiverApplicationId: chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,\n    resumeSavedSession: true,\n    androidReceiverCompatible: true\n  };\n}\nfunction getCastErrorMessage(code) {\n  const defaultMessage = `Google Cast Error Code: ${code}`;\n  return defaultMessage;\n}\nfunction listenCastContextEvent(type, handler) {\n  return listen(getCastContext(), type, handler);\n}\n\nexport { getCastSession as a, isCastAvailable as b, getCastErrorMessage as c, getDefaultCastOptions as d, getCastFrameworkURL as e, getCastSessionMedia as f, getCastContext as g, hasLoadedCastFramework as h, isCastConnected as i, hasActiveCastSession as j, listenCastContextEvent as l };\n","import { I as IS_CHROME, b as IS_IOS, d as canGoogleCastSrc } from './vidstack-BupzoABp.js';\nimport { l as loadScript } from './vidstack-BhcIzQoA.js';\nimport { g as getCastContext, a as getCastSession, i as isCastConnected, h as hasLoadedCastFramework, b as isCastAvailable, c as getCastErrorMessage, d as getDefaultCastOptions, e as getCastFrameworkURL } from './vidstack-DjDpNi5w.js';\nimport { p as peek } from './vidstack-CSyVEdLV.js';\nimport './vidstack-DeDYMHjY.js';\n\nclass GoogleCastLoader {\n  constructor() {\n    this.name = \"google-cast\";\n  }\n  /**\n   * @see {@link https://developers.google.com/cast/docs/reference/web_sender/cast.framework.CastContext}\n   */\n  get cast() {\n    return getCastContext();\n  }\n  mediaType() {\n    return \"video\";\n  }\n  canPlay(src) {\n    return IS_CHROME && !IS_IOS && canGoogleCastSrc(src);\n  }\n  async prompt(ctx) {\n    let loadEvent, openEvent, errorEvent;\n    try {\n      loadEvent = await this.Pl(ctx);\n      if (!this.aa) {\n        this.aa = new cast.framework.RemotePlayer();\n        new cast.framework.RemotePlayerController(this.aa);\n      }\n      openEvent = ctx.player.createEvent(\"google-cast-prompt-open\", {\n        trigger: loadEvent\n      });\n      ctx.player.dispatchEvent(openEvent);\n      this.pm(ctx, \"connecting\", openEvent);\n      await this.Rl(peek(ctx.$props.googleCast));\n      ctx.$state.remotePlaybackInfo.set({\n        deviceName: getCastSession()?.getCastDevice().friendlyName\n      });\n      if (isCastConnected())\n        this.pm(ctx, \"connected\", openEvent);\n    } catch (code) {\n      const error = code instanceof Error ? code : this.Oo(\n        (code + \"\").toUpperCase(),\n        \"Prompt failed.\"\n      );\n      errorEvent = ctx.player.createEvent(\"google-cast-prompt-error\", {\n        detail: error,\n        trigger: openEvent ?? loadEvent,\n        cancelable: true\n      });\n      ctx.player.dispatch(errorEvent);\n      this.pm(\n        ctx,\n        isCastConnected() ? \"connected\" : \"disconnected\",\n        errorEvent\n      );\n      throw error;\n    } finally {\n      ctx.player.dispatch(\"google-cast-prompt-close\", {\n        trigger: errorEvent ?? openEvent ?? loadEvent\n      });\n    }\n  }\n  async load(ctx) {\n    if (!this.aa) {\n      throw Error(\"[vidstack] google cast player was not initialized\");\n    }\n    return new (await import('../providers/vidstack-google-cast.js')).GoogleCastProvider(this.aa, ctx);\n  }\n  async Pl(ctx) {\n    if (hasLoadedCastFramework())\n      return;\n    const loadStartEvent = ctx.player.createEvent(\"google-cast-load-start\");\n    ctx.player.dispatch(loadStartEvent);\n    await loadScript(getCastFrameworkURL());\n    await customElements.whenDefined(\"google-cast-launcher\");\n    const loadedEvent = ctx.player.createEvent(\"google-cast-loaded\", { trigger: loadStartEvent });\n    ctx.player.dispatch(loadedEvent);\n    if (!isCastAvailable()) {\n      throw this.Oo(\"CAST_NOT_AVAILABLE\", \"Google Cast not available on this platform.\");\n    }\n    return loadedEvent;\n  }\n  async Rl(options) {\n    this.Tl(options);\n    const errorCode = await this.cast.requestSession();\n    if (errorCode) {\n      throw this.Oo(\n        errorCode.toUpperCase(),\n        getCastErrorMessage(errorCode)\n      );\n    }\n  }\n  Tl(options) {\n    this.cast?.setOptions({\n      ...getDefaultCastOptions(),\n      ...options\n    });\n  }\n  pm(ctx, state, trigger) {\n    const detail = { type: \"google-cast\", state };\n    ctx.delegate.c(\"remote-playback-change\", detail, trigger);\n  }\n  Oo(code, message) {\n    const error = Error(message);\n    error.code = code;\n    return error;\n  }\n}\n\nexport { GoogleCastLoader };\n"],"file":"assets/vidstack-DZeWSaI_-B-nP6Zb8.js"}
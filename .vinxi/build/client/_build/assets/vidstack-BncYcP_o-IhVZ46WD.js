import{bm as a,bk as c,aT as o,aU as n,aR as d,bq as h,aP as u}from"./syncStore-BssUQgBy.js";function l(e,t=3e3){const s=a();return setTimeout(()=>{const i=e();i&&s.reject(i)},t),s}class f{constructor(t){this.db=t,this.cb=c(""),this.referrerPolicy=null,t.setAttribute("frameBorder","0"),t.setAttribute("aria-hidden","true"),t.setAttribute("allow","autoplay; fullscreen; encrypted-media; picture-in-picture; accelerometer; gyroscope"),this.referrerPolicy!==null&&t.setAttribute("referrerpolicy",this.referrerPolicy)}get iframe(){return this.db}setup(){o(window,"message",this.Lg.bind(this)),o(this.db,"load",this.lc.bind(this)),n(this.fd.bind(this))}fd(){const t=this.cb();if(!t.length){this.db.setAttribute("src","");return}const s=d(()=>this.Te());this.db.setAttribute("src",h(t,s))}gd(t,s){this.db.contentWindow?.postMessage(JSON.stringify(t),s??"*")}Lg(t){const s=this.eb();if((t.source===null||t.source===this.db?.contentWindow)&&(!u(s)||s===t.origin)){try{const r=JSON.parse(t.data);r&&this.hd(r,t);return}catch{}t.data&&this.hd(t.data,t)}}}export{f as E,l as t};
//# sourceMappingURL=vidstack-BncYcP_o-IhVZ46WD.js.map

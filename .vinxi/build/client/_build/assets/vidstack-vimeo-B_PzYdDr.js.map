{"version":3,"file":"vidstack-vimeo-B_PzYdDr.js","sources":["../../../../../node_modules/.pnpm/vidstack@1.11.13/node_modules/vidstack/prod/providers/vidstack-vimeo.js"],"sourcesContent":["import { r as createScope, f as signal, g as effect, p as peek, i as isString, n as deferredPromise, l as listenEvent, v as isArray } from '../chunks/vidstack-CSyVEdLV.js';\nimport '../chunks/vidstack-DSXQgJy0.js';\nimport { T as TimeRange } from '../chunks/vidstack-DeDYMHjY.js';\nimport { T as TextTrack } from '../chunks/vidstack-CqXkSIjG.js';\nimport { L as ListSymbol } from '../chunks/vidstack-CerDQCFL.js';\nimport { Q as QualitySymbol } from '../chunks/vidstack-B3EgHpRH.js';\nimport { R as RAFLoop } from '../chunks/vidstack-CpkvFYuN.js';\nimport { p as preconnect } from '../chunks/vidstack-BhcIzQoA.js';\nimport { E as EmbedProvider, t as timedPromise } from '../chunks/vidstack-BncYcP_o.js';\nimport { resolveVimeoVideoId, getVimeoVideoInfo } from '../chunks/vidstack-BTBUzdbF.js';\nimport '../chunks/vidstack-BupzoABp.js';\n\nconst trackedVimeoEvents = [\n  \"bufferend\",\n  \"bufferstart\",\n  // 'cuechange',\n  \"durationchange\",\n  \"ended\",\n  \"enterpictureinpicture\",\n  \"error\",\n  \"fullscreenchange\",\n  \"leavepictureinpicture\",\n  \"loaded\",\n  // 'loadeddata',\n  // 'loadedmetadata',\n  // 'loadstart',\n  \"playProgress\",\n  \"loadProgress\",\n  \"pause\",\n  \"play\",\n  \"playbackratechange\",\n  // 'progress',\n  \"qualitychange\",\n  \"seeked\",\n  \"seeking\",\n  // 'texttrackchange',\n  \"timeupdate\",\n  \"volumechange\",\n  \"waiting\"\n  // 'adstarted',\n  // 'adcompleted',\n  // 'aderror',\n  // 'adskipped',\n  // 'adallcompleted',\n  // 'adclicked',\n  // 'chapterchange',\n  // 'chromecastconnected',\n  // 'remoteplaybackavailabilitychange',\n  // 'remoteplaybackconnecting',\n  // 'remoteplaybackconnect',\n  // 'remoteplaybackdisconnect',\n  // 'liveeventended',\n  // 'liveeventstarted',\n  // 'livestreamoffline',\n  // 'livestreamonline',\n];\n\nclass VimeoProvider extends EmbedProvider {\n  constructor(iframe, _ctx) {\n    super(iframe);\n    this.b = _ctx;\n    this.$$PROVIDER_TYPE = \"VIMEO\";\n    this.scope = createScope();\n    this.Fa = 0;\n    this.Ga = new TimeRange(0, 0);\n    this.Hb = new TimeRange(0, 0);\n    this.E = null;\n    this.G = null;\n    this.rd = null;\n    this.N = signal(\"\");\n    this.oc = signal(false);\n    this.sd = null;\n    this.V = null;\n    this.eh = null;\n    this.Da = new RAFLoop(this.bd.bind(this));\n    this.Zk = null;\n    /**\n     * Whether tracking session data should be enabled on the embed, including cookies and analytics.\n     * This is turned off by default to be GDPR-compliant.\n     *\n     * @defaultValue `false`\n     */\n    this.cookies = false;\n    this.title = true;\n    this.byline = true;\n    this.portrait = true;\n    this.color = \"00ADEF\";\n    // Embed will sometimes dispatch 0 at end of playback.\n    this.No = false;\n  }\n  get c() {\n    return this.b.delegate.c;\n  }\n  get type() {\n    return \"vimeo\";\n  }\n  get currentSrc() {\n    return this.V;\n  }\n  get videoId() {\n    return this.N();\n  }\n  get hash() {\n    return this.sd;\n  }\n  get isPro() {\n    return this.oc();\n  }\n  preconnect() {\n    preconnect(this.eb());\n  }\n  setup() {\n    super.setup();\n    effect(this.kd.bind(this));\n    effect(this.fh.bind(this));\n    effect(this.gh.bind(this));\n    this.c(\"provider-setup\", this);\n  }\n  destroy() {\n    this.H();\n    this.q(\"destroy\");\n  }\n  async play() {\n    const { paused } = this.b.$state;\n    if (!this.E) {\n      this.E = timedPromise(() => {\n        this.E = null;\n        if (paused())\n          return \"Timed out.\";\n      });\n      this.q(\"play\");\n    }\n    return this.E.promise;\n  }\n  async pause() {\n    const { paused } = this.b.$state;\n    if (!this.G) {\n      this.G = timedPromise(() => {\n        this.G = null;\n        if (!paused())\n          return \"Timed out.\";\n      });\n      this.q(\"pause\");\n    }\n    return this.G.promise;\n  }\n  setMuted(muted) {\n    this.q(\"setMuted\", muted);\n  }\n  setCurrentTime(time) {\n    this.q(\"seekTo\", time);\n    this.c(\"seeking\", time);\n  }\n  setVolume(volume) {\n    this.q(\"setVolume\", volume);\n    this.q(\"setMuted\", peek(this.b.$state.muted));\n  }\n  setPlaybackRate(rate) {\n    this.q(\"setPlaybackRate\", rate);\n  }\n  async loadSource(src) {\n    if (!isString(src.src)) {\n      this.V = null;\n      this.sd = null;\n      this.N.set(\"\");\n      return;\n    }\n    const { videoId, hash } = resolveVimeoVideoId(src.src);\n    this.N.set(videoId ?? \"\");\n    this.sd = hash ?? null;\n    this.V = src;\n  }\n  kd() {\n    this.H();\n    const videoId = this.N();\n    if (!videoId) {\n      this.cb.set(\"\");\n      return;\n    }\n    this.cb.set(`${this.eb()}/video/${videoId}`);\n    this.c(\"load-start\");\n  }\n  fh() {\n    const videoId = this.N();\n    if (!videoId)\n      return;\n    const promise = deferredPromise(), abort = new AbortController();\n    this.rd = promise;\n    getVimeoVideoInfo(videoId, abort).then((info) => {\n      promise.resolve(info);\n    }).catch((e) => {\n      promise.reject();\n    });\n    return () => {\n      promise.reject();\n      abort.abort();\n    };\n  }\n  gh() {\n    const isPro = this.oc(), { $state, qualities } = this.b;\n    $state.canSetPlaybackRate.set(isPro);\n    qualities[ListSymbol.Mc](!isPro);\n    if (isPro) {\n      return listenEvent(qualities, \"change\", () => {\n        if (qualities.auto)\n          return;\n        const id = qualities.selected?.id;\n        if (id)\n          this.q(\"setQuality\", id);\n      });\n    }\n  }\n  eb() {\n    return \"https://player.vimeo.com\";\n  }\n  Te() {\n    const { keyDisabled } = this.b.$props, { playsInline, nativeControls } = this.b.$state, showControls = nativeControls();\n    return {\n      title: this.title,\n      byline: this.byline,\n      color: this.color,\n      portrait: this.portrait,\n      controls: showControls,\n      h: this.hash,\n      keyboard: showControls && !keyDisabled(),\n      transparent: true,\n      playsinline: playsInline(),\n      dnt: !this.cookies\n    };\n  }\n  bd() {\n    this.q(\"getCurrentTime\");\n  }\n  Eb(time, trigger) {\n    if (this.No && time === 0)\n      return;\n    const { realCurrentTime, realDuration, paused, bufferedEnd } = this.b.$state;\n    if (realCurrentTime() === time)\n      return;\n    const prevTime = realCurrentTime(), detail = {\n      currentTime: time,\n      played: this.cm(time)\n    };\n    this.c(\"time-update\", detail, trigger);\n    if (Math.abs(prevTime - time) > 1.5) {\n      this.c(\"seeking\", time, trigger);\n      if (!paused() && bufferedEnd() < time) {\n        this.c(\"waiting\", void 0, trigger);\n      }\n    }\n    if (realDuration() - time < 0.01) {\n      this.c(\"end\", void 0, trigger);\n      this.No = true;\n      setTimeout(() => {\n        this.No = false;\n      }, 500);\n    }\n  }\n  cm(time) {\n    return this.Fa >= time ? this.Ga : this.Ga = new TimeRange(0, this.Fa = time);\n  }\n  bb(time, trigger) {\n    this.c(\"seeked\", time, trigger);\n  }\n  qd(trigger) {\n    const videoId = this.N();\n    this.rd?.promise.then((info) => {\n      if (!info)\n        return;\n      const { title, poster, duration, pro } = info;\n      this.oc.set(pro);\n      this.c(\"title-change\", title, trigger);\n      this.c(\"poster-change\", poster, trigger);\n      this.c(\"duration-change\", duration, trigger);\n      this.md(duration, trigger);\n    }).catch(() => {\n      if (videoId !== this.N())\n        return;\n      this.q(\"getVideoTitle\");\n      this.q(\"getDuration\");\n    });\n  }\n  md(duration, trigger) {\n    const { nativeControls } = this.b.$state, showEmbedControls = nativeControls();\n    this.Hb = new TimeRange(0, duration);\n    const detail = {\n      buffered: new TimeRange(0, 0),\n      seekable: this.Hb,\n      duration\n    };\n    this.b.delegate.jc(detail, trigger);\n    if (!showEmbedControls) {\n      this.q(\"_hideOverlay\");\n    }\n    this.q(\"getQualities\");\n    this.q(\"getChapters\");\n  }\n  hh(method, data, trigger) {\n    switch (method) {\n      case \"getVideoTitle\":\n        const videoTitle = data;\n        this.c(\"title-change\", videoTitle, trigger);\n        break;\n      case \"getDuration\":\n        const duration = data;\n        if (!this.b.$state.canPlay()) {\n          this.md(duration, trigger);\n        } else {\n          this.c(\"duration-change\", duration, trigger);\n        }\n        break;\n      case \"getCurrentTime\":\n        this.Eb(data, trigger);\n        break;\n      case \"getBuffered\":\n        if (isArray(data) && data.length) {\n          this.Ye(data[data.length - 1][1], trigger);\n        }\n        break;\n      case \"setMuted\":\n        this.ab(peek(this.b.$state.volume), data, trigger);\n        break;\n      case \"getChapters\":\n        this.Yk(data);\n        break;\n      case \"getQualities\":\n        this.pc(data, trigger);\n        break;\n    }\n  }\n  ih() {\n    for (const type of trackedVimeoEvents) {\n      this.q(\"addEventListener\", type);\n    }\n  }\n  Aa(trigger) {\n    this.Da.ra();\n    this.c(\"pause\", void 0, trigger);\n    this.G?.resolve();\n    this.G = null;\n  }\n  xb(trigger) {\n    this.Da.Bb();\n    this.c(\"play\", void 0, trigger);\n    this.E?.resolve();\n    this.E = null;\n  }\n  jh(trigger) {\n    const { paused } = this.b.$state;\n    if (!paused() && !this.No) {\n      this.c(\"playing\", void 0, trigger);\n    }\n  }\n  Ye(buffered, trigger) {\n    const detail = {\n      buffered: new TimeRange(0, buffered),\n      seekable: this.Hb\n    };\n    this.c(\"progress\", detail, trigger);\n  }\n  kh(trigger) {\n    this.c(\"waiting\", void 0, trigger);\n  }\n  lh(trigger) {\n    const { paused } = this.b.$state;\n    if (!paused())\n      this.c(\"playing\", void 0, trigger);\n  }\n  dd(trigger) {\n    const { paused } = this.b.$state;\n    if (paused()) {\n      this.c(\"play\", void 0, trigger);\n    }\n    this.c(\"waiting\", void 0, trigger);\n  }\n  ab(volume, muted, trigger) {\n    const detail = { volume, muted };\n    this.c(\"volume-change\", detail, trigger);\n  }\n  // protected _onTextTrackChange(track: VimeoTextTrack, trigger: Event) {\n  //   const textTrack = this._ctx.textTracks.toArray().find((t) => t.language === track.language);\n  //   if (textTrack) textTrack.mode = track.mode;\n  // }\n  // protected _onTextTracksChange(tracks: VimeoTextTrack[], trigger: Event) {\n  //   for (const init of tracks) {\n  //     const textTrack = new TextTrack({\n  //       ...init,\n  //       label: init.label.replace('auto-generated', 'auto'),\n  //     });\n  //     textTrack[TextTrackSymbol._readyState] = 2;\n  //     this._ctx.textTracks.add(textTrack, trigger);\n  //     textTrack.setMode(init.mode, trigger);\n  //   }\n  // }\n  // protected _onCueChange(cue: VimeoTextCue, trigger: Event) {\n  //   const { textTracks, $state } = this._ctx,\n  //     { currentTime } = $state,\n  //     track = textTracks.selected;\n  //   if (this._currentCue) track?.removeCue(this._currentCue, trigger);\n  //   this._currentCue = new window.VTTCue(currentTime(), Number.MAX_SAFE_INTEGER, cue.text);\n  //   track?.addCue(this._currentCue, trigger);\n  // }\n  Yk(chapters) {\n    this._k();\n    if (!chapters.length)\n      return;\n    const track = new TextTrack({\n      kind: \"chapters\",\n      default: true\n    }), { realDuration } = this.b.$state;\n    for (let i = 0; i < chapters.length; i++) {\n      const chapter = chapters[i], nextChapter = chapters[i + 1];\n      track.addCue(\n        new window.VTTCue(\n          chapter.startTime,\n          nextChapter?.startTime ?? realDuration(),\n          chapter.title\n        )\n      );\n    }\n    this.Zk = track;\n    this.b.textTracks.add(track);\n  }\n  _k() {\n    if (!this.Zk)\n      return;\n    this.b.textTracks.remove(this.Zk);\n    this.Zk = null;\n  }\n  pc(qualities, trigger) {\n    this.b.qualities[QualitySymbol.Za] = qualities.some((q) => q.id === \"auto\") ? () => this.q(\"setQuality\", \"auto\") : void 0;\n    for (const quality of qualities) {\n      if (quality.id === \"auto\")\n        continue;\n      const height = +quality.id.slice(0, -1);\n      if (isNaN(height))\n        continue;\n      this.b.qualities[ListSymbol.oa](\n        {\n          id: quality.id,\n          width: height * (16 / 9),\n          height,\n          codec: \"avc1,h.264\",\n          bitrate: -1\n        },\n        trigger\n      );\n    }\n    this.fb(\n      qualities.find((q) => q.active),\n      trigger\n    );\n  }\n  fb({ id } = {}, trigger) {\n    if (!id)\n      return;\n    const isAuto = id === \"auto\", newQuality = this.b.qualities.getById(id);\n    if (isAuto) {\n      this.b.qualities[QualitySymbol.Ya](isAuto, trigger);\n      this.b.qualities[ListSymbol.pa](void 0, true, trigger);\n    } else {\n      this.b.qualities[ListSymbol.pa](newQuality ?? void 0, true, trigger);\n    }\n  }\n  mh(event, payload, trigger) {\n    switch (event) {\n      case \"ready\":\n        this.ih();\n        break;\n      case \"loaded\":\n        this.qd(trigger);\n        break;\n      case \"play\":\n        this.xb(trigger);\n        break;\n      case \"playProgress\":\n        this.jh(trigger);\n        break;\n      case \"pause\":\n        this.Aa(trigger);\n        break;\n      case \"loadProgress\":\n        this.Ye(payload.seconds, trigger);\n        break;\n      case \"waiting\":\n        this.dd(trigger);\n        break;\n      case \"bufferstart\":\n        this.kh(trigger);\n        break;\n      case \"bufferend\":\n        this.lh(trigger);\n        break;\n      case \"volumechange\":\n        this.ab(payload.volume, peek(this.b.$state.muted), trigger);\n        break;\n      case \"durationchange\":\n        this.Hb = new TimeRange(0, payload.duration);\n        this.c(\"duration-change\", payload.duration, trigger);\n        break;\n      case \"playbackratechange\":\n        this.c(\"rate-change\", payload.playbackRate, trigger);\n        break;\n      case \"qualitychange\":\n        this.fb(payload, trigger);\n        break;\n      case \"fullscreenchange\":\n        this.c(\"fullscreen-change\", payload.fullscreen, trigger);\n        break;\n      case \"enterpictureinpicture\":\n        this.c(\"picture-in-picture-change\", true, trigger);\n        break;\n      case \"leavepictureinpicture\":\n        this.c(\"picture-in-picture-change\", false, trigger);\n        break;\n      case \"ended\":\n        this.c(\"end\", void 0, trigger);\n        break;\n      case \"error\":\n        this.U(payload, trigger);\n        break;\n      case \"seek\":\n      case \"seeked\":\n        this.bb(payload.seconds, trigger);\n        break;\n    }\n  }\n  U(error, trigger) {\n    if (error.method === \"setPlaybackRate\") {\n      this.oc.set(false);\n    }\n    if (error.method === \"play\") {\n      this.E?.reject(error.message);\n      return;\n    }\n  }\n  hd(message, event) {\n    if (message.event) {\n      this.mh(message.event, message.data, event);\n    } else if (message.method) {\n      this.hh(message.method, message.value, event);\n    }\n  }\n  lc() {\n  }\n  q(command, arg) {\n    return this.gd({\n      method: command,\n      value: arg\n    });\n  }\n  H() {\n    this.Da.ra();\n    this.Fa = 0;\n    this.Ga = new TimeRange(0, 0);\n    this.Hb = new TimeRange(0, 0);\n    this.E = null;\n    this.G = null;\n    this.rd = null;\n    this.eh = null;\n    this.oc.set(false);\n    this._k();\n  }\n}\n\nexport { VimeoProvider };\n"],"names":["trackedVimeoEvents","VimeoProvider","EmbedProvider","constructor","iframe","_ctx","b","$$PROVIDER_TYPE","scope","createScope","Fa","Ga","TimeRange","Hb","E","G","rd","N","signal","oc","sd","V","eh","Da","RAFLoop","bd","bind","Zk","cookies","title","byline","portrait","color","No","c","delegate","type","currentSrc","videoId","hash","isPro","preconnect","eb","setup","effect","kd","fh","gh","destroy","H","q","play","paused","$state","timedPromise","promise","pause","setMuted","muted","setCurrentTime","time","setVolume","volume","peek","setPlaybackRate","rate","loadSource","src","isString","set","resolveVimeoVideoId","cb","deferredPromise","abort","AbortController","getVimeoVideoInfo","then","info","resolve","catch","e","reject","qualities","canSetPlaybackRate","ListSymbol","Mc","listenEvent","auto","id","selected","Te","keyDisabled","$props","playsInline","nativeControls","showControls","controls","h","keyboard","transparent","playsinline","dnt","Eb","trigger","realCurrentTime","realDuration","bufferedEnd","prevTime","detail","currentTime","played","cm","Math","abs","setTimeout","bb","qd","poster","duration","pro","md","showEmbedControls","buffered","seekable","jc","hh","method","data","videoTitle","canPlay","isArray","length","Ye","ab","Yk","pc","ih","Aa","ra","xb","Bb","jh","kh","lh","dd","chapters","_k","track","TextTrack","kind","default","i","chapter","nextChapter","addCue","window","VTTCue","startTime","textTracks","add","remove","QualitySymbol","Za","some","quality","height","slice","isNaN","oa","width","codec","bitrate","fb","find","active","isAuto","newQuality","getById","Ya","pa","mh","event","payload","seconds","playbackRate","fullscreen","U","error","message","hd","value","lc","command","arg","gd"],"mappings":"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","x_google_ignoreList":[0]}
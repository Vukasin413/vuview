{"version":3,"file":"long-press-event-CiZXM6zQ.js","sources":["../../../../../node_modules/.pnpm/long-press-event@2.4.6/node_modules/long-press-event/src/long-press-event.js"],"sourcesContent":["/*!\n * long-press-event - v@version@\n * Pure JavaScript long-press-event\n * https://github.com/john-doherty/long-press-event\n * @author John Doherty <www.johndoherty.info>\n * @license MIT\n */\n(function (window, document) {\n\n    'use strict';\n\n    // local timer object based on rAF\n    var timer = null;\n\n    // check if we're using a touch screen\n    var hasPointerEvents = (('PointerEvent' in window) || (window.navigator && 'msPointerEnabled' in window.navigator));\n    var isTouch = (('ontouchstart' in window) || (navigator.MaxTouchPoints > 0) || (navigator.msMaxTouchPoints > 0));\n\n    // switch to pointer events or touch events if using a touch screen\n    var mouseDown = hasPointerEvents ? 'pointerdown' : isTouch ? 'touchstart' : 'mousedown';\n    var mouseUp = hasPointerEvents ? 'pointerup' : isTouch ? 'touchend' : 'mouseup';\n    var mouseMove = hasPointerEvents ? 'pointermove' : isTouch ? 'touchmove' : 'mousemove';\n    var mouseLeave = hasPointerEvents ? 'pointerleave' : isTouch ? 'touchleave' : 'mouseleave';\n\n    // track number of pixels the mouse moves during long press\n    var startX = 0; // mouse x position when timer started\n    var startY = 0; // mouse y position when timer started\n    var maxDiffX = 10; // max number of X pixels the mouse can move during long press before it is canceled\n    var maxDiffY = 10; // max number of Y pixels the mouse can move during long press before it is canceled\n\n    // patch CustomEvent to allow constructor creation (IE/Chrome)\n    if (typeof window.CustomEvent !== 'function') {\n\n        window.CustomEvent = function (event, params) {\n\n            params = params || { bubbles: false, cancelable: false, detail: undefined };\n\n            var evt = document.createEvent('CustomEvent');\n            evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n            return evt;\n        };\n\n        window.CustomEvent.prototype = window.Event.prototype;\n    }\n\n    // requestAnimationFrame() shim by Paul Irish\n    window.requestAnimFrame = (function () {\n        return window.requestAnimationFrame ||\n            window.webkitRequestAnimationFrame ||\n            window.mozRequestAnimationFrame ||\n            window.oRequestAnimationFrame ||\n            window.msRequestAnimationFrame || function (callback) {\n                window.setTimeout(callback, 1000 / 60);\n            };\n    })();\n\n    /**\n     * Behaves the same as setTimeout except uses requestAnimationFrame() where possible for better performance\n     * @param {function} fn The callback function\n     * @param {int} delay The delay in milliseconds\n     * @returns {object} handle to the timeout object\n     */\n    function requestTimeout(fn, delay) {\n\n        if (!window.requestAnimationFrame && !window.webkitRequestAnimationFrame &&\n            !(window.mozRequestAnimationFrame && window.mozCancelRequestAnimationFrame) && // Firefox 5 ships without cancel support\n            !window.oRequestAnimationFrame && !window.msRequestAnimationFrame) return window.setTimeout(fn, delay);\n\n        var start = new Date().getTime();\n        var handle = {};\n\n        var loop = function () {\n            var current = new Date().getTime();\n            var delta = current - start;\n\n            if (delta >= delay) {\n                fn.call();\n            }\n            else {\n                handle.value = requestAnimFrame(loop);\n            }\n        };\n\n        handle.value = requestAnimFrame(loop);\n\n        return handle;\n    }\n\n    /**\n     * Behaves the same as clearTimeout except uses cancelRequestAnimationFrame() where possible for better performance\n     * @param {object} handle The callback function\n     * @returns {void}\n     */\n    function clearRequestTimeout(handle) {\n        if (handle) {\n            window.cancelAnimationFrame ? window.cancelAnimationFrame(handle.value) :\n                window.webkitCancelAnimationFrame ? window.webkitCancelAnimationFrame(handle.value) :\n                    window.webkitCancelRequestAnimationFrame ? window.webkitCancelRequestAnimationFrame(handle.value) : /* Support for legacy API */\n                        window.mozCancelRequestAnimationFrame ? window.mozCancelRequestAnimationFrame(handle.value) :\n                            window.oCancelRequestAnimationFrame ? window.oCancelRequestAnimationFrame(handle.value) :\n                                window.msCancelRequestAnimationFrame ? window.msCancelRequestAnimationFrame(handle.value) :\n                                    clearTimeout(handle);\n        }\n    }\n\n    /**\n     * Fires the 'long-press' event on element\n     * @param {MouseEvent|PointerEvent|TouchEvent} originalEvent The original event being fired\n     * @returns {void}\n     */\n    function fireLongPressEvent(originalEvent) {\n\n        clearLongPressTimer();\n\n        originalEvent = unifyEvent(originalEvent);\n\n        // fire the long-press event\n        var allowClickEvent = this.dispatchEvent(new CustomEvent('long-press', {\n            bubbles: true,\n            cancelable: true,\n\n            // custom event data (legacy)\n            detail: {\n                clientX: originalEvent.clientX,\n                clientY: originalEvent.clientY,\n                offsetX: originalEvent.offsetX,\n                offsetY: originalEvent.offsetY,\n                pageX: originalEvent.pageX,\n                pageY: originalEvent.pageY\n            },\n\n            // add coordinate data that would typically acompany a touch/click event\n            clientX: originalEvent.clientX,\n            clientY: originalEvent.clientY,\n            offsetX: originalEvent.offsetX,\n            offsetY: originalEvent.offsetY,\n            pageX: originalEvent.pageX,\n            pageY: originalEvent.pageY,\n            screenX: originalEvent.screenX,\n            screenY: originalEvent.screenY\n        }));\n\n        if (!allowClickEvent) {\n            // suppress the next click event if e.preventDefault() was called in long-press handler\n            document.addEventListener('click', function suppressEvent(e) {\n                document.removeEventListener('click', suppressEvent, true);\n                cancelEvent(e);\n            }, true);\n        }\n    }\n\n    /**\n     * consolidates mouse, touch, and Pointer events\n     * @param {MouseEvent|PointerEvent|TouchEvent} e The original event being fired\n     * @returns {MouseEvent|PointerEvent|Touch}\n     */\n    function unifyEvent(e) {\n        if (e.changedTouches !== undefined) {\n            return e.changedTouches[0];\n        }\n        return e;\n    }\n\n    /**\n     * method responsible for starting the long press timer\n     * @param {event} e - event object\n     * @returns {void}\n     */\n    function startLongPressTimer(e) {\n\n        clearLongPressTimer(e);\n\n        var el = e.target;\n\n        // get delay from html attribute if it exists, otherwise default to 1500\n        var longPressDelayInMs = parseInt(getNearestAttribute(el, 'data-long-press-delay', '1500'), 10); // default 1500\n\n        // start the timer\n        timer = requestTimeout(fireLongPressEvent.bind(el, e), longPressDelayInMs);\n    }\n\n    /**\n     * method responsible for clearing a pending long press timer\n     * @param {event} e - event object\n     * @returns {void}\n     */\n    function clearLongPressTimer(e) {\n        clearRequestTimeout(timer);\n        timer = null;\n    }\n\n    /**\n    * Cancels the current event\n    * @param {object} e - browser event object\n    * @returns {void}\n    */\n    function cancelEvent(e) {\n        e.stopImmediatePropagation();\n        e.preventDefault();\n        e.stopPropagation();\n    }\n\n    /**\n     * Starts the timer on mouse down and logs current position\n     * @param {object} e - browser event object\n     * @returns {void}\n     */\n    function mouseDownHandler(e) {\n        startX = e.clientX;\n        startY = e.clientY;\n        startLongPressTimer(e);\n    }\n\n    /**\n     * If the mouse moves n pixels during long-press, cancel the timer\n     * @param {object} e - browser event object\n     * @returns {void}\n     */\n    function mouseMoveHandler(e) {\n\n        // calculate total number of pixels the pointer has moved\n        var diffX = Math.abs(startX - e.clientX);\n        var diffY = Math.abs(startY - e.clientY);\n\n        // if pointer has moved more than allowed, cancel the long-press timer and therefore the event\n        if (diffX >= maxDiffX || diffY >= maxDiffY) {\n            clearLongPressTimer(e);\n        }\n    }\n\n    /**\n     * Gets attribute off HTML element or nearest parent\n     * @param {object} el - HTML element to retrieve attribute from\n     * @param {string} attributeName - name of the attribute\n     * @param {any} defaultValue - default value to return if no match found\n     * @returns {any} attribute value or defaultValue\n     */\n    function getNearestAttribute(el, attributeName, defaultValue) {\n\n        // walk up the dom tree looking for data-action and data-trigger\n        while (el && el !== document.documentElement) {\n\n            var attributeValue = el.getAttribute(attributeName);\n\n            if (attributeValue) {\n                return attributeValue;\n            }\n\n            el = el.parentNode;\n        }\n\n        return defaultValue;\n    }\n\n    // hook events that clear a pending long press event\n    document.addEventListener(mouseUp, clearLongPressTimer, true);\n    document.addEventListener(mouseLeave, clearLongPressTimer, true);\n    document.addEventListener(mouseMove, mouseMoveHandler, true);\n    document.addEventListener('wheel', clearLongPressTimer, true);\n    document.addEventListener('scroll', clearLongPressTimer, true);\n\n    // hook events that can trigger a long press event\n    document.addEventListener(mouseDown, mouseDownHandler, true); // <- start\n\n}(window, document));\n"],"names":["window","document","timer","hasPointerEvents","navigator","isTouch","MaxTouchPoints","msMaxTouchPoints","mouseDown","mouseUp","mouseMove","mouseLeave","startX","startY","maxDiffX","maxDiffY","CustomEvent","event","params","bubbles","cancelable","detail","undefined","evt","createEvent","initCustomEvent","prototype","Event","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","requestTimeout","fn","delay","mozCancelRequestAnimationFrame","start","Date","getTime","handle","loop","current","delta","call","value","clearRequestTimeout","cancelAnimationFrame","webkitCancelAnimationFrame","webkitCancelRequestAnimationFrame","oCancelRequestAnimationFrame","msCancelRequestAnimationFrame","clearTimeout","fireLongPressEvent","originalEvent","clearLongPressTimer","unifyEvent","allowClickEvent","dispatchEvent","clientX","clientY","offsetX","offsetY","pageX","pageY","screenX","screenY","addEventListener","suppressEvent","e","removeEventListener","cancelEvent","changedTouches","startLongPressTimer","el","target","longPressDelayInMs","parseInt","getNearestAttribute","bind","stopImmediatePropagation","preventDefault","stopPropagation","mouseDownHandler","mouseMoveHandler","diffX","Math","abs","diffY","attributeName","defaultValue","documentElement","attributeValue","getAttribute","parentNode"],"mappings":"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","x_google_ignoreList":[0]}
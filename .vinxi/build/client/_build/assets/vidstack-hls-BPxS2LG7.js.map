{"version":3,"file":"vidstack-hls-BPxS2LG7.js","sources":["../../../../../node_modules/.pnpm/vidstack@1.11.13/node_modules/vidstack/prod/providers/vidstack-hls.js"],"sourcesContent":["import { l as loadScript, p as preconnect } from '../chunks/vidstack-BhcIzQoA.js';\nimport { I as IS_CHROME, s as isHLSSupported } from '../chunks/vidstack-BupzoABp.js';\nimport { VideoProvider } from './vidstack-video.js';\nimport { p as peek, l as listenEvent, g as effect, D as DOMEvent, i as isString, S as camelToKebabCase, h as isUndefined, x as isFunction } from '../chunks/vidstack-CSyVEdLV.js';\nimport { Q as QualitySymbol } from '../chunks/vidstack-B3EgHpRH.js';\nimport { T as TextTrack, a as TextTrackSymbol } from '../chunks/vidstack-CqXkSIjG.js';\nimport { L as ListSymbol } from '../chunks/vidstack-CerDQCFL.js';\nimport { R as RAFLoop } from '../chunks/vidstack-CpkvFYuN.js';\nimport { c as coerceToError } from '../chunks/vidstack-DM_McBs5.js';\nimport './vidstack-html.js';\nimport '../chunks/vidstack-ksPACRiU.js';\nimport '../chunks/vidstack-BJhWhebu.js';\n\nconst toDOMEventType = (type) => camelToKebabCase(type);\nclass HLSController {\n  constructor(_video, _ctx) {\n    this.m = _video;\n    this.b = _ctx;\n    this.g = null;\n    this.nd = null;\n    this.od = {};\n    this.pd = /* @__PURE__ */ new Set();\n    this.yk = -1;\n  }\n  get instance() {\n    return this.g;\n  }\n  setup(ctor) {\n    const { streamType } = this.b.$state;\n    const isLive = peek(streamType).includes(\"live\"), isLiveLowLatency = peek(streamType).includes(\"ll-\");\n    this.g = new ctor({\n      lowLatencyMode: isLiveLowLatency,\n      backBufferLength: isLiveLowLatency ? 4 : isLive ? 8 : void 0,\n      renderTextTracksNatively: false,\n      ...this.od\n    });\n    const dispatcher = this.Sg.bind(this);\n    for (const event of Object.values(ctor.Events))\n      this.g.on(event, dispatcher);\n    this.g.on(ctor.Events.ERROR, this.U.bind(this));\n    for (const callback of this.pd)\n      callback(this.g);\n    this.b.player.dispatch(\"hls-instance\", {\n      detail: this.g\n    });\n    this.g.attachMedia(this.m);\n    this.g.on(ctor.Events.FRAG_LOADING, this.Bk.bind(this));\n    this.g.on(ctor.Events.AUDIO_TRACK_SWITCHED, this.Tg.bind(this));\n    this.g.on(ctor.Events.LEVEL_SWITCHED, this.Ug.bind(this));\n    this.g.on(ctor.Events.LEVEL_LOADED, this.Vg.bind(this));\n    this.g.on(ctor.Events.NON_NATIVE_TEXT_TRACKS_FOUND, this.Wg.bind(this));\n    this.g.on(ctor.Events.CUES_PARSED, this.Xg.bind(this));\n    this.b.qualities[QualitySymbol.Za] = this.Yg.bind(this);\n    listenEvent(this.b.qualities, \"change\", this.Yo.bind(this));\n    listenEvent(this.b.audioTracks, \"change\", this.Zo.bind(this));\n    this.nd = effect(this._g.bind(this));\n  }\n  Wo(type, data) {\n    return new DOMEvent(toDOMEventType(type), { detail: data });\n  }\n  _g() {\n    if (!this.b.$state.live())\n      return;\n    const raf = new RAFLoop(this.$g.bind(this));\n    raf.Bb();\n    return raf.ra.bind(raf);\n  }\n  $g() {\n    this.b.$state.liveSyncPosition.set(this.g?.liveSyncPosition ?? Infinity);\n  }\n  Sg(type, data) {\n    this.b.player?.dispatch(this.Wo(type, data));\n  }\n  Wg(eventType, data) {\n    const event = this.Wo(eventType, data);\n    let currentTrack = -1;\n    for (let i = 0; i < data.tracks.length; i++) {\n      const nonNativeTrack = data.tracks[i], init = nonNativeTrack.subtitleTrack ?? nonNativeTrack.closedCaptions, track = new TextTrack({\n        id: `hls-${nonNativeTrack.kind}-${i}`,\n        src: init?.url,\n        label: nonNativeTrack.label,\n        language: init?.lang,\n        kind: nonNativeTrack.kind,\n        default: nonNativeTrack.default\n      });\n      track[TextTrackSymbol.M] = 2;\n      track[TextTrackSymbol.Ua] = () => {\n        if (track.mode === \"showing\") {\n          this.g.subtitleTrack = i;\n          currentTrack = i;\n        } else if (currentTrack === i) {\n          this.g.subtitleTrack = -1;\n          currentTrack = -1;\n        }\n      };\n      this.b.textTracks.add(track, event);\n    }\n  }\n  Xg(eventType, data) {\n    const index = this.g?.subtitleTrack, track = this.b.textTracks.getById(`hls-${data.type}-${index}`);\n    if (!track)\n      return;\n    const event = this.Wo(eventType, data);\n    for (const cue of data.cues) {\n      cue.positionAlign = \"auto\";\n      track.addCue(cue, event);\n    }\n  }\n  Tg(eventType, data) {\n    const track = this.b.audioTracks[data.id];\n    if (track) {\n      const trigger = this.Wo(eventType, data);\n      this.b.audioTracks[ListSymbol.pa](track, true, trigger);\n    }\n  }\n  Ug(eventType, data) {\n    const quality = this.b.qualities[data.level];\n    if (quality) {\n      const trigger = this.Wo(eventType, data);\n      this.b.qualities[ListSymbol.pa](quality, true, trigger);\n    }\n  }\n  Vg(eventType, data) {\n    if (this.b.$state.canPlay())\n      return;\n    const { type, live, totalduration: duration, targetduration } = data.details, trigger = this.Wo(eventType, data);\n    this.b.delegate.c(\n      \"stream-type-change\",\n      live ? type === \"EVENT\" && Number.isFinite(duration) && targetduration >= 10 ? \"live:dvr\" : \"live\" : \"on-demand\",\n      trigger\n    );\n    this.b.delegate.c(\"duration-change\", duration, trigger);\n    const media = this.g.media;\n    if (this.g.currentLevel === -1) {\n      this.b.qualities[QualitySymbol.Ya](true, trigger);\n    }\n    for (const remoteTrack of this.g.audioTracks) {\n      const localTrack = {\n        id: remoteTrack.id.toString(),\n        label: remoteTrack.name,\n        language: remoteTrack.lang || \"\",\n        kind: \"main\"\n      };\n      this.b.audioTracks[ListSymbol.oa](localTrack, trigger);\n    }\n    for (const level of this.g.levels) {\n      const videoQuality = {\n        id: level.id?.toString() ?? level.height + \"p\",\n        width: level.width,\n        height: level.height,\n        codec: level.codecSet,\n        bitrate: level.bitrate\n      };\n      this.b.qualities[ListSymbol.oa](videoQuality, trigger);\n    }\n    media.dispatchEvent(new DOMEvent(\"canplay\", { trigger }));\n  }\n  U(eventType, data) {\n    if (data.fatal) {\n      switch (data.type) {\n        case \"networkError\":\n          this.Ck(data.error);\n          break;\n        case \"mediaError\":\n          this.g?.recoverMediaError();\n          break;\n        default:\n          this.Ak(data.error);\n          break;\n      }\n    }\n  }\n  Bk() {\n    if (this.yk >= 0)\n      this.zk();\n  }\n  Ck(error) {\n    this.zk();\n    this.g?.startLoad();\n    this.yk = window.setTimeout(() => {\n      this.yk = -1;\n      this.Ak(error);\n    }, 5e3);\n  }\n  zk() {\n    clearTimeout(this.yk);\n    this.yk = -1;\n  }\n  Ak(error) {\n    this.b.delegate.c(\"error\", {\n      message: error.message,\n      code: 1,\n      error\n    });\n  }\n  Yg() {\n    if (this.g)\n      this.g.currentLevel = -1;\n  }\n  Yo() {\n    const { qualities } = this.b;\n    if (!this.g || qualities.auto)\n      return;\n    this.g[qualities.switch + \"Level\"] = qualities.selectedIndex;\n    if (IS_CHROME) {\n      this.m.currentTime = this.m.currentTime;\n    }\n  }\n  Zo() {\n    const { audioTracks } = this.b;\n    if (this.g && this.g.audioTrack !== audioTracks.selectedIndex) {\n      this.g.audioTrack = audioTracks.selectedIndex;\n    }\n  }\n  Dk(src) {\n    this.zk();\n    if (!isString(src.src))\n      return;\n    this.g?.loadSource(src.src);\n  }\n  ah() {\n    this.zk();\n    this.g?.destroy();\n    this.g = null;\n    this.nd?.();\n    this.nd = null;\n  }\n}\n\nclass HLSLibLoader {\n  constructor(_lib, _ctx, _callback) {\n    this.W = _lib;\n    this.b = _ctx;\n    this.Ca = _callback;\n    this.bh();\n  }\n  async bh() {\n    const callbacks = {\n      onLoadStart: this.Ea.bind(this),\n      onLoaded: this.qd.bind(this),\n      onLoadError: this.ch.bind(this)\n    };\n    let ctor = await loadHLSScript(this.W, callbacks);\n    if (isUndefined(ctor) && !isString(this.W))\n      ctor = await importHLS(this.W, callbacks);\n    if (!ctor)\n      return null;\n    if (!ctor.isSupported()) {\n      const message = \"[vidstack] `hls.js` is not supported in this environment\";\n      this.b.player.dispatch(new DOMEvent(\"hls-unsupported\"));\n      this.b.delegate.c(\"error\", { message, code: 4 });\n      return null;\n    }\n    return ctor;\n  }\n  Ea() {\n    this.b.player.dispatch(new DOMEvent(\"hls-lib-load-start\"));\n  }\n  qd(ctor) {\n    this.b.player.dispatch(\n      new DOMEvent(\"hls-lib-loaded\", {\n        detail: ctor\n      })\n    );\n    this.Ca(ctor);\n  }\n  ch(e) {\n    const error = coerceToError(e);\n    this.b.player.dispatch(\n      new DOMEvent(\"hls-lib-load-error\", {\n        detail: error\n      })\n    );\n    this.b.delegate.c(\"error\", {\n      message: error.message,\n      code: 4,\n      error\n    });\n  }\n}\nasync function importHLS(loader, callbacks = {}) {\n  if (isUndefined(loader))\n    return void 0;\n  callbacks.onLoadStart?.();\n  if (loader.prototype && loader.prototype !== Function) {\n    callbacks.onLoaded?.(loader);\n    return loader;\n  }\n  try {\n    const ctor = (await loader())?.default;\n    if (ctor && !!ctor.isSupported) {\n      callbacks.onLoaded?.(ctor);\n    } else {\n      throw Error(\n        false ? \"[vidstack] failed importing `hls.js`. Dynamic import returned invalid constructor.\" : \"\"\n      );\n    }\n    return ctor;\n  } catch (err) {\n    callbacks.onLoadError?.(err);\n  }\n  return void 0;\n}\nasync function loadHLSScript(src, callbacks = {}) {\n  if (!isString(src))\n    return void 0;\n  callbacks.onLoadStart?.();\n  try {\n    await loadScript(src);\n    if (!isFunction(window.Hls)) {\n      throw Error(\n        false ? \"[vidstack] failed loading `hls.js`. Could not find a valid `Hls` constructor on window\" : \"\"\n      );\n    }\n    const ctor = window.Hls;\n    callbacks.onLoaded?.(ctor);\n    return ctor;\n  } catch (err) {\n    callbacks.onLoadError?.(err);\n  }\n  return void 0;\n}\n\nconst JS_DELIVR_CDN = \"https://cdn.jsdelivr.net\";\nclass HLSProvider extends VideoProvider {\n  constructor() {\n    super(...arguments);\n    this.$$PROVIDER_TYPE = \"HLS\";\n    this.Xe = null;\n    this.d = new HLSController(this.video, this.b);\n    this.Gb = `${JS_DELIVR_CDN}/npm/hls.js@^1.5.0/dist/hls${\".min.js\"}`;\n  }\n  /**\n   * The `hls.js` constructor.\n   */\n  get ctor() {\n    return this.Xe;\n  }\n  /**\n   * The current `hls.js` instance.\n   */\n  get instance() {\n    return this.d.instance;\n  }\n  static {\n    /**\n     * Whether `hls.js` is supported in this environment.\n     */\n    this.supported = isHLSSupported();\n  }\n  get type() {\n    return \"hls\";\n  }\n  get canLiveSync() {\n    return true;\n  }\n  /**\n   * The `hls.js` configuration object.\n   *\n   * @see {@link https://github.com/video-dev/hls.js/blob/master/docs/API.md#fine-tuning}\n   */\n  get config() {\n    return this.d.od;\n  }\n  set config(config) {\n    this.d.od = config;\n  }\n  /**\n   * The `hls.js` constructor (supports dynamic imports) or a URL of where it can be found.\n   *\n   * @defaultValue `https://cdn.jsdelivr.net/npm/hls.js@^1.0.0/dist/hls.min.js`\n   */\n  get library() {\n    return this.Gb;\n  }\n  set library(library) {\n    this.Gb = library;\n  }\n  preconnect() {\n    if (!isString(this.Gb))\n      return;\n    preconnect(this.Gb);\n  }\n  setup() {\n    super.setup();\n    new HLSLibLoader(this.Gb, this.b, (ctor) => {\n      this.Xe = ctor;\n      this.d.setup(ctor);\n      this.b.delegate.c(\"provider-setup\", this);\n      const src = peek(this.b.$state.source);\n      if (src)\n        this.loadSource(src);\n    });\n  }\n  async loadSource(src, preload) {\n    if (!isString(src.src)) {\n      this.Bn();\n      return;\n    }\n    this.a.preload = preload || \"\";\n    this.yn(src, \"application/x-mpegurl\");\n    this.d.Dk(src);\n    this.V = src;\n  }\n  /**\n   * The given callback is invoked when a new `hls.js` instance is created and right before it's\n   * attached to media.\n   */\n  onInstance(callback) {\n    const instance = this.d.instance;\n    if (instance)\n      callback(instance);\n    this.d.pd.add(callback);\n    return () => this.d.pd.delete(callback);\n  }\n  destroy() {\n    this.d.ah();\n  }\n}\n\nexport { HLSProvider };\n"],"names":["toDOMEventType","type","camelToKebabCase","HLSController","constructor","_video","_ctx","m","b","g","nd","od","pd","Set","yk","instance","setup","ctor","streamType","$state","isLive","peek","includes","isLiveLowLatency","lowLatencyMode","backBufferLength","renderTextTracksNatively","dispatcher","Sg","bind","event","Object","values","Events","on","ERROR","U","callback","player","dispatch","detail","attachMedia","FRAG_LOADING","Bk","AUDIO_TRACK_SWITCHED","Tg","LEVEL_SWITCHED","Ug","LEVEL_LOADED","Vg","NON_NATIVE_TEXT_TRACKS_FOUND","Wg","CUES_PARSED","Xg","qualities","QualitySymbol","Za","Yg","listenEvent","Yo","audioTracks","Zo","effect","_g","Wo","data","DOMEvent","live","raf","RAFLoop","$g","Bb","ra","liveSyncPosition","set","Infinity","eventType","currentTrack","i","tracks","length","nonNativeTrack","init","subtitleTrack","closedCaptions","track","TextTrack","id","kind","src","url","label","language","lang","default","TextTrackSymbol","M","Ua","mode","textTracks","add","index","getById","cue","cues","positionAlign","addCue","trigger","ListSymbol","pa","quality","level","canPlay","totalduration","duration","targetduration","details","delegate","c","Number","isFinite","media","currentLevel","Ya","remoteTrack","localTrack","toString","name","oa","levels","videoQuality","height","width","codec","codecSet","bitrate","dispatchEvent","fatal","Ck","error","recoverMediaError","Ak","zk","startLoad","window","setTimeout","clearTimeout","message","code","auto","switch","selectedIndex","IS_CHROME","currentTime","audioTrack","Dk","isString","loadSource","ah","destroy","HLSLibLoader","_lib","_callback","W","Ca","bh","callbacks","onLoadStart","Ea","onLoaded","qd","onLoadError","ch","loadHLSScript","isUndefined","importHLS","isSupported","e","coerceToError","loader","prototype","Function","Error","err","loadScript","isFunction","Hls","JS_DELIVR_CDN","HLSProvider","VideoProvider","arguments","$$PROVIDER_TYPE","Xe","d","video","Gb","supported","isHLSSupported","canLiveSync","config","library","preconnect","source","preload","Bn","a","yn","V","onInstance","delete"],"mappings":"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","x_google_ignoreList":[0]}
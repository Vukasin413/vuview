import{j as W,r as _,w,e as h,K as b,S,L as k,W as p,x as $,l as T,y}from"./routing-BmD2xUmi.js";import{_ as x}from"./syncStore-BssUQgBy.js";import"./Link-Dg-h0Eyu.js";import"./components-BMGKah2q.js";import"./index-BnPmuIsI.js";import"./index-DPECAXpK.js";import"./index-Cb4tY8hP.js";function N(i={}){const{immediate:g=!1,onNeedRefresh:l,onOfflineReady:a,onRegistered:u,onRegisteredSW:d,onRegisterError:r}=i;let t,s,c;const o=async(m=!0)=>{await s,await c?.()};async function R(){if("serviceWorker"in navigator){const{Workbox:m}=await x(()=>import("./workbox-window.prod.es5-DFjpnwFp.js"),[]);t=new m("/claims-sw.js",{scope:"/",type:"classic"}),c=async()=>{await t?.messageSkipWaiting()};{let e=!1;const f=()=>{e=!0,t?.addEventListener("controlling",n=>{n.isUpdate&&window.location.reload()}),l?.()};t.addEventListener("installed",n=>{typeof n.isUpdate>"u"?typeof n.isExternal<"u"?n.isExternal?f():!e&&a?.():n.isExternal?window.location.reload():!e&&a?.():n.isUpdate||a?.()}),t.addEventListener("waiting",f),t.addEventListener("externalwaiting",f)}t.register({immediate:g}).then(e=>{d?d("/claims-sw.js",e):u?.(e)}).catch(e=>{r?.(e)})}}return s=R(),o}function C(i={}){const{immediate:g=!0,onNeedRefresh:l,onOfflineReady:a,onRegistered:u,onRegisteredSW:d,onRegisterError:r}=i,[t,s]=W(!1),[c,o]=W(!1),R=N({immediate:g,onOfflineReady(){o(!0),a?.()},onNeedRefresh(){s(!0),l?.()},onRegistered:u,onRegisteredSW:d,onRegisterError:r});return{needRefresh:[t,s],offlineReady:[c,o],updateServiceWorker:R}}const L="_Container_18by0_1",M="_Toast_18by0_7",O="_ToastMessage_18by0_21",P="_ToastButton_18by0_24",v={Container:L,Toast:M,ToastMessage:O,ToastButton:P};var B=y("<span>App ready to work offline"),j=y("<button>Reload"),U=y("<div><div></div><!$><!/><button>Close"),A=y("<div>"),D=y("<span>New content available, click on reload button to update.");const G=()=>{const{needRefresh:[i,g],offlineReady:[l,a],updateServiceWorker:u}=C({immediate:!0,onRegisteredSW(r,t){console.log(`Service Worker at: ${r}`),console.dir(t)},onRegisterError(r){console.trace("SW registration error",r)}}),d=()=>{a(!1),g(!1)};return(()=>{var r=_(A);return w(r,h(S,{get when(){return l()||i()},get children(){var t=_(U),s=t.firstChild,c=s.nextSibling,[o,R]=b(c.nextSibling),m=o.nextSibling;return w(s,h(S,{get fallback(){return _(D)},get when(){return l()},get children(){return _(B)}})),w(t,h(S,{get when(){return i()},get children(){var e=_(j);return e.$$click=()=>u(!0),k(()=>p(e,v.ToastButton)),$(),e}}),o,R),m.$$click=()=>d(),k(e=>{var f=v.Toast,n=v.Message,E=v.ToastButton;return f!==e.e&&p(t,e.e=f),n!==e.t&&p(s,e.t=n),E!==e.a&&p(m,e.a=E),e},{e:void 0,t:void 0,a:void 0}),$(),t}})),k(()=>p(r,v.Container)),r})()};T(["click"]);export{G as default};
//# sourceMappingURL=ReloadPrompt-CpIWBecP.js.map

import{a6 as g,a0 as L,a8 as T,a4 as p,j as N,D as q,B,e as E,H as X,A as Y}from"./routing-BmD2xUmi.js";import{A as G}from"./components-BMGKah2q.js";const R=Symbol("store-raw"),$=Symbol("store-node"),w=Symbol("store-has"),F=Symbol("store-self");function H(e){let n=e[g];if(!n&&(Object.defineProperty(e,g,{value:n=new Proxy(e,Z)}),!Array.isArray(e))){const r=Object.keys(e),i=Object.getOwnPropertyDescriptors(e);for(let o=0,s=r.length;o<s;o++){const l=r[o];i[l].get&&Object.defineProperty(e,l,{enumerable:i[l].enumerable,get:i[l].get.bind(n)})}}return n}function y(e){let n;return e!=null&&typeof e=="object"&&(e[g]||!(n=Object.getPrototypeOf(e))||n===Object.prototype||Array.isArray(e))}function P(e,n=new Set){let r,i,o,s;if(r=e!=null&&e[R])return r;if(!y(e)||n.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):n.add(e);for(let l=0,f=e.length;l<f;l++)o=e[l],(i=P(o,n))!==o&&(e[l]=i)}else{Object.isFrozen(e)?e=Object.assign({},e):n.add(e);const l=Object.keys(e),f=Object.getOwnPropertyDescriptors(e);for(let u=0,c=l.length;u<c;u++)s=l[u],!f[s].get&&(o=e[s],(i=P(o,n))!==o&&(e[s]=i))}return e}function v(e,n){let r=e[n];return r||Object.defineProperty(e,n,{value:r=Object.create(null)}),r}function D(e,n,r){if(e[n])return e[n];const[i,o]=N(r,{equals:!1,internal:!0});return i.$=o,e[n]=i}function J(e,n){const r=Reflect.getOwnPropertyDescriptor(e,n);return!r||r.get||!r.configurable||n===g||n===$||(delete r.value,delete r.writable,r.get=()=>e[g][n]),r}function M(e){T()&&D(v(e,$),F)()}function Q(e){return M(e),Reflect.ownKeys(e)}const Z={get(e,n,r){if(n===R)return e;if(n===g)return r;if(n===L)return M(e),r;const i=v(e,$),o=i[n];let s=o?o():e[n];if(n===$||n===w||n==="__proto__")return s;if(!o){const l=Object.getOwnPropertyDescriptor(e,n);T()&&(typeof s!="function"||e.hasOwnProperty(n))&&!(l&&l.get)&&(s=D(i,n,s)())}return y(s)?H(s):s},has(e,n){return n===R||n===g||n===L||n===$||n===w||n==="__proto__"?!0:(T()&&D(v(e,w),n)(),n in e)},set(){return!0},deleteProperty(){return!0},ownKeys:Q,getOwnPropertyDescriptor:J};function a(e,n,r,i=!1){if(!i&&e[n]===r)return;const o=e[n],s=e.length;r===void 0?(delete e[n],e[w]&&e[w][n]&&o!==void 0&&e[w][n].$()):(e[n]=r,e[w]&&e[w][n]&&o===void 0&&e[w][n].$());let l=v(e,$),f;if((f=D(l,n,o))&&f.$(()=>r),Array.isArray(e)&&e.length!==s){for(let u=e.length;u<s;u++)(f=l[u])&&f.$();(f=D(l,"length",s))&&f.$(e.length)}(f=l[F])&&f.$()}function U(e,n){const r=Object.keys(n);for(let i=0;i<r.length;i+=1){const o=r[i];a(e,o,n[o])}}function m(e,n){if(typeof n=="function"&&(n=n(e)),n=P(n),Array.isArray(n)){if(e===n)return;let r=0,i=n.length;for(;r<i;r++){const o=n[r];e[r]!==o&&a(e,r,o)}a(e,"length",i)}else U(e,n)}function C(e,n,r=[]){let i,o=e;if(n.length>1){i=n.shift();const l=typeof i,f=Array.isArray(e);if(Array.isArray(i)){for(let u=0;u<i.length;u++)C(e,[i[u]].concat(n),r);return}else if(f&&l==="function"){for(let u=0;u<e.length;u++)i(e[u],u)&&C(e,[u].concat(n),r);return}else if(f&&l==="object"){const{from:u=0,to:c=e.length-1,by:t=1}=i;for(let d=u;d<=c;d+=t)C(e,[d].concat(n),r);return}else if(n.length>1){C(e[i],n,[i].concat(r));return}o=e[i],r=[i].concat(r)}let s=n[0];typeof s=="function"&&(s=s(o,r),s===o)||i===void 0&&s==null||(s=P(s),i===void 0||y(o)&&y(s)&&!Array.isArray(s)?U(o,s):a(e,i,s))}function k(...[e,n]){const r=P(e||{}),i=Array.isArray(r),o=H(r);function s(...l){p(()=>{i&&l.length===1?m(r,l[0]):C(r,l)})}return[o,s]}const x=Symbol("store-root");function S(e,n,r,i,o){const s=n[r];if(e===s)return;const l=Array.isArray(e);if(r!==x&&(!y(e)||!y(s)||l!==Array.isArray(s)||o&&e[o]!==s[o])){a(n,r,e);return}if(l){if(e.length&&s.length&&(!i||o&&e[0]&&e[0][o]!=null)){let c,t,d,h,A,b,K,O;for(d=0,h=Math.min(s.length,e.length);d<h&&(s[d]===e[d]||o&&s[d]&&e[d]&&s[d][o]===e[d][o]);d++)S(e[d],s,d,i,o);const j=new Array(e.length),_=new Map;for(h=s.length-1,A=e.length-1;h>=d&&A>=d&&(s[h]===e[A]||o&&s[d]&&e[d]&&s[h][o]===e[A][o]);h--,A--)j[A]=s[h];if(d>A||d>h){for(t=d;t<=A;t++)a(s,t,e[t]);for(;t<e.length;t++)a(s,t,j[t]),S(e[t],s,t,i,o);s.length>e.length&&a(s,"length",e.length);return}for(K=new Array(A+1),t=A;t>=d;t--)b=e[t],O=o&&b?b[o]:b,c=_.get(O),K[t]=c===void 0?-1:c,_.set(O,t);for(c=d;c<=h;c++)b=s[c],O=o&&b?b[o]:b,t=_.get(O),t!==void 0&&t!==-1&&(j[t]=s[c],t=K[t],_.set(O,t));for(t=d;t<e.length;t++)t in j?(a(s,t,j[t]),S(e[t],s,t,i,o)):a(s,t,e[t])}else for(let c=0,t=e.length;c<t;c++)S(e[c],s,c,i,o);s.length>e.length&&a(s,"length",e.length);return}const f=Object.keys(e);for(let c=0,t=f.length;c<t;c++)S(e[f[c]],s,f[c],i,o);const u=Object.keys(s);for(let c=0,t=u.length;c<t;c++)e[u[c]]===void 0&&a(s,u[c],void 0)}function se(e,n={}){const{merge:r,key:i="id"}=n,o=P(e);return s=>{if(!y(s)||!y(o))return o;const l=S(o,{[x]:s},x,r,i);return l===void 0?s:l}}const I=new WeakMap,W={get(e,n){if(n===R)return e;const r=e[n];let i;return y(r)?I.get(r)||(I.set(r,i=new Proxy(r,W)),i):r},set(e,n,r){return a(e,n,P(r)),!0},deleteProperty(e,n){return a(e,n,void 0,!0),!0}};function oe(e){return n=>{if(y(n)){let r;(r=I.get(n))||I.set(n,r=new Proxy(n,W)),e(r)}return n}}const z=k({loading:!1,touchInProgress:!1,sync:{providers:{idb:"disconnected",webrtc:"disconnected",opfs:"disconnected"},syncing:!1,lastSync:0,userId:0,users:[]},player:{small:!1,dismissed:!1,lastVideoUrl:""}}),V=B(z),ie=e=>E(V.Provider,{value:z,get children(){return e.children}}),ee=()=>q(V);function te(e){const[n]=X(),[r,i]=N(e.href),[o,s]=ee();return Y(()=>{const l=n.fullscreen==="true";try{const f=new URL(`${window.location.origin}${e.href}`);l?f.searchParams.set("fullscreen","true"):f.searchParams.delete("fullscreen");const u=f.pathname;i(`${u}${f.search}${f.hash}`)}catch(f){console.error(f,e.href)}}),E(G,{onClick:l=>{o.touchInProgress&&(l.preventDefault(),l.stopPropagation(),setTimeout(()=>{s("touchInProgress",!1)},100))},get href(){return r()},get class(){return e.class},get style(){return e.style},get activeClass(){return e.activeClass},get inactiveClass(){return e.inactiveClass},get children(){return e.children}})}export{ie as A,te as L,k as c,oe as p,se as r,ee as u};
//# sourceMappingURL=Link-Dg-h0Eyu.js.map

{"version":3,"mappings":"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","names":["FORMAT_START_RE","STYLE_START_RE","DIALOGUE_START_RE","FORMAT_SPLIT_RE","STYLE_FUNCTION_RE","NEW_LINE_RE","STYLES_SECTION_START_RE","EVENTS_SECTION_START_RE","SSAParser","f","P","a","j","k","O","d","Q","init","errors","ParseErrorBuilder","parse","line","lineCount","test","styles","replace","split","T","e","N","R","dialogue","cue","U","text","done","metadata","cues","regions","push","onCue","values","name","outlineX","align","vertical","marginV","outlineY","outlineColor","bgColor","borderStyle","transform","i","length","field","value","color","parseColor","parseInt","_outlineColor","parseFloat","alignment","S","buildTextShadow","filter","Boolean","join","fields","V","timestamp","o","Start","End","VTTCue","Style","voice","Name","marginLeft","MarginL","marginRight","MarginR","MarginV","slice","Object","keys","style","startTimeText","endTimeText","startTime","parseVTTTimestamp","endTime","q","r","s","error","strict","cancel","onError","abgr","alpha","b","g","x","y","noOfShadows","Math","ceil","PI","textShadow","theta","cos","sin","createSSAParser"],"ignoreList":[0],"sources":["../../../../../node_modules/.pnpm/media-captions@1.0.3/node_modules/media-captions/dist/prod/ssa-parser.js"],"sourcesContent":["import { b as VTTCue, p as parseVTTTimestamp } from './index.js';\n\nconst FORMAT_START_RE = /^Format:[\\s\\t]*/, STYLE_START_RE = /^Style:[\\s\\t]*/, DIALOGUE_START_RE = /^Dialogue:[\\s\\t]*/, FORMAT_SPLIT_RE = /[\\s\\t]*,[\\s\\t]*/, STYLE_FUNCTION_RE = /\\{[^}]+\\}/g, NEW_LINE_RE = /\\\\N/g, STYLES_SECTION_START_RE = /^\\[(.*)[\\s\\t]?Styles\\]$/, EVENTS_SECTION_START_RE = /^\\[(.*)[\\s\\t]?Events\\]$/;\nclass SSAParser {\n  f;\n  P = 0;\n  a = null;\n  j = [];\n  k = [];\n  O = null;\n  d;\n  Q = {};\n  async init(init) {\n    this.f = init;\n    if (init.errors)\n      this.d = (await import('./errors.js')).ParseErrorBuilder;\n  }\n  parse(line, lineCount) {\n    if (this.P) {\n      switch (this.P) {\n        case 1:\n          if (line === \"\") {\n            this.P = 0;\n          } else if (STYLE_START_RE.test(line)) {\n            if (this.O) {\n              const styles = line.replace(STYLE_START_RE, \"\").split(FORMAT_SPLIT_RE);\n              this.T(styles);\n            } else {\n              this.e(this.d?.N(\"Style\", lineCount));\n            }\n          } else if (FORMAT_START_RE.test(line)) {\n            this.O = line.replace(FORMAT_START_RE, \"\").split(FORMAT_SPLIT_RE);\n          } else if (EVENTS_SECTION_START_RE.test(line)) {\n            this.O = null;\n            this.P = 2;\n          }\n          break;\n        case 2:\n          if (line === \"\") {\n            this.R();\n          } else if (DIALOGUE_START_RE.test(line)) {\n            this.R();\n            if (this.O) {\n              const dialogue = line.replace(DIALOGUE_START_RE, \"\").split(FORMAT_SPLIT_RE), cue = this.U(dialogue, lineCount);\n              if (cue)\n                this.a = cue;\n            } else {\n              this.e(this.d?.N(\"Dialogue\", lineCount));\n            }\n          } else if (this.a) {\n            this.a.text += \"\\n\" + line.replace(STYLE_FUNCTION_RE, \"\").replace(NEW_LINE_RE, \"\\n\");\n          } else if (FORMAT_START_RE.test(line)) {\n            this.O = line.replace(FORMAT_START_RE, \"\").split(FORMAT_SPLIT_RE);\n          } else if (STYLES_SECTION_START_RE.test(line)) {\n            this.O = null;\n            this.P = 1;\n          } else if (EVENTS_SECTION_START_RE.test(line)) {\n            this.O = null;\n          }\n      }\n    } else if (line === \"\") ; else if (STYLES_SECTION_START_RE.test(line)) {\n      this.O = null;\n      this.P = 1;\n    } else if (EVENTS_SECTION_START_RE.test(line)) {\n      this.O = null;\n      this.P = 2;\n    }\n  }\n  done() {\n    return {\n      metadata: {},\n      cues: this.j,\n      regions: [],\n      errors: this.k\n    };\n  }\n  R() {\n    if (!this.a)\n      return;\n    this.j.push(this.a);\n    this.f.onCue?.(this.a);\n    this.a = null;\n  }\n  T(values) {\n    let name = \"Default\", styles = {}, outlineX, align = \"center\", vertical = \"bottom\", marginV, outlineY = 1.2, outlineColor, bgColor, borderStyle = 3, transform = [];\n    for (let i = 0; i < this.O.length; i++) {\n      const field = this.O[i], value = values[i];\n      switch (field) {\n        case \"Name\":\n          name = value;\n          break;\n        case \"Fontname\":\n          styles[\"font-family\"] = value;\n          break;\n        case \"Fontsize\":\n          styles[\"font-size\"] = `calc(${value} / var(--overlay-height))`;\n          break;\n        case \"PrimaryColour\":\n          const color = parseColor(value);\n          if (color)\n            styles[\"--cue-color\"] = color;\n          break;\n        case \"BorderStyle\":\n          borderStyle = parseInt(value, 10);\n          break;\n        case \"BackColour\":\n          bgColor = parseColor(value);\n          break;\n        case \"OutlineColour\":\n          const _outlineColor = parseColor(value);\n          if (_outlineColor)\n            outlineColor = _outlineColor;\n          break;\n        case \"Bold\":\n          if (parseInt(value))\n            styles[\"font-weight\"] = \"bold\";\n          break;\n        case \"Italic\":\n          if (parseInt(value))\n            styles[\"font-style\"] = \"italic\";\n          break;\n        case \"Underline\":\n          if (parseInt(value))\n            styles[\"text-decoration\"] = \"underline\";\n          break;\n        case \"StrikeOut\":\n          if (parseInt(value))\n            styles[\"text-decoration\"] = \"line-through\";\n          break;\n        case \"Spacing\":\n          styles[\"letter-spacing\"] = value + \"px\";\n          break;\n        case \"AlphaLevel\":\n          styles[\"opacity\"] = parseFloat(value);\n          break;\n        case \"ScaleX\":\n          transform.push(`scaleX(${parseFloat(value) / 100})`);\n          break;\n        case \"ScaleY\":\n          transform.push(`scaleY(${parseFloat(value) / 100})`);\n          break;\n        case \"Angle\":\n          transform.push(`rotate(${value}deg)`);\n          break;\n        case \"Shadow\":\n          outlineY = parseInt(value, 10) * 1.2;\n          break;\n        case \"MarginL\":\n          styles[\"--cue-width\"] = \"auto\";\n          styles[\"--cue-left\"] = parseFloat(value) + \"px\";\n          break;\n        case \"MarginR\":\n          styles[\"--cue-width\"] = \"auto\";\n          styles[\"--cue-right\"] = parseFloat(value) + \"px\";\n          break;\n        case \"MarginV\":\n          marginV = parseFloat(value);\n          break;\n        case \"Outline\":\n          outlineX = parseInt(value, 10);\n          break;\n        case \"Alignment\":\n          const alignment = parseInt(value, 10);\n          if (alignment >= 4)\n            vertical = alignment >= 7 ? \"top\" : \"center\";\n          switch (alignment % 3) {\n            case 1:\n              align = \"start\";\n              break;\n            case 2:\n              align = \"center\";\n              break;\n            case 3:\n              align = \"end\";\n              break;\n          }\n      }\n    }\n    styles.S = vertical;\n    styles[\"--cue-white-space\"] = \"normal\";\n    styles[\"--cue-line-height\"] = \"normal\";\n    styles[\"--cue-text-align\"] = align;\n    if (vertical === \"center\") {\n      styles[`--cue-top`] = \"50%\";\n      transform.push(\"translateY(-50%)\");\n    } else {\n      styles[`--cue-${vertical}`] = (marginV || 0) + \"px\";\n    }\n    if (borderStyle === 1) {\n      styles[\"--cue-padding-y\"] = \"0\";\n    }\n    if (borderStyle === 1 || bgColor) {\n      styles[\"--cue-bg-color\"] = borderStyle === 1 ? \"none\" : bgColor;\n    }\n    if (borderStyle === 3 && outlineColor) {\n      styles[\"--cue-outline\"] = `${outlineX}px solid ${outlineColor}`;\n    }\n    if (borderStyle === 1 && typeof outlineX === \"number\") {\n      const color = bgColor ?? \"#000\";\n      styles[\"--cue-text-shadow\"] = [\n        outlineColor && buildTextShadow(outlineX * 1.2, outlineY * 1.2, outlineColor),\n        outlineColor ? buildTextShadow(outlineX * (outlineX / 2), outlineY * (outlineX / 2), color) : buildTextShadow(outlineX, outlineY, color)\n      ].filter(Boolean).join(\", \");\n    }\n    if (transform.length)\n      styles[\"--cue-transform\"] = transform.join(\" \");\n    this.Q[name] = styles;\n  }\n  U(values, lineCount) {\n    const fields = this.V(values);\n    const timestamp = this.o(fields.Start, fields.End, lineCount);\n    if (!timestamp)\n      return;\n    const cue = new VTTCue(timestamp[0], timestamp[1], \"\"), styles = { ...this.Q[fields.Style] || {} }, voice = fields.Name ? `<v ${fields.Name}>` : \"\";\n    const vertical = styles.S, marginLeft = fields.MarginL && parseFloat(fields.MarginL), marginRight = fields.MarginR && parseFloat(fields.MarginR), marginV = fields.MarginV && parseFloat(fields.MarginV);\n    if (marginLeft) {\n      styles[\"--cue-width\"] = \"auto\";\n      styles[\"--cue-left\"] = marginLeft + \"px\";\n    }\n    if (marginRight) {\n      styles[\"--cue-width\"] = \"auto\";\n      styles[\"--cue-right\"] = marginRight + \"px\";\n    }\n    if (marginV && vertical !== \"center\") {\n      styles[`--cue-${vertical}`] = marginV + \"px\";\n    }\n    cue.text = voice + values.slice(this.O.length - 1).join(\", \").replace(STYLE_FUNCTION_RE, \"\").replace(NEW_LINE_RE, \"\\n\");\n    delete styles.S;\n    if (Object.keys(styles).length)\n      cue.style = styles;\n    return cue;\n  }\n  V(values) {\n    const fields = {};\n    for (let i = 0; i < this.O.length; i++) {\n      fields[this.O[i]] = values[i];\n    }\n    return fields;\n  }\n  o(startTimeText, endTimeText, lineCount) {\n    const startTime = parseVTTTimestamp(startTimeText), endTime = parseVTTTimestamp(endTimeText);\n    if (startTime !== null && endTime !== null && endTime > startTime) {\n      return [startTime, endTime];\n    } else {\n      if (startTime === null) {\n        this.e(this.d?.q(startTimeText, lineCount));\n      }\n      if (endTime === null) {\n        this.e(this.d?.r(endTimeText, lineCount));\n      }\n      if (startTime != null && endTime !== null && endTime > startTime) {\n        this.e(this.d?.s(startTime, endTime, lineCount));\n      }\n    }\n  }\n  e(error) {\n    if (!error)\n      return;\n    this.k.push(error);\n    if (this.f.strict) {\n      this.f.cancel();\n      throw error;\n    } else {\n      this.f.onError?.(error);\n    }\n  }\n}\nfunction parseColor(color) {\n  const abgr = parseInt(color.replace(\"&H\", \"\"), 16);\n  if (abgr >= 0) {\n    const a = abgr >> 24 & 255 ^ 255;\n    const alpha = a / 255;\n    const b = abgr >> 16 & 255;\n    const g = abgr >> 8 & 255;\n    const r = abgr & 255;\n    return \"rgba(\" + [r, g, b, alpha].join(\",\") + \")\";\n  }\n  return null;\n}\nfunction buildTextShadow(x, y, color) {\n  const noOfShadows = Math.ceil(2 * Math.PI * x);\n  let textShadow = \"\";\n  for (let i = 0; i < noOfShadows; i++) {\n    const theta = 2 * Math.PI * i / noOfShadows;\n    textShadow += x * Math.cos(theta) + \"px \" + y * Math.sin(theta) + \"px 0 \" + color + (i == noOfShadows - 1 ? \"\" : \",\");\n  }\n  return textShadow;\n}\nfunction createSSAParser() {\n  return new SSAParser();\n}\n\nexport { SSAParser, createSSAParser as default };\n"],"file":"assets/ssa-parser-CJUgTnfn.js"}
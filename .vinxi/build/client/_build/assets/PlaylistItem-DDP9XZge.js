import{L as B,I as G,at as y,_ as H,aF as Q,ae as S}from"./syncStore-BssUQgBy.js";import{j as C,L as d,J as W,k as X,e as L,r as o,N as E,K as m,w as r,a as I,M as Y,y as c}from"./routing-BmD2xUmi.js";import{L as P}from"./Link-Dg-h0Eyu.js";var Z=c('<div class="absolute inset-0 w-full h-full bg-bg1/50 rounded-lg">'),p=c('<div class="flex max-w-full w-full @container"><div class="flex absolute aspect-square -top-2 -left-1 py-2 font-bold flex-col items-center justify-center h-4 rounded-md rounded-bl-none rounded-tr-none px-3 text-xs"></div><div class="shadow-xl my-auto w-0 min-w-[6rem] @[20rem]:min-w-[7rem] @[35rem]:min-w-[9rem] @[50rem]:min-w-[11rem]max-w-[6rem] @[20rem]:max-w-[7rem] @[35rem]:max-w-[9rem] @[50rem]:max-w-[11rem] aspect-video max-h-full rounded-lg "><img class="object-cover w-full h-full max-w-full max-h-full rounded-lg "><!$><!/><div class="relative h-0 w-full bg-red-500 align-self-end"><div class="absolute bottom-1 right-1 text-xs @[20rem]:text-sm rounded bg-bg1/80 text-text1 px-1"></div></div></div><div class="px-2 max-w-full min-w-0"><div class="max-h-10 min-w-0 font-bold max-w-full text-sm overflow-hidden overflow-ellipsis "><!$><!/> </div><div class="truncate text-xs text-text2"><!$><!/><div class="inline-block mr-1"><!$><!/> views •</div><div class="inline-block mr-1">'),ee=c('<div class="self-center justify-self-end ml-2">'),te=c('<div class="relative h-0 w-full"><div class="absolute bottom-0 h-1 bg-highlight">');const ae=e=>{const[v,k]=C(void 0),j=B();G(),d(async()=>{const t=j.store.playlists[e.list]?.relatedStreams?.find(l=>y(l)===y(e.v));k(t?.currentTime)});let i;W(()=>{console.log("effect"),H(()=>import("./long-press-event-CiZXM6zQ.js"),[]),i&&(e.index,e.active,i.addEventListener("long-press",t=>{t.preventDefault(),console.log("long press"),A(!0)}),i.addEventListener("contextmenu",t=>{t.preventDefault()}))}),X(()=>{i&&(i.removeEventListener("long-press",()=>{}),i.removeEventListener("contextmenu",()=>{}))});const[le,A]=C(!1),[M]=Q(e.v.uploaded,{interval:1e3*60});return L(P,{ref(t){var l=i;typeof l=="function"?l(t):i=t},get href(){return`${e.v.url}&list=${e.list}&index=${e.index}`},class:"select-none relative min-h-[5rem] flex justify-between bg-bg2 hover:bg-bg1 px-1 focus-visible:ring-2 focus-visible:ring-accent1 outline-none mx-1 py-2 rounded-lg text-text1",get children(){return[(()=>{var t=o(Z);return d(l=>E(t,{"bg-primary/50 ":parseInt(e.active)===e.index},l)),t})(),(()=>{var t=o(p),l=t.firstChild,u=l.nextSibling,g=u.firstChild,N=g.nextSibling,[b,D]=m(N.nextSibling),O=b.nextSibling,T=O.firstChild,R=u.nextSibling,x=R.firstChild,U=x.firstChild,[_,V]=m(U.nextSibling);_.nextSibling;var $=x.nextSibling,q=$.firstChild,[h,F]=m(q.nextSibling),f=h.nextSibling,J=f.firstChild,[w,K]=m(J.nextSibling);w.nextSibling;var z=f.nextSibling;return r(l,()=>e.index),r(u,(()=>{var n=I(()=>!!v());return()=>n()&&(()=>{var s=o(te),a=s.firstChild;return d(()=>`clamp(0%, ${v()/e.v.duration*100}%, 100%`!=null?a.style.setProperty("width",`clamp(0%, ${v()/e.v.duration*100}%, 100%`):a.style.removeProperty("width")),s})()})(),b,D),r(T,()=>S(e.v.duration).format("00:00:00").replace(/^0:/,"")),r(x,()=>e.v.title,_,V),r($,L(P,{get href(){return e.v.uploaderUrl},class:"inline-block mr-1 link !text-text2",get children(){return[I(()=>e.v.uploaderName)," •"]}}),h,F),r(f,()=>S(e.v.views).format("0a").toUpperCase(),w,K),r(z,M),d(n=>{var s={"bg-primary text-text3 ":parseInt(e.active)===e.index,"bg-bg2 text-text1":parseInt(e.active)!==e.index},a=e.v.thumbnail;return n.e=E(l,s,n.e),a!==n.t&&Y(g,"src",n.t=a),n},{e:void 0,t:void 0}),t})(),o(ee)]}})};export{ae as P};
//# sourceMappingURL=PlaylistItem-DDP9XZge.js.map

{"version":3,"mappings":"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","names":["PlaylistItem","props","progress","setProgress","createSignal","undefined","sync","useSyncStore","usePreferences","createRenderEffect","val","store","playlists","list","relatedStreams","find","v","getVideoId","currentTime","card","onMount","console","log","__vitePreload","index","active","addEventListener","e","preventDefault","setIsOpen","onCleanup","removeEventListener","isOpen","timeAgo","createTimeAgo","uploaded","interval","_$createComponent","Link","ref","r$","_ref$","href","url","children","_el$","_$getNextElement","_tmpl$","_$p","_$classList","parseInt","_el$2","_tmpl$2","_el$3","firstChild","_el$4","nextSibling","_el$5","_el$8","_el$9","_co$","_$getNextMarker","_el$6","_el$7","_el$10","_el$11","_el$13","_el$14","_co$2","_el$15","_el$21","_el$22","_co$4","_el$16","_el$18","_el$19","_co$3","_el$20","_$insert","_c$","_$memo","_el$24","_tmpl$4","_el$25","duration","style","setProperty","removeProperty","numeral","format","replace","title","uploaderUrl","uploaderName","views","toUpperCase","_$effect","_p$","_v$","_v$2","thumbnail","t","_$setAttribute","_tmpl$3"],"ignoreList":[],"sources":["../../../../../src/components/content/playlist/PlaylistItem.tsx"],"sourcesContent":["import numeral from \"numeral\";\nimport {\n  createEffect,\n  createRenderEffect,\n  createSignal,\n  onCleanup,\n  onMount,\n  useContext,\n} from \"solid-js\";\nimport { RelatedStream } from \"~/types\";\nimport {  useSyncStore } from \"~/stores/syncStore\";\nimport { generateThumbnailUrl, getVideoId } from \"~/utils/helpers\";\nimport { usePreferences } from \"~/stores/preferencesStore\";\nimport { createTimeAgo } from \"@solid-primitives/date\";\nimport Link from \"~/components/Link\";\n\nconst PlaylistItem = (props: {\n  v: RelatedStream;\n  index: number;\n  list: string;\n  active: string;\n}) => {\n  const [progress, setProgress] = createSignal<number | undefined>(undefined);\n  const sync = useSyncStore();\n  const [preferences] = usePreferences();\n\n  createRenderEffect(async () => {\n    const val = sync.store.playlists[props.list]?.relatedStreams?.find(\n      (v) => getVideoId(v) === getVideoId(props.v)\n    ) as any;\n    setProgress(val?.currentTime);\n  });\n  let card: HTMLAnchorElement | undefined = undefined;\n  onMount(() => {\n    console.log(\"effect\");\n    import(\"long-press-event\");\n    if (!card) return;\n    props.index;\n    props.active;\n    card.addEventListener(\"long-press\", (e) => {\n      e.preventDefault();\n      console.log(\"long press\");\n      setIsOpen(true);\n    });\n    card.addEventListener(\"contextmenu\", (e) => {\n      e.preventDefault();\n    });\n  });\n  onCleanup(() => {\n    if (!card) return;\n    card.removeEventListener(\"long-press\", () => {});\n    card.removeEventListener(\"contextmenu\", () => {});\n  });\n  const [isOpen, setIsOpen] = createSignal(false);\n  const [timeAgo] = createTimeAgo(props.v.uploaded, {interval: 1000 * 60 })\n\n  return (\n    <Link\n      // draggable=\"false\"\n      // data-long-press-delay=\"500\"\n      ref={card}\n      href={`${props.v.url}&list=${props.list}&index=${props.index}`}\n      // style={{ \"background-image\": `url(${props.v.thumbnail})` }}\n      class={`select-none relative min-h-[5rem] flex justify-between bg-bg2 hover:bg-bg1 px-1 focus-visible:ring-2 focus-visible:ring-accent1 outline-none mx-1 py-2 rounded-lg text-text1`}\n    >\n      <div\n        classList={{\n          \"bg-primary/50 \": parseInt(props.active) === props.index,\n        }}\n        class=\"absolute inset-0 w-full h-full bg-bg1/50 rounded-lg\"\n      ></div>\n      <div class=\"flex max-w-full w-full @container\">\n        <div\n          classList={{\n            \"bg-primary text-text3 \": parseInt(props.active) === props.index,\n            \"bg-bg2 text-text1\": parseInt(props.active) !== props.index,\n          }}\n          class=\"flex absolute aspect-square -top-2 -left-1  py-2 font-bold flex-col items-center justify-center h-4 rounded-md rounded-bl-none rounded-tr-none px-3 text-xs\"\n        >\n          {props.index}\n        </div>\n        <div class=\"shadow-xl my-auto w-0 min-w-[6rem] @[20rem]:min-w-[7rem] @[35rem]:min-w-[9rem] @[50rem]:min-w-[11rem]max-w-[6rem] @[20rem]:max-w-[7rem] @[35rem]:max-w-[9rem] @[50rem]:max-w-[11rem] aspect-video max-h-full rounded-lg \">\n          <img\n            class=\"object-cover w-full h-full max-w-full max-h-full rounded-lg \"\n            src={props.v.thumbnail}\n          />\n          {!!progress() && (\n            <div class=\"relative h-0 w-full\">\n              <div\n                style={{\n                  width: `clamp(0%, ${\n                    (progress()! / props.v.duration) * 100\n                  }%, 100%`,\n                }}\n                class=\"absolute bottom-0 h-1 bg-highlight\"\n              ></div>\n            </div>\n          )}\n          <div class=\"relative h-0 w-full bg-red-500 align-self-end\">\n            <div class=\"absolute bottom-1 right-1 text-xs @[20rem]:text-sm rounded bg-bg1/80 text-text1 px-1\">\n              {numeral(props.v.duration).format(\"00:00:00\").replace(/^0:/, \"\")}\n            </div>\n          </div>\n        </div>\n\n        <div class=\"px-2 max-w-full min-w-0\">\n          <div\n            // style={{\"text-shadow\": \"1px 1px 2px rgba(0,0,0,0.9)\"}}\n            class=\"max-h-10 min-w-0 font-bold max-w-full text-sm overflow-hidden overflow-ellipsis \"\n          >\n            {props.v.title}{\" \"}\n          </div>\n          <div class=\"truncate text-xs text-text2\">\n            <Link\n              href={props.v.uploaderUrl}\n              class=\"inline-block mr-1 link !text-text2\"\n            >\n              {props.v.uploaderName} •\n            </Link>\n            <div class=\"inline-block mr-1\">\n              {numeral(props.v.views).format(\"0a\").toUpperCase()} views •\n            </div>\n            <div class=\"inline-block mr-1\">\n              {timeAgo()}\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"self-center justify-self-end ml-2\">\n        {/* <Dropdown */}\n        {/*   icon={ */}\n        {/*     <svg */}\n        {/*       xmlns=\"http://www.w3.org/2000/svg\" */}\n        {/*       width=\"16\" */}\n        {/*       height=\"16\" */}\n        {/*       fill=\"currentColor\" */}\n        {/*       class=\"text-text1 rounded-full w-6 h-6\" */}\n        {/*       viewBox=\"0 0 16 16\" */}\n        {/*     > */}\n        {/*       {\" \"} */}\n        {/*       <path d=\"M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z\" />{\" \"} */}\n        {/*     </svg> */}\n        {/*   } */}\n        {/*   iconPosition=\"right\" */}\n        {/*   panelPosition=\"left\" */}\n        {/* > */}\n        {/*   <DropdownItem as=\"button\" label=\"Add to playlist\" /> */}\n        {/*   <DropdownItem as=\"button\" label=\"Add to queue\" /> */}\n        {/* </Dropdown> */}\n      </div>\n    </Link>\n  );\n};\n\nexport default PlaylistItem;\n"],"file":"assets/PlaylistItem-DDP9XZge.js"}